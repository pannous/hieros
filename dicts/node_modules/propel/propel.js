require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var a=e[n]=new t.Module;r[n][0].call(a.exports,i,a,a.exports)}return e[n].exports}function o(){this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({528:[function(require,module,exports) {
!function(n,t,e){function s(n,t){return t.c=n.c,t.s0=n.s0,t.s1=n.s1,t.s2=n.s2,t}function r(n,t){var e=new function(n){var t=this,e=function(){var n=4022871197;return function(t){t=t.toString();for(var e=0;e<t.length;e++){var s=.02519603282416938*(n+=t.charCodeAt(e));s-=n=s>>>0,n=(s*=n)>>>0,n+=4294967296*(s-=n)}return 2.3283064365386963e-10*(n>>>0)}}();t.next=function(){var n=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=n-(t.c=0|n)},t.c=1,t.s0=e(" "),t.s1=e(" "),t.s2=e(" "),t.s0-=e(n),t.s0<0&&(t.s0+=1),t.s1-=e(n),t.s1<0&&(t.s1+=1),t.s2-=e(n),t.s2<0&&(t.s2+=1),e=null}(n),r=t&&t.state,u=e.next;return u.int32=function(){return 4294967296*e.next()|0},u.double=function(){return u()+1.1102230246251565e-16*(2097152*u()|0)},u.quick=u,r&&("object"==typeof r&&s(r,e),u.state=function(){return s(e,{})}),u}t&&t.exports?t.exports=r:e&&e.amd?e(function(){return r}):this.alea=r}(0,"object"==typeof module&&module,"function"==typeof define&&define);
},{}],527:[function(require,module,exports) {
!function(t,n,e){function o(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n}function r(t,n){var e=new function(t){var n=this,e="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var t=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^t^t>>>8},t===(0|t)?n.x=t:e+=t;for(var o=0;o<e.length+64;o++)n.x^=0|e.charCodeAt(o),n.next()}(t),r=n&&n.state,u=function(){return(e.next()>>>0)/4294967296};return u.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},u.int32=e.next,u.quick=u,r&&("object"==typeof r&&o(r,e),u.state=function(){return o(e,{})}),u}n&&n.exports?n.exports=r:e&&e.amd?e(function(){return r}):this.xor128=r}(0,"object"==typeof module&&module,"function"==typeof define&&define);
},{}],526:[function(require,module,exports) {
!function(t,n,e){function o(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n.v=t.v,n.d=t.d,n}function r(t,n){var e=new function(t){var n=this,e="";n.next=function(){var t=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^t^t<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,t===(0|t)?n.x=t:e+=t;for(var o=0;o<e.length+64;o++)n.x^=0|e.charCodeAt(o),o==e.length&&(n.d=n.x<<10^n.x>>>4),n.next()}(t),r=n&&n.state,u=function(){return(e.next()>>>0)/4294967296};return u.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},u.int32=e.next,u.quick=u,r&&("object"==typeof r&&o(r,e),u.state=function(){return o(e,{})}),u}n&&n.exports?n.exports=r:e&&e.amd?e(function(){return r}):this.xorwow=r}(0,"object"==typeof module&&module,"function"==typeof define&&define);
},{}],525:[function(require,module,exports) {
!function(n,t,e){function r(n,t){return t.x=n.x.slice(),t.i=n.i,t}function i(n,t){null==n&&(n=+new Date);var e=new function(n){var t=this;t.next=function(){var n,e,r=t.x,i=t.i;return n=r[i],n^=n>>>7,e=n^n<<24,n=r[i+1&7],e^=n^n>>>10,n=r[i+3&7],e^=n^n>>>3,n=r[i+4&7],e^=n^n<<7,n=r[i+7&7],n^=n<<13,e^=n^n<<9,r[i]=e,t.i=i+1&7,e},function(n,t){var e,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,e=0;e<t.length;++e)r[7&e]=r[7&e]<<15^t.charCodeAt(e)+r[e+1&7]<<13;for(;r.length<8;)r.push(0);for(e=0;e<8&&0===r[e];++e);for(8==e?r[7]=-1:r[e],n.x=r,n.i=0,e=256;e>0;--e)n.next()}(t,n)}(n),i=t&&t.state,o=function(){return(e.next()>>>0)/4294967296};return o.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},o.int32=e.next,o.quick=o,i&&(i.x&&r(i,e),o.state=function(){return r(e,{})}),o}t&&t.exports?t.exports=i:e&&e.amd?e(function(){return i}):this.xorshift7=i}(0,"object"==typeof module&&module,"function"==typeof define&&define);
},{}],530:[function(require,module,exports) {
!function(n,t,e){function r(n,t){return t.i=n.i,t.w=n.w,t.X=n.X.slice(),t}function i(n,t){null==n&&(n=+new Date);var e=new function(n){var t=this;t.next=function(){var n,e,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,e=i[o+34&127],n=i[o=o+1&127],e^=e<<13,n^=n<<17,e^=e>>>15,n^=n>>>12,e=i[o]=e^n,t.i=o,e+(r^r>>>16)|0},function(n,t){var e,r,i,o,u,f=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),i=0,o=-32;o<c;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(u=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(u=u+1640531527|0,i=0==(e=f[127&o]^=r+u)?i+1:0);for(i>=128&&(f[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=f[i+34&127],e=f[i=i+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,f[i]=r^e;n.w=u,n.X=f,n.i=i}(t,n)}(n),i=t&&t.state,o=function(){return(e.next()>>>0)/4294967296};return o.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},o.int32=e.next,o.quick=o,i&&(i.X&&r(i,e),o.state=function(){return r(e,{})}),o}t&&t.exports?t.exports=i:e&&e.amd?e(function(){return i}):this.xor4096=i}(0,"object"==typeof module&&module,"function"==typeof define&&define);
},{}],529:[function(require,module,exports) {
!function(t,n,e){function o(t,n){return n.a=t.a,n.b=t.b,n.c=t.c,n.d=t.d,n}function r(t,n){var e=new function(t){var n=this,e="";n.next=function(){var t=n.b,e=n.c,o=n.d,r=n.a;return t=t<<25^t>>>7^e,e=e-o|0,o=o<<24^o>>>8^r,r=r-t|0,n.b=t=t<<20^t>>>12^e,n.c=e=e-o|0,n.d=o<<16^e>>>16^r,n.a=r-t|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,t===Math.floor(t)?(n.a=t/4294967296|0,n.b=0|t):e+=t;for(var o=0;o<e.length+20;o++)n.b^=0|e.charCodeAt(o),n.next()}(t),r=n&&n.state,u=function(){return(e.next()>>>0)/4294967296};return u.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},u.int32=e.next,u.quick=u,r&&("object"==typeof r&&o(r,e),u.state=function(){return o(e,{})}),u}n&&n.exports?n.exports=r:e&&e.amd?e(function(){return r}):this.tychei=r}(0,"object"==typeof module&&module,"function"==typeof define&&define);
},{}],531:[function(require,module,exports) {

},{}],524:[function(require,module,exports) {
var global = (1,eval)("this");
var n=(0,eval)("this");!function(n,r){function t(t,y,v){var m=[],j=i(o((y=1==y?{entropy:!0}:y||{}).entropy?[t,u(n)]:null==t?function(){try{var r;return a&&(r=a.randomBytes)?r=r(c):(r=new Uint8Array(c),(f.crypto||f.msCrypto).getRandomValues(r)),u(r)}catch(r){var t=f.navigator,e=t&&t.plugins;return[+new Date,f,e,f.screen,u(n)]}}():t,3),m),S=new function(n){var r,t=n.length,e=this,o=0,i=e.i=e.j=0,u=e.S=[];t||(n=[t++]);for(;o<c;)u[o]=o++;for(o=0;o<c;o++)u[o]=u[i=h&i+n[o%t]+(r=u[o])],u[i]=r;(e.g=function(n){for(var r,t=0,o=e.i,i=e.j,u=e.S;n--;)r=u[o=h&o+1],t=t*c+u[h&(u[o]=u[i=h&i+r])+(u[i]=r)];return e.i=o,e.j=i,t})(c)}(m),b=function(){for(var n=S.g(s),r=p,t=0;n<d;)n=(n+t)*c,r*=c,t=S.g(1);for(;n>=g;)n/=2,r/=2,t>>>=1;return(n+t)/r};return b.int32=function(){return 0|S.g(4)},b.quick=function(){return S.g(4)/4294967296},b.double=b,i(u(S.S),n),(y.pass||v||function(n,t,o,i){return i&&(i.S&&e(i,S),n.state=function(){return e(S,{})}),o?(r[l]=n,t):n})(b,j,"global"in y?y.global:this==r,y.state)}function e(n,r){return r.i=n.i,r.j=n.j,r.S=n.S.slice(),r}function o(n,r){var t,e=[],i=typeof n;if(r&&"object"==i)for(t in n)try{e.push(o(n[t],r-1))}catch(n){}return e.length?e:"string"==i?n:n+"\0"}function i(n,r){for(var t,e=n+"",o=0;o<e.length;)r[h&o]=h&(t^=19*r[h&o])+e.charCodeAt(o++);return u(r)}function u(n){return String.fromCharCode.apply(0,n)}var a,f=this,c=256,s=6,l="random",p=r.pow(c,s),d=r.pow(2,52),g=2*d,h=c-1;if(r["seed"+l]=t,i(r.random(),n),"object"==typeof module&&module.exports){module.exports=t;try{a=require("crypto")}catch(n){}}else"function"==typeof define&&define.amd&&define(function(){return t})}([],Math);
},{"crypto":531}],523:[function(require,module,exports) {
var r=require("./lib/alea"),e=require("./lib/xor128"),i=require("./lib/xorwow"),o=require("./lib/xorshift7"),l=require("./lib/xor4096"),x=require("./lib/tychei"),u=require("./seedrandom");u.alea=r,u.xor128=e,u.xorwow=i,u.xorshift7=o,u.xor4096=l,u.tychei=x,module.exports=u;
},{"./lib/alea":528,"./lib/xor128":527,"./lib/xorwow":526,"./lib/xorshift7":525,"./lib/xor4096":530,"./lib/tychei":529,"./seedrandom":524}],26:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("seedrandom");class e{constructor(e,s,i,a,n){this.mean=e,this.stdDev=s,this.dtype=i,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const r=n||Math.random();this.random=t.alea(r.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,s=!1;for(;!s;){let i,a,n;do{n=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a}while(n>=1||0===n);const r=Math.sqrt(-2*Math.log(n)/n);t=this.mean+this.stdDev*i*r,e=this.mean+this.stdDev*a*r,this.truncated&&!this.isValidTruncated(t)||(s=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}exports.MPRandGauss=e;
},{"seedrandom":523}],17:[function(require,module,exports) {
"use strict";function t(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e){const e=new Int32Array(t.length);for(let r=0;r<e.length;++r){const s=t[r];o.isValNaN(s,"int32")?e[r]=o.getNaN("int32"):e[r]=s}return e}if("bool"===e){const e=new Uint8Array(t.length);for(let r=0;r<e.length;++r){const s=t[r];o.isValNaN(s,"bool")?e[r]=o.getNaN("bool"):0!==Math.round(s)&&(e[r]=1)}return e}throw new Error(`Unknown data type ${e}`)}function e(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function r(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}function s(e,s){return r(e,s)?e:(Array.isArray(e)&&(e=o.flatten(e)),t(e,s))}function a(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function n(t,e){const r=a(t,e);for(let t=0;t<r.length;t++)r[t]=1;return r}Object.defineProperty(exports,"__esModule",{value:!0});const i=require("../environment"),o=require("../util"),h=require("./rand");var d;!function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(d=exports.DType||(exports.DType={}));class u{}exports.DataId=u;class l{constructor(t,e,r,s,a){this.isDisposed=!1,this.math=a||i.ENV.math,this.size=o.sizeFromShape(t),null!=r&&o.assert(this.size===r.length,`Constructing ndarray of shape (${this.size}) should match the `+`length of values (${r.length})`),this.shape=t,this.dtype=e||"float32";const n=this.shape.length;if(n<2)this.strides=[];else{this.strides=new Array(n-1),this.strides[n-2]=this.shape[n-1];for(let t=n-3;t>=0;--t)this.strides[t]=this.strides[t+1]*this.shape[t+1]}this.dataId=null!=s?s:new u,this.id=l.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",this.math.register(this),null!=r&&this.math.write(this.dataId,r)}static ones(t,e){const r=n(o.sizeFromShape(t),e);return l.make(t,{values:r},e)}static zeros(t,e){const r=a(o.sizeFromShape(t),e);return l.make(t,{values:r},e)}static onesLike(t){return l.ones(t.shape,t.dtype)}static zerosLike(t){return l.zeros(t.shape,t.dtype)}static like(e){const r=t(e.dataSync(),e.dtype);return l.make(e.shape,{values:r},e.dtype,e.math)}static make(t,e,r,s){switch(t.length){case 0:return new c(t,r,e.values,e.dataId,s);case 1:return new p(t,r,e.values,e.dataId,s);case 2:return new f(t,r,e.values,e.dataId,s);case 3:return new w(t,r,e.values,e.dataId,s);case 4:return new y(t,r,e.values,e.dataId,s);default:return new l(t,r,e.values,e.dataId,s)}}static fromPixels(t,e=3,r){if(e>4)throw new Error("Cannot construct NDArray with more than 4 channels from pixels.");const s=[t.height,t.width,e];r=r||i.ENV.math;const a=l.make(s,{},"int32",r);return r.writePixels(a.dataId,t,e),a}reshape(t){return this.throwIfDisposed(),this.math.reshape(this,t)}flatten(){return this.throwIfDisposed(),this instanceof p?this:this.as1D()}asScalar(){return this.throwIfDisposed(),o.assert(1===this.size,"The array must have only 1 element."),this.reshape([])}as1D(){return this.throwIfDisposed(),this.reshape([this.size])}as2D(t,e){return this.throwIfDisposed(),this.reshape([t,e])}as3D(t,e,r){return this.throwIfDisposed(),this.reshape([t,e,r])}as4D(t,e,r,s){return this.throwIfDisposed(),this.reshape([t,e,r,s])}asType(t){return this.throwIfDisposed(),this.math.cast(this,t)}get rank(){return this.shape.length}get(...t){let e=t[t.length-1];for(let r=0;r<t.length-1;++r)e+=this.strides[r]*t[r];return this.dataSync()[e]}add(t,...e){this.set(this.get(...e)+t,...e)}set(t,...e){this.throwIfDisposed(),o.assert(e.length===this.rank,`The number of provided coordinates (${e.length}) must `+`match the rank (${this.rank})`);let r=e.length>0?e[e.length-1]:0;for(let t=0;t<e.length-1;++t)r+=this.strides[t]*e[t];const s=this.dataSync();s[r]=t,this.math.write(this.dataId,s)}async val(...t){return this.throwIfDisposed(),await this.data(),this.get(...t)}locToIndex(t){this.throwIfDisposed();let e=t[t.length-1];for(let r=0;r<t.length-1;++r)e+=this.strides[r]*t[r];return e}indexToLoc(t){this.throwIfDisposed();const e=new Array(this.shape.length);for(let r=0;r<e.length-1;++r)e[r]=Math.floor(t/this.strides[r]),t-=e[r]*this.strides[r];return e[e.length-1]=t,e}fill(t){this.throwIfDisposed();const e=this.dataSync();e.fill(t),this.math.write(this.dataId,e)}getValues(){return this.dataSync()}getValuesAsync(){return this.data()}async data(){return this.throwIfDisposed(),this.math.read(this.dataId)}dataSync(){return this.throwIfDisposed(),this.math.readSync(this.dataId)}dispose(){this.isDisposed||(this.isDisposed=!0,this.math.disposeData(this.dataId))}equals(t){return this.throwIfDisposed(),this.dtype===t.dtype&&o.arraysEqual(this.shape,t.shape)&&o.arraysEqual(this.dataSync(),t.dataSync())}static rand(t,e,r){const s=o.sizeFromShape(t);let a=null;if(null==r||"float32"===r)a=new Float32Array(s);else if("int32"===r)a=new Int32Array(s);else{if("bool"!==r)throw new Error(`Unknown data type ${r}`);a=new Uint8Array(s)}for(let t=0;t<s;t++)a[t]=e();return l.make(t,{values:a},r)}static randNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!1,a);return l.rand(t,()=>n.nextValue(),s)}static randTruncatedNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!0,a);return l.rand(t,()=>n.nextValue(),s)}static randUniform(t,e,r,s){return l.rand(t,()=>o.randUniform(e,r),s)}throwIfDisposed(){if(this.isDisposed)throw new Error("NDArray is disposed.")}}l.nextId=0,exports.NDArray=l;class c extends l{static new(t,e){return new c([],e,s([t],e))}get(){return this.dataSync()[0]}async val(){return await this.data(),this.get()}add(t){this.dataSync()[0]+=t}asType(t){return super.asType(t)}locToIndex(t){return 0}indexToLoc(t){return[]}}exports.Scalar=c;class p extends l{static new(t,r){if(!e(t)){const e=o.inferShape(t);o.assert(1===e.length,`Error constructing Array1D. Shape of values ${e} is `+"not 1 dimensional.")}return new p([t.length],r,s(t,r))}get(t){return this.dataSync()[t]}async val(t){return await this.data(),this.get(t)}add(t,e){this.dataSync()[e]+=t}locToIndex(t){return t[0]}indexToLoc(t){return[t]}asType(t){return super.asType(t)}static ones(t,e){return l.ones(t,e)}static zeros(t,e){return l.zeros(t,e)}static randNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!1,a);return l.rand(t,()=>n.nextValue(),s)}static randTruncatedNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!0,a);return l.rand(t,()=>n.nextValue(),s)}static randUniform(t,e,r,s){return l.rand(t,()=>o.randUniform(e,r),s)}}exports.Array1D=p;class f extends l{constructor(t,e,r,s,a){o.assert(2===t.length,"Shape should be of length 2"),super(t,e,r,s,a)}static new(t,r,a){if(!e(r)){const e=o.inferShape(r);e.length>1&&o.assertShapesMatch(t,e,"Error when constructing Array2D. Shape of values "+`${e} does not match the provided shape `+`${t}. `)}return new f(t,a,s(r,a))}get(t,e){return this.dataSync()[this.strides[0]*t+e]}add(t,e,r){this.dataSync()[this.strides[0]*e+r]+=t}async val(t,e){return await this.data(),this.get(t,e)}locToIndex(t){return this.strides[0]*t[0]+t[1]}indexToLoc(t){return[Math.floor(t/this.strides[0]),t%this.strides[0]]}asType(t){return super.asType(t)}static ones(t,e){return l.ones(t,e)}static zeros(t,e){return l.zeros(t,e)}static randNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!1,a);return l.rand(t,()=>n.nextValue(),s)}static randTruncatedNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!0,a);return l.rand(t,()=>n.nextValue(),s)}static randUniform(t,e,r,s){return l.rand(t,()=>o.randUniform(e,r),s)}}exports.Array2D=f;class w extends l{constructor(t,e,r,s,a){o.assert(3===t.length,"Shape should be of length 3"),super(t,e,r,s,a)}static new(t,r,a){if(!e(r)){const e=o.inferShape(r);e.length>1&&o.assertShapesMatch(t,e,"Error when constructing Array3D. Shape of values "+`${e} does not match the provided shape `+`${t}. `)}return new w(t,a,s(r,a))}get(t,e,r){return this.dataSync()[this.strides[0]*t+this.strides[1]*e+r]}async val(t,e,r){return await this.data(),this.get(t,e,r)}add(t,e,r,s){this.dataSync()[this.strides[0]*e+this.strides[1]*r+s]+=t}locToIndex(t){return this.strides[0]*t[0]+this.strides[1]*t[1]+t[2]}indexToLoc(t){const e=Math.floor(t/this.strides[0]);return t-=e*this.strides[0],[e,Math.floor(t/this.strides[1]),t%this.strides[1]]}static ones(t,e){return l.ones(t,e)}asType(t){return super.asType(t)}static zeros(t,e){return l.zeros(t,e)}static randNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!1,a);return l.rand(t,()=>n.nextValue(),s)}static randTruncatedNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!0,a);return l.rand(t,()=>n.nextValue(),s)}static randUniform(t,e,r,s){return l.rand(t,()=>o.randUniform(e,r),s)}}exports.Array3D=w;class y extends l{constructor(t,e,r,s,a){o.assert(4===t.length,"Shape should be of length 4"),super(t,e,r,s,a)}static new(t,r,a){if(!e(r)){const e=o.inferShape(r);e.length>1&&o.assertShapesMatch(t,e,"Error when constructing Array4D. Shape of values "+`${e} does not match the provided shape `+`${t}. `)}return new y(t,a,s(r,a))}get(t,e,r,s){return this.dataSync()[this.strides[0]*t+this.strides[1]*e+this.strides[2]*r+s]}async val(t,e,r,s){return await this.data(),this.get(t,e,r,s)}add(t,e,r,s,a){this.dataSync()[this.strides[0]*e+this.strides[1]*r+this.strides[2]*s+a]+=t}locToIndex(t){return this.strides[0]*t[0]+this.strides[1]*t[1]+this.strides[2]*t[2]+t[3]}indexToLoc(t){const e=Math.floor(t/this.strides[0]);t-=e*this.strides[0];const r=Math.floor(t/this.strides[1]);return t-=r*this.strides[1],[e,r,Math.floor(t/this.strides[2]),t%this.strides[2]]}asType(t){return super.asType(t)}static ones(t,e){return l.ones(t,e)}static zeros(t,e){return l.zeros(t,e)}static randNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!1,a);return l.rand(t,()=>n.nextValue(),s)}static randTruncatedNormal(t,e=0,r=1,s,a){if(null!=s&&"bool"===s)throw new Error(`Unsupported data type ${s}`);const n=new h.MPRandGauss(e,r,s,!0,a);return l.rand(t,()=>n.nextValue(),s)}static randUniform(t,e,r,s){return l.rand(t,()=>o.randUniform(e,r),s)}}exports.Array4D=y;
},{"../environment":15,"../util":24,"./rand":26}],24:[function(require,module,exports) {
"use strict";function t(t){let e=t.length,r=0,n=0;for(;e>0;)n=Math.random()*e|0,r=t[--e],t[e]=t[n],t[n]=r}function e(t,e,r){return Math.max(t,Math.min(e,r))}function r(t,e){return Math.random()*(e-t)+t}function n(t,e){let r=0;for(let n=0;n<t.length;n++){const o=Number(t[n])-Number(e[n]);r+=o*o}return r}function o(t,e){if(!t)throw new Error(e)}function s(t,e,r=""){o(p(t,e),r+`Shapes ${t} and ${e} must match`)}function a(t,e){o(t.dtype===e.dtype,`The dtypes of the first (${t.dtype}) and `+`second (${e.dtype}) input must match`)}function i(t,e=[]){if(Array.isArray(t))for(let r=0;r<t.length;++r)i(t[r],e);else e.push(t);return e}function u(t){const e=[];for(;t instanceof Array;)e.push(t.length),t=t[0];return e}function f(t){if(0===t.length)return 1;let e=t[0];for(let r=1;r<t.length;r++)e*=t[r];return e}function l(t){return 0===t.length}function p(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function h(t){return t%1==0}function c(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function d(t){for(let e=Math.floor(Math.sqrt(t));e>1;--e)if(t%e==0)return[e,t/e];return[1,t]}function x(e){const r=new Uint32Array(e);for(let t=0;t<e;++t)r[t]=t;return t(r),r}function N(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function m(t,e=(t=>0),r){return new Promise((n,o)=>{let s=0;const a=()=>{if(t())return void n();const i=e(++s);null!=r&&s>=r?o():setTimeout(a,i)};setTimeout(a,0)})}function y(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(g(e,r[0],r[1]),r.join("="))),e}function g(t,e,r){t[decodeURIComponent(e)]=decodeURIComponent(r||"")}function w(t,e){let r=1,n=-1;for(let e=0;e<t.length;++e)if(t[e]>0)r*=t[e];else if(-1===t[e]){if(-1!==n)throw Error("Shapes can only have 1 implicit size. "+`Found -1 at dim ${n} and dim ${e}`);n=e}else if(t[e]<=0)throw Error(`Shapes can not be <= 0. Found ${t[e]} at dim ${e}`);if(-1===n){if(e>0&&e!==r)throw Error(`Size (${e}) must match the product of shape ${t}`);return t}if(e%r!=0)throw Error("The implicit shape can't be a fractional number. "+`Got ${e} / ${r}`);const o=t.slice();return o[n]=e/r,o}function A(t){if("float32"===t)return exports.NAN_FLOAT32;if("int32"===t)return exports.NAN_INT32;if("bool"===t)return exports.NAN_BOOL;throw new Error(`Unknown dtype ${t}`)}function S(t,e){if(isNaN(t))return!0;if("float32"===e)return!1;if("int32"===e)return t===exports.NAN_INT32;if("bool"===e)return t===exports.NAN_BOOL;throw new Error(`Unknown dtype ${e}`)}function T(t){const e=[],r=[];for(let n=0;n<t.length;++n)t[n]>1&&(e.push(t[n]),r.push(n));return{newShape:e,keptDims:r}}function $(t,e){let r=null;if(null==t||"float32"===t)r=new Float32Array(e);else if("int32"===t)r=new Int32Array(e);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);r=new Uint8Array(e)}return r}function M(t,e){for(let r=0;r<e.length;r++)if(e[r].id===t.id)return!0;return!1}function E(t,e,r){for(let n=0;n<t.length;n++)if(S(t[n],e))throw Error(`The result of the last math.${r} has NaNs.`)}function b(t,e){const r=[];if(t instanceof F.NDArray)r.push(t);else{const n=t;for(let t=0;t<e.length;t++)r.push(n[e[t]])}return r}function I(t,e){if(t.length!==e.length)throw new Error("Cannot unflatten NDArray[], keys and arrays are not of same length.");const r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r}function _(t,e){return"float32"!==e&&(("int32"!==e||"float32"===t)&&("bool"!==e||"bool"!==t))}Object.defineProperty(exports,"__esModule",{value:!0});const F=require("./math/ndarray");exports.shuffle=t,exports.clamp=e,exports.randUniform=r,exports.distSquared=n,exports.assert=o,exports.assertShapesMatch=s,exports.assertTypesMatch=a,exports.flatten=i,exports.inferShape=u,exports.sizeFromShape=f,exports.isScalarShape=l,exports.arraysEqual=p,exports.isInt=h,exports.tanh=c,exports.sizeToSquarishShape=d,exports.createShuffledIndices=x,exports.rightPad=N,exports.repeatedTry=m,exports.getQueryParams=y,exports.inferFromImplicitShape=w,exports.NAN_INT32=1<<31,exports.NAN_BOOL=255,exports.NAN_FLOAT32=NaN,exports.getNaN=A,exports.isValNaN=S,exports.squeezeShape=T,exports.getTypedArrayFromDType=$,exports.isNDArrayInList=M,exports.checkForNaN=E,exports.flattenNameArrayMap=b,exports.unflattenToNameArrayMap=I,exports.hasEncodingLoss=_;
},{"./math/ndarray":17}],28:[function(require,module,exports) {
"use strict";function e(e,n){for(let t=0;t<e.length;++t)if(e[e.length-t-1]!==n-1-t)return!1;return!0}function n(e,n,t){const r=e.length+n.length,o=[];let s=0,u=0;for(let p=0;p<r;p++)-1===t.indexOf(p)?o.push(e[s++]):o.push(n[u++]);return o}function t(e,n){const t=[],r=e.length;for(let o=0;o<r;o++)-1===n.indexOf(o)&&t.push(e[o]);return[t,n.map(n=>e[n])]}function r(e,t){return n(e,t.map(e=>1),t)}function o(e,n){null==e?e=n.map((e,n)=>n):"number"==typeof e&&(e=[e]);const t=n.length;return e.forEach((e,n)=>{if(e<-t||e>=t)throw new Error("Axis must be between -rank and rank-1. "+`Got axis[${n}]=${e} where rank is ${t}`)}),e.map(e=>e<0?t+e:e)}function s(n,t,r){if(!e(t,r))throw new Error(`${n} supports only inner-most axes for now. `+`Got axes ${t} and rank-${r} input.`)}function u(n,t){if(e(n,t))return null;const r=[];for(let e=0;e<t;++e)-1===n.indexOf(e)&&r.push(e);return n.forEach(e=>r.push(e)),r}function p(e,n){const t=[];for(let r=n-e;r<n;++r)t.push(r);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.axesAreInnerMostDims=e,exports.combineLocations=n,exports.computeOutAndReduceShapes=t,exports.expandShapeToKeepDim=r,exports.parseAxisParam=o,exports.assertAxesAreInnerMostDims=s,exports.getPermutedAxes=u,exports.getInnerMostAxes=p;
},{}],32:[function(require,module,exports) {
"use strict";function t(t){if(null==t)return[];if(t instanceof c.NDArray)return[t];const e=[],s=t;for(const t in s){if(!s.hasOwnProperty(t))continue;const o=s[t];o instanceof c.NDArray&&e.push(o)}return e}Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../util"),c=require("../ndarray");exports.extractNDArraysFromScopeResult=t;class s{constructor(){this.activeScope=[],this.scopeStack=[this.activeScope]}scope(t,e){this.startScope();const c=e();return this.endScope(c),c}startScope(){const t=[];this.scopeStack.push(t),this.activeScope=t}endScope(c){const s=t(c);for(let t=0;t<this.activeScope.length;t++){const c=this.activeScope[t];e.isNDArrayInList(c,s)||c.dispose()}this.scopeStack.pop(),this.activeScope=0===this.scopeStack.length?null:this.scopeStack[this.scopeStack.length-1],s.forEach(t=>{this.track(t)})}track(t){return this.scopeStack.length>1&&this.activeScope.push(t),t}}exports.BackendEngine=s;
},{"../../util":24,"../ndarray":17}],27:[function(require,module,exports) {
"use strict";function t(t,e){const r=t.length,n=[];for(let o=0;o<r;o++){const s=r-1-o,a=t[s]||1;(e[e.length-1-o]||1)>1&&1===a&&n.unshift(s)}return n}function e(t){for(let e=0;e<t.length;e++)if(t[e]!==e)return!1;return!0}function r(t,e){const r=[],n="Operands could not be broadcast together with shapes "+`${t} and ${e}.`,o=Math.max(t.length,e.length);for(let s=0;s<o;s++){const o=t[t.length-s-1]||1,a=e[e.length-s-1]||1;if(o>1&&a>1&&o!==a)throw Error(n);r.unshift(Math.max(o,a))}return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBroadcastDims=t,exports.broadcastDimsAreOuter=e,exports.assertAndGetBroadcastShape=r;
},{}],29:[function(require,module,exports) {
"use strict";function e(e,t,s){const r=e.length,a=t.length;n.assert(e.length===t.length,`Error in concat${r}D: rank of x1 (${r}) and x2 (${a}) `+"must be the same."),n.assert(s>=0&&s<r,`Error in concat${r}D: axis must be `+`between 0 and ${r-1}.`);for(let a=0;a<r;a++)n.assert(a===s||e[a]===t[a],`Error in concat${r}D: Shape (${e}) does not match `+`(${t}) along the non-concatenated axis ${a}.`)}function t(e,t,s){n.assert(e.length===t.length,"x1 and x2 should have the same rank.");const r=e.slice();return r[s]+=t[s],r}Object.defineProperty(exports,"__esModule",{value:!0});const n=require("../util");exports.assertParams=e,exports.computeOutShape=t;
},{"../util":24}],30:[function(require,module,exports) {
"use strict";function t(t,n,o,r,a="channelsLast"){const[s,h]=i(n);let u;if("channelsLast"===a)u=[s,h,t[3],t[3]];else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);u=[s,h,t[1],t[1]]}return e(t,u,o,r,!1,a)}function e(t,e,n,o,r=!1,a="channelsLast"){let[h,u,l,c]=[-1,-1,-1,-1];if("channelsLast"===a)[h,u,l,c]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[h,c,u,l]=t}const[p,f,,d]=e,[m,g]=i(n),{padInfo:b,outHeight:w,outWidth:M}=s(o,u,l,m,g,p,f),x=r?d*c:d;let I;return"channelsFirst"===a?I=[h,x,w,M]:"channelsLast"===a&&(I=[h,w,M,x]),{batchSize:h,inHeight:u,inWidth:l,inChannels:c,outHeight:w,outWidth:M,outChannels:x,dataFormat:a,strideHeight:m,strideWidth:g,filterHeight:p,filterWidth:f,padInfo:b,inShape:t,outShape:I,filterShape:e}}function n(t,e,n,r,a){null==a&&(a=o(t,e,r));const i=t[0],s=t[1],u=(i-e+2*a)/r+1;h.assert(h.isInt(u),`The output # of rows (${u}) must be an integer. Change the `+"stride and/or zero pad parameters");const l=(s-e+2*a)/r+1;return h.assert(h.isInt(l),`The output # of columns (${l}) must be an integer. Change `+"the stride and/or zero pad parameters"),[u,l,n]}function o(t,e,n){return Math.floor((t[0]*(n-1)-n+e)/2)}function r(t,e,n,o){return[n,o,t,e]}function a(t,e){return[(t[0]-1)*e+1,(t[1]-1)*e+1]}function i(t){return"number"==typeof t?[t,t]:t}function s(t,e,o,r,a,i,s){let h,u,l;if("number"==typeof t){h={top:t,bottom:t,left:t,right:t};const a=n([e,o,1],i,1,r,t);u=a[0],l=a[1]}else if("same"===t){const t=((u=Math.ceil(e/r))-1)*r+i-e,n=((l=Math.ceil(o/a))-1)*a+s-o,c=Math.floor(t/2),p=t-c,f=Math.floor(n/2);h={top:c,bottom:p,left:f,right:n-f}}else{if("valid"!==t)throw Error(`Unknown padding parameter: ${t}`);h={top:0,bottom:0,left:0,right:0},u=Math.ceil((e-i+1)/r),l=Math.ceil((o-s+1)/a)}return{padInfo:h,outHeight:u,outWidth:l}}Object.defineProperty(exports,"__esModule",{value:!0});const h=require("../util");exports.computePool2DInfo=t,exports.computeConv2DInfo=e,exports.computeOutputShape3D=n,exports.computeDefaultPad=o,exports.computeWeightsShape4D=r,exports.computeDilatedRC=a;
},{"../util":24}],31:[function(require,module,exports) {
"use strict";function r(r,a,t){e.assert(r.rank===a.length,`Error in slice${r.rank}D: Length of begin ${a} must `+`match the rank of the array (${r.rank}).`),e.assert(r.rank===t.length,`Error in slice${r.rank}D: Length of size ${t} must `+`match the rank of the array (${r.rank}).`);for(let s=0;s<r.rank;++s)e.assert(a[s]+t[s]<=r.shape[s],`Error in slice${r.rank}D: begin[${s}] + size[${s}] `+`(${a[s]+t[s]}) would overflow input.shape[${s}] (${r.shape[s]})`)}Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../util");exports.assertParamsValid=r;
},{"../util":24}],19:[function(require,module,exports) {
"use strict";function t(t,o){return r[t][o]}Object.defineProperty(exports,"__esModule",{value:!0});var o;!function(t){t[t.REGULAR=0]="REGULAR",t[t.TRANSPOSED=1]="TRANSPOSED"}(o=exports.MatrixOrientation||(exports.MatrixOrientation={}));var a;!function(t){t.float32="float32",t.int32="int32",t.bool="int32"}(a=exports.SumTypesMap||(exports.SumTypesMap={}));var n;!function(t){t.bool="bool",t.float32="float32",t.int32="int32"}(n=exports.UpcastBoolAndMap||(exports.UpcastBoolAndMap={}));var p;!function(t){t.bool="float32",t.float32="float32",t.int32="float32"}(p=exports.UpcastFloat32AndMap||(exports.UpcastFloat32AndMap={}));var e;!function(t){t.bool="int32",t.float32="float32",t.int32="int32"}(e=exports.UpcastInt32AndMap||(exports.UpcastInt32AndMap={}));const r={bool:n,float32:p,int32:e};exports.upcastType=t;
},{}],18:[function(require,module,exports) {
"use strict";function r(r){return"number"==typeof r?[r,r]:r}Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../environment"),e=require("../util"),a=require("./axis_util"),s=require("./backends/backend_engine"),n=require("./broadcast_util"),i=require("./concat_util"),o=require("./conv_util"),h=require("./ndarray"),u=require("./slice_util"),p=require("./types");class c{constructor(r){this.registeredArrays=new WeakMap,this.registeredArrayCount=0,this.customBackend=!1,"string"==typeof r?this.backend=t.ENV.getBackend(r):(this.customBackend=!0,this.backend=r),this.backendEngine=new s.BackendEngine}time(r){return this.backend.time(r)}getNumArrays(){return this.registeredArrayCount}register(r){const t=this.registeredArrays.has(r.dataId)?this.registeredArrays.get(r.dataId):0;0===t&&(this.backend.register(r.dataId,r.shape,r.dtype),this.registeredArrayCount++),this.registeredArrays.set(r.dataId,t+1),this.backendEngine.track(r)}writePixels(r,t,e){this.backend.writePixels(r,t,e)}write(r,t){this.backend.write(r,t)}readSync(r){return this.backend.readSync(r)}read(r){return this.backend.read(r)}scope(r){return this.backendEngine.scope("scope",r)}startScope(){this.backendEngine.startScope()}endScope(r){this.backendEngine.endScope(r)}dispose(){this.customBackend&&this.backend.dispose()}matMul(r,t,a=p.MatrixOrientation.REGULAR,s=p.MatrixOrientation.REGULAR){const n=a===p.MatrixOrientation.REGULAR?r.shape[1]:r.shape[0],i=s===p.MatrixOrientation.REGULAR?t.shape[0]:t.shape[1];return e.assert(2===r.rank&&2===t.rank,`Error in matMul: inputs must be rank 2, got ranks ${r.rank}`+` and ${t.rank}.`),e.assert(n===i,`Error in matMul: inner shapes (${n}) and (`+`${i}) of NDArrays with shapes ${r.shape} and `+`${t.shape} and orientations ${p.MatrixOrientation[a]}`+` and ${p.MatrixOrientation[s]} must match.`),this.backend.matMul(r,t,a,s)}executeOp(r,t){return t()}vectorTimesMatrix(r,t){return e.assert(1===r.rank,"Error in vectorTimesMatrix: first input must be rank 1, but got "+`rank ${r.rank}.`),e.assert(2===t.rank,"Error in vectorTimesMatrix: second input must be rank 2, but got "+`rank ${t.rank}.`),e.assert(r.size===t.shape[0],`Error in vectorTimesMatrix: size of vector (${r.size}) `+`must match first dimension of matrix (${t.shape[0]})`),this.matMul(r.as2D(1,-1),t).as1D()}matrixTimesVector(r,t){return e.assert(1===t.rank,"Error in matrixTimesVector: second input must rank 1, but got "+`rank ${t.rank}.`),e.assert(2===r.rank,"Error in matrixTimesVector: first input must be a rank 2, but got "+`rank ${r.rank}.`),e.assert(t.size===r.shape[1],`Error in matrixTimesVector: size of first rank 1 input ${t.size} `+"must match inner dimension of second rank 2 input, but got "+`shape ${r.shape}.`),this.matMul(r,t.as2D(-1,1)).as1D()}dotProduct(r,t){return e.assert(1===r.rank&&1===t.rank,"Error in dotProduct: inputs must be rank 1, but got ranks "+`${r.rank} and ${t.rank}.`),e.assert(r.size===t.size,`Error in dotProduct: size of inputs (${r.size}) and (`+`${t.size}) must match.`),this.matMul(r.as2D(1,-1),t.as2D(-1,1)).asScalar()}outerProduct(r,t){return e.assert(1===r.rank&&1===t.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+`${r.rank} and ${t.rank}.`),this.matMul(r.as2D(-1,1),t.as2D(1,-1))}clone(r){return this.backend.clone(r)}reshape(r,t){return t=e.inferFromImplicitShape(t,r.size),e.assert(r.size===e.sizeFromShape(t),"new shape and old shape must have the same number of elements."),h.NDArray.make(t,{dataId:r.dataId},r.dtype)}cast(r,t){if(!e.hasEncodingLoss(r.dtype,t))return h.NDArray.make(r.shape,{dataId:r.dataId},t);if("int32"===t)return this.backend.int(r);if("bool"===t)return this.backend.notEqual(r,h.Scalar.new(0,r.dtype));throw new Error(`Error in Cast: unknown dtype argument (${t})`)}slice1D(r,t,e){return u.assertParamsValid(r,[t],[e]),this.backend.slice1D(r,t,e)}slice2D(r,t,e){return u.assertParamsValid(r,t,e),this.backend.slice2D(r,t,e)}slice3D(r,t,e){return u.assertParamsValid(r,t,e),this.backend.slice3D(r,t,e)}slice4D(r,t,e){return u.assertParamsValid(r,t,e),this.backend.slice4D(r,t,e)}concat1D(r,t){return i.assertParams(r.shape,t.shape,0),this.backend.concat1D(r,t)}concat2D(r,t,e){return i.assertParams(r.shape,t.shape,e),this.backend.concat2D(r,t,e)}concat3D(r,t,e){return i.assertParams(r.shape,t.shape,e),this.backend.concat3D(r,t,e)}concat4D(r,t,e){return i.assertParams(r.shape,t.shape,e),this.backend.concat4D(r,t,e)}logSumExp(r,t=null,e=!1){const s=a.parseAxisParam(t,r.shape);return this.executeOp("logSumExp",()=>{const t=this.max(r,s,!0),n=this.subtract(r,t),i=this.exp(n),o=this.sum(i,s),h=this.log(o),u=this.add(t.reshape(h.shape),h);if(e){const r=a.expandShapeToKeepDim(u.shape,s);return u.reshape(r)}return u})}sum(r,t=null,e=!1){const s=a.parseAxisParam(t,r.shape);let n=s;const i=a.getPermutedAxes(n,r.rank);return this.executeOp("sum",()=>{null!=i&&(r=this.transpose(r,i),n=a.getInnerMostAxes(n.length,r.rank));const t=this.backend.sum(r,n);if(e){const r=a.expandShapeToKeepDim(t.shape,s);return t.reshape(r)}return t})}mean(r,t=null,s=!1){const n=a.parseAxisParam(t,r.shape),i=a.computeOutAndReduceShapes(r.shape,n)[1],o=e.sizeFromShape(i);return this.executeOp("mean",()=>this.scope(()=>{const e=this.divide(r,h.Scalar.new(o));return this.sum(e,t,s)}))}argMin(r,t=null){let e=a.parseAxisParam(t,r.shape);const s=a.getPermutedAxes(e,r.rank);return this.executeOp("argMin",()=>(null!=s&&(r=this.transpose(r,s),e=a.getInnerMostAxes(e.length,r.rank)),this.backend.argMin(r,e)))}argMax(r,t=null){let e=a.parseAxisParam(t,r.shape);const s=a.getPermutedAxes(e,r.rank);return this.executeOp("argMax",()=>(null!=s&&(r=this.transpose(r,s),e=a.getInnerMostAxes(e.length,r.rank)),this.backend.argMax(r,e)))}argMaxEquals(r,t){return e.assertShapesMatch(r.shape,t.shape,"Error in argMaxEquals: "),this.executeOp("argMaxEquals",()=>this.scope(()=>this.equal(this.argMax(r),this.argMax(t))))}equal(r,t){return e.assertTypesMatch(r,t),n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.equal(r,t)}equalStrict(r,t){return e.assertShapesMatch(r.shape,t.shape,"Error in equalStrict: "),this.equal(r,t)}notEqual(r,t){return e.assertTypesMatch(r,t),n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.notEqual(r,t)}notEqualStrict(r,t){return e.assertShapesMatch(r.shape,t.shape,"Error in notEqualStrict: "),this.notEqual(r,t)}greater(r,t){return this.backend.greater(r,t)}greaterEqual(r,t){return this.backend.greaterEqual(r,t)}less(r,t){return this.backend.less(r,t)}lessEqual(r,t){return this.backend.lessEqual(r,t)}select(r,t,e){return this.backend.select(r,t,e)}topK(r,t){e.assert(t<=r.size,`Error in topK: k value (${t}) must be less than size of input `+`ndarray, got shape ${r.shape}.`);let a,s;this.executeOp("topK",()=>(a=this.backend.topKValues(r,t),s=this.backend.topKIndices(r,t),a));return{values:a,indices:s}}min(r,t=null,e=!1){const s=a.parseAxisParam(t,r.shape);let n=s;const i=a.getPermutedAxes(n,r.rank);return this.executeOp("min",()=>{null!=i&&(r=this.transpose(r,i),n=a.getInnerMostAxes(n.length,r.rank));const t=this.backend.min(r,n);if(e){const r=a.expandShapeToKeepDim(t.shape,s);return t.reshape(r)}return t})}minimum(r,t){return e.assertTypesMatch(r,t),n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.minimum(r,t)}max(r,t=null,e=!1){const s=a.parseAxisParam(t,r.shape);let n=s;const i=a.getPermutedAxes(n,r.rank);return this.executeOp("max",()=>{null!=i&&(r=this.transpose(r,i),n=a.getInnerMostAxes(n.length,r.rank));const t=this.backend.max(r,n);if(e){const r=a.expandShapeToKeepDim(t.shape,s);return t.reshape(r)}return t})}maximum(r,t){return e.assertTypesMatch(r,t),n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.maximum(r,t)}softmax(r,t=-1){if(-1===t&&(t=r.rank-1),t!==r.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${r.rank} and dim was ${t}`);return this.executeOp("softmax",()=>{const e=this.logSumExp(r,[t],!0),a=this.subtract(r,e);return this.exp(a)})}softmaxCrossEntropyWithLogits(r,t,a=-1){if(e.assertShapesMatch(r.shape,t.shape,"Error in softmaxCrossEntropyWithLogits: "),-1===a&&(a=t.rank-1),a!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${t.rank} `+`and dim was ${a}`);return this.executeOp("softmaxCrossEntropyWithLogits",()=>{const e=this.softmax(t,a),s=this.add(h.Scalar.new(1e-5),e),n=this.log(s),i=this.multiply(r,n),o=this.neg(i);return this.sum(o,[a])})}switchDim(r,t){return this.transpose(r,t)}tile(r,t){return e.assert(r.rank===t.length,`Error in transpose: rank of input ${r.rank} `+`must match length of reps ${t}.`),this.backend.tile(r,t)}transpose(r,t){return null==t&&(t=r.shape.map((r,t)=>t).reverse()),e.assert(r.rank===t.length,`Error in transpose: rank of input ${r.rank} `+`must match length of perm ${t}.`),this.backend.transpose(r,t)}scalarPlusArray(r,t){return e.assert(1===r.size,"Error in scalarPlusArray: first argument must be rank 0, but got "+`rank ${r.rank}.`),this.add(r,t)}scalarMinusArray(r,t){return e.assert(1===r.size,"Error in scalarMinusArray: first argument must be rank 0, but got "+`rank ${r.rank}.`),this.subtract(r,t)}arrayMinusScalar(r,t){return e.assert(1===t.size,"Error in arrayMinusScalar: second argument must be rank 0, but "+`got rank ${t.rank}.`),this.subtract(r,t)}neg(r){return this.backend.neg(r)}add(r,t){return e.assertTypesMatch(r,t),n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.add(r,t)}addStrict(r,t){return e.assertShapesMatch(r.shape,t.shape,"Error in addStrict: "),this.add(r,t)}subtract(r,t){return e.assertTypesMatch(r,t),n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.subtract(r,t)}pow(r,t){return e.assert("int32"===t.dtype,"only supports int32 data type for the exponent parameter."),n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.pow(r,t)}powStrict(r,t){return e.assertShapesMatch(r.shape,t.shape,"Error in powStrict: "),this.pow(r,t)}sub(r,t){return this.subtract(r,t)}subStrict(r,t){return e.assertShapesMatch(r.shape,t.shape,"Error in subStrict: "),this.subtract(r,t)}multiply(r,t){return e.assertTypesMatch(r,t),n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.multiply(r,t)}elementWiseMul(r,t){return this.multiplyStrict(r,t)}multiplyStrict(r,t){return e.assertShapesMatch(r.shape,t.shape,"Error in multiplyStrict: "),this.multiply(r,t)}divide(r,t){return n.assertAndGetBroadcastShape(r.shape,t.shape),this.backend.divide(r,t)}divideStrict(r,t){return e.assertShapesMatch(r.shape,t.shape,"Error in divideStrict: "),this.divide(r,t)}scalarDividedByArray(r,t){return e.assert(1===r.size,"Error in scalarDividedByArray: first argument must be rank 0, but "+`got NDArray of rank ${r.rank}.`),this.divide(r,t)}arrayDividedByScalar(r,t){return e.assert(1===t.size,"Error in arrayDividedByScalar: second argument must be rank 0, "+`but got NDArray of rank ${t.rank}.`),this.divide(r,t)}ceil(r){return this.backend.ceil(r)}floor(r){return this.backend.floor(r)}exp(r){return this.backend.exp(r)}log(r){return this.backend.log(r)}sqrt(r){return this.backend.sqrt(r)}square(r){return this.backend.square(r)}abs(r){return this.backend.abs(r)}clip(r,t,a){return e.assert(t<=a,`Error in clip: min (${t}) must be`+`less than or equal to max (${a}).`),this.backend.clip(r,t,a)}relu(r){return this.backend.relu(r)}elu(r){return this.backend.elu(r)}eluDer(r){return this.backend.eluDer(r)}selu(r){return this.backend.selu(r)}leakyRelu(r,t=.2){return this.backend.leakyRelu(r,t)}prelu(r,t){return this.backend.prelu(r,t)}preluDer(r,t){return this.backend.preluDer(r,t)}sigmoid(r){return this.backend.sigmoid(r)}sin(r){return this.backend.sin(r)}cos(r){return this.backend.cos(r)}tan(r){return this.backend.tan(r)}asin(r){return this.backend.asin(r)}acos(r){return this.backend.acos(r)}atan(r){return this.backend.atan(r)}sinh(r){return this.backend.sinh(r)}cosh(r){return this.backend.cosh(r)}tanh(r){return this.backend.tanh(r)}step(r,t=0){return this.backend.step(r,t)}scaledArrayAdd(r,t,a,s){return e.assert(1===r.size,"Error in scaledArrayAdd: first argument must rank 0, but got "+` rank ${r.rank}.`),e.assert(1===a.size,"Error in scaledArrayAdd: third argument must be rank 0, but got "+`NDArray of rank ${a.rank}.`),e.assertShapesMatch(t.shape,s.shape,"Error in scaledArrayAdd: "),this.executeOp("scaledArrayAdd",()=>this.scope(()=>this.add(this.multiply(r,t),this.multiply(a,s))))}scalarTimesArray(r,t){return e.assert(1===r.size,"Error in arrayDividedByScalar: first argument must be rank 0, but "+`got rank ${r.rank}.`),this.multiply(r,t)}elementWiseMulBroadcast(r,t){return e.assert(2===r.rank,"Error in elementWiseMulBroadcast: first argument must be "+`rank 2, but got rank ${r.rank}.`),e.assert(2===t.rank,"Error in elementWiseMulBroadcast: second argument must be "+`rank 2, but got rank ${t.rank}.`),this.multiply(r,t)}conv1d(r,t,a,s,n){let i=r,o=!1;2===r.rank&&(o=!0,i=r.as3D(1,r.shape[0],r.shape[1])),e.assert(3===i.rank,`Error in conv1d: input must be rank 3, but got rank ${i.rank}.`),e.assert(3===t.rank,"Error in conv1d: filter must be rank 3, but got rank "+`${t.rank}.`),null!=a&&e.assert(1===a.rank,"Error in conv1d: bias must be rank 1, but got rank "+`${a.rank}.`),e.assert(i.shape[2]===t.shape[1],`Error in conv1d: depth of input (${i.shape[2]}) must match  `+`input depth for filter ${t.shape[1]}.`);const h=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),u=i.as4D(i.shape[0],1,i.shape[1],i.shape[2]),p=[1,s];return this.executeOp("Conv1D",()=>{const r=this.conv2d(u,h,a,p,n);return o?r.as2D(r.shape[2],r.shape[3]):r.as3D(r.shape[0],r.shape[2],r.shape[3])})}conv2d(r,t,a,s,n){let i=r,h=!1;3===r.rank&&(h=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2])),e.assert(4===i.rank,`Error in conv2d: input must be rank 4, but got rank ${i.rank}.`),e.assert(4===t.rank,"Error in conv2d: filter must be rank 4, but got rank "+`${t.rank}.`),null!=a&&e.assert(1===a.rank,"Error in conv2d: bias must be rank 1, but got rank "+`${a.rank}.`),e.assert(i.shape[3]===t.shape[2],`Error in conv2d: depth of input (${i.shape[3]}) must match  `+`input depth for filter ${t.shape[2]}.`);const u=o.computeConv2DInfo(i.shape,t.shape,s,n);return this.executeOp("Conv2D",()=>{const r=this.backend.conv2d(i,t,a,u);return h?r.as3D(r.shape[1],r.shape[2],r.shape[3]):r})}conv2dDerInput(r,t,a,s,n){e.assert(r.length===t.rank,"Length of inShape "+`(${r.length}) and rank of dy (${t.rank}) must match`);let i=r,h=t,u=!1;3===t.rank&&(u=!0,h=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),i=[1,r[0],r[1],r[2]]);const p=i[3],c=h.shape[3];e.assert(4===i.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+`${i.length}.`),e.assert(4===h.rank,"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${h.rank}`),e.assert(4===a.rank,"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${a.rank}`),e.assert(p===a.shape[2],`Error in conv2dDerInput: depth of input (${p}) must `+`match input depth for filter ${a.shape[2]}.`),e.assert(c===a.shape[3],`Error in conv2dDerInput: depth of output (${c}) must`+`match output depth for filter ${a.shape[3]}.`);const k=o.computeConv2DInfo(i,a.shape,s,n);return this.executeOp("conv2dDerInput",()=>{const r=this.backend.conv2dDerInput(h,a,k);return u?r.as3D(r.shape[1],r.shape[2],r.shape[3]):r})}conv2dDerBias(r){let t=r;return 3===r.rank&&(t=r.as4D(1,r.shape[0],r.shape[1],r.shape[2])),this.backend.conv2dDerBias(t)}conv2dDerFilter(r,t,a,s,n){let i=r;3===r.rank&&(i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));let h=t;3===h.rank&&(h=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),e.assert(4===i.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${i.shape}.`),e.assert(4===h.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${h.shape}.`),e.assert(4===a.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${a}.`),e.assert(i.shape[3]===a[2],`Error in conv2dDerFilter: depth of input ${i.shape[3]}) must `+`match input depth in filter (${a[2]}.`),e.assert(h.shape[3]===a[3],`Error in conv2dDerFilter: depth of dy (${h.shape[3]}) must `+`match output depth for filter (${a[3]}).`);const u=o.computeConv2DInfo(i.shape,a,s,n);return this.backend.conv2dDerFilter(i,h,u)}conv2dTranspose(r,t,e,a,s){return this.conv2dDerInput(e,r,t,a,s)}depthwiseConv2D(t,a,s,n,i=[1,1]){let h=t,u=!1;3===t.rank&&(u=!0,h=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),e.assert(4===h.rank,"Error in depthwiseConv2D: input must be rank 4, but got "+`rank ${h.rank}.`),e.assert(4===a.rank,"Error in depthwiseConv2D: filter must be rank 4, but got rank "+`${a.rank}.`),e.assert(h.shape[3]===a.shape[2],"Error in depthwiseConv2D: number of input channels "+`(${h.shape[3]}) must match the inChannels dimension in `+`filter ${a.shape[2]}.`),i=i||[1,1];const[p,c]=r(i);e.assert(1===p&&1===c,"Error in depthwiseConv2D: rates greater than 1 are not yet "+`supported. Got rates '${i}'`);const k=o.computeConv2DInfo(h.shape,a.shape,s,n,!0);return this.executeOp("depthwiseConv2D",()=>{const r=this.backend.depthwiseConv2D(h,a,k);return u?r.as3D(r.shape[1],r.shape[2],r.shape[3]):r})}maxPool(r,t,a,s){let n=r,i=!1;3===r.rank&&(i=!0,n=r.as4D(1,r.shape[0],r.shape[1],r.shape[2])),e.assert(4===n.rank,`Error in maxPool: input must be rank 4 but got rank ${n.rank}.`);const h=o.computePool2DInfo(n.shape,t,a,s);return this.executeOp("maxPool",()=>{const r=this.backend.maxPool(n,h);return i?r.as3D(r.shape[1],r.shape[2],r.shape[3]):r})}maxPoolBackprop(r,t,a,s,n){e.assert(t.rank===r.rank,`Rank of input (${t.rank}) does not match rank of dy (${r.rank})`);let i=t,h=r,u=!1;3===t.rank&&(u=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),h=r.as4D(1,r.shape[0],r.shape[1],r.shape[2])),e.assert(4===h.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+`${h.rank}.`),e.assert(4===i.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+`${i.rank}.`);const p=o.computePool2DInfo(i.shape,a,s,n);return this.executeOp("maxPoolBackprop",()=>{const r=this.backend.maxPoolBackprop(h,i,p);return u?r.as3D(r.shape[1],r.shape[2],r.shape[3]):r})}minPool(r,t,a,s){let n=r,i=!1;3===r.rank&&(i=!0,n=r.as4D(1,r.shape[0],r.shape[1],r.shape[2])),e.assert(4===n.rank,`Error in minPool: x must be rank 4 but got rank ${n.rank}.`);const h=o.computePool2DInfo(n.shape,t,a,s);return this.executeOp("minPool",()=>{const r=this.backend.minPool(n,h);return i?r.as3D(r.shape[1],r.shape[2],r.shape[3]):r})}avgPool(r,t,a,s){let n=r,i=!1;3===r.rank&&(i=!0,n=r.as4D(1,r.shape[0],r.shape[1],r.shape[2])),e.assert(4===n.rank,`Error in avgPool: x must be rank 4 but got rank ${n.rank}.`);const h=o.computePool2DInfo(n.shape,t,a,s);return this.executeOp("avgPool",()=>{const r=this.backend.avgPool(n,h);return i?r.as3D(r.shape[1],r.shape[2],r.shape[3]):r})}resizeBilinear3D(r,t,a=!1){return e.assert(3===r.rank,`Error in resizeBilinear3D: x must be rank 3 but got rank ${r.rank}.`),e.assert(2===t.length,"Error in resizeBilinear3D: new shape must 2D, but got shape "+`${t}.`),this.backend.resizeBilinear3D(r,t,a)}batchNormalization2D(r,t,a,s=.001,n,i){return e.assert(2===r.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+`${r.rank}.`),e.assert(2===t.rank||1===t.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but "+`got rank ${t.rank}.`),e.assert(2===a.rank||1===a.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 "+`but got rank ${a.rank}.`),null!=n&&e.assert(2===n.rank||1===n.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 "+`but got rank ${n.rank}.`),null!=i&&e.assert(2===i.rank||1===i.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 "+`but got rank ${i.rank}.`),this.backend.batchNormalization2D(r,t,a,s,n,i)}batchNormalization3D(r,t,a,s=.001,n,i){return e.assert(3===r.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+`${r.rank}.`),e.assert(3===t.rank||1===t.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but "+`got rank ${t.rank}.`),e.assert(3===a.rank||1===a.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 "+`but got rank ${a.rank}.`),null!=n&&e.assert(3===n.rank||1===n.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 "+`but got rank ${n.rank}.`),null!=i&&e.assert(3===i.rank||1===i.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 "+`but got rank ${i.rank}.`),this.backend.batchNormalization3D(r,t,a,s,n,i)}batchNormalization4D(r,t,a,s=.001,n,i){return e.assert(4===r.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+`${r.rank}.`),e.assert(4===t.rank||1===t.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but "+`got rank ${t.rank}.`),e.assert(4===a.rank||1===a.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 "+`but got rank ${a.rank}.`),null!=n&&e.assert(4===n.rank||1===n.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 "+`but got rank ${n.rank}.`),null!=i&&e.assert(4===i.rank||1===i.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 "+`but got rank ${i.rank}.`),this.backend.batchNormalization4D(r,t,a,s,n,i)}multiRNNCell(r,t,e,a){const s=this.scope(()=>{let s=t;const n=[];for(let t=0;t<r.length;t++){const i=r[t](s,e[t],a[t]);n.push(i[0]),n.push(i[1]),s=i[1]}return n}),n=[],i=[];for(let r=0;r<s.length;r+=2)n.push(s[r]),i.push(s[r+1]);return[n,i]}basicLSTMCell(r,t,e,a,s,n){const i=this.scope(()=>{const i=this.concat2D(a,n,1),o=this.matMul(i,t),h=this.add(o,e),u=h.shape[0],p=h.shape[1]/4,c=[u,p],k=this.slice2D(h,[0,0],c),l=this.slice2D(h,[0,p],c),d=this.slice2D(h,[0,2*p],c),m=this.slice2D(h,[0,3*p],c),b=this.addStrict(this.multiplyStrict(s,this.sigmoid(this.scalarPlusArray(r,d))),this.multiplyStrict(this.sigmoid(k),this.tanh(l)));return[b,this.multiplyStrict(this.tanh(b),this.sigmoid(m))]});return[i[0],i[1]]}multinomial(r,t,e){const a=r.size;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${a}.`);if(r.rank>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${r.rank}`);e=e||Math.random();const s=r.rank;return 1===r.rank&&(r=r.as2D(1,-1)),this.executeOp("multinomial",()=>{const a=this.backend.multinomial(r,t,e);return 1===s?a.as1D():a})}oneHot(r,t,e=1,a=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);return this.backend.oneHot(r,t,e,a)}moments(r,t=null,e=!1){const s=a.parseAxisParam(t,r.shape);return this.scope(()=>{const t=this.mean(r,s,e);let n=t.shape;e||(n=a.expandShapeToKeepDim(t.shape,s));const i=this.square(this.subtract(r.asType("float32"),t.reshape(n)));return{mean:t,variance:this.mean(i,s,e)}})}norm(r,t="euclidean",e=null,s=!1){return this.scope(()=>{const n=this.normInternal(r,t,e);let i=n.shape;if(s){const t=a.parseAxisParam(e,r.shape);i=a.expandShapeToKeepDim(n.shape,t)}return n.reshape(i)})}setDiag(r,t){return this.backend.setDiag(r,t)}normInternal(r,t,e=null){if(0===r.rank)return this.abs(r);if(1!==r.rank&&null===e)return this.normInternal(r.reshape([-1]),t,e);if(1===r.rank||"number"==typeof e||e instanceof Array&&1===e.length){if(1===t)return this.sum(this.abs(r),e);if(t===1/0)return this.max(this.abs(r),e);if(t===-1/0)return this.min(this.abs(r),e);if("euclidean"===t||2===t)return this.sqrt(this.sum(this.pow(this.abs(r),h.Scalar.new(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(e instanceof Array&&2===e.length){if(1===t)return this.max(this.sum(this.abs(r),e[0]),e[1]-1);if(t===1/0)return this.max(this.sum(this.abs(r),e[1]),e[0]);if(t===-1/0)return this.min(this.sum(this.abs(r),e[1]),e[0]);if("fro"===t||"euclidean"===t)return this.sqrt(this.sum(this.pow(r,h.Scalar.new(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}disposeData(r){if(!this.registeredArrays.has(r))return;const t=this.registeredArrays.get(r);t<=1?(this.registeredArrays.delete(r),this.backend.disposeData(r),this.registeredArrayCount--):this.registeredArrays.set(r,t-1)}}exports.NDArrayMath=c;
},{"../environment":15,"../util":24,"./axis_util":28,"./backends/backend_engine":32,"./broadcast_util":27,"./concat_util":29,"./conv_util":30,"./ndarray":17,"./slice_util":31,"./types":19}],15:[function(require,module,exports) {
var global = (1,eval)("this");
function e(e){if(0===e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=document.createElement("canvas");return 1===e?t.getContext("webgl")||t.getContext("experimental-webgl"):t.getContext("webgl2")}function t(e){if(null!=e){const t=e.getExtension("WEBGL_lose_context");if(null==t)throw new Error("Extension WEBGL_lose_context not supported on this browser.");t.loseContext()}}function n(n){const r=e(n);return null!=r&&(t(r),!0)}function r(n){const r=e(n),s=1===n?"EXT_disjoint_timer_query":"EXT_disjoint_timer_query_webgl2",i=null!=r.getExtension(s);return null!=r&&t(r),i}function s(n){if(0===n)return!1;const r=e(n);if(1===n){if(null==r.getExtension("OES_texture_float"))return!1}else if(null==r.getExtension("EXT_color_buffer_float"))return!1;const s=r.createFramebuffer(),i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);const o=2===n?r.RGBA32F:r.RGBA;r.texImage2D(r.TEXTURE_2D,0,o,1,1,0,r.RGBA,r.FLOAT,null),r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);const a=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;r.readPixels(0,0,1,1,r.RGBA,r.FLOAT,new Float32Array(4));const E=r.getError()===r.NO_ERROR;return t(r),a&&E}function i(n){if(2!==n)return!1;const r=e(n),s=null!=r.getExtension("WEBGL_get_buffer_sub_data_async");return t(r),s}function o(){const e={};if("undefined"==typeof window)return e;const t=c.getQueryParams(window.location.search);if(h in t){const n={};t[h].split(",").forEach(e=>{const[t,r]=e.split(":");n[t]=r}),exports.URL_PROPERTIES.forEach(t=>{t.name in n&&(console.log(`Setting feature override from URL ${t.name}: `+`${n[t.name]}`),t.type===f.NUMBER?e[t.name]=+n[t.name]:t.type===f.BOOLEAN?e[t.name]="true"===n[t.name]:console.warn(`Unknown URL param: ${t.name}.`))})}return e}function a(){let e;if("undefined"!=typeof window)e=window;else{if(void 0===u)throw new Error("Could not find a global object");e=u}return e}function E(){const e=a();return e.ENV=e.ENV||new _(o()),e.ENV}var u=(0,eval)("this");Object.defineProperty(exports,"__esModule",{value:!0});const l=require("./math/math"),c=require("./util");var f;!function(e){e[e.NUMBER=0]="NUMBER",e[e.BOOLEAN=1]="BOOLEAN"}(f=exports.Type||(exports.Type={})),exports.URL_PROPERTIES=[{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED",type:f.BOOLEAN},{name:"WEBGL_VERSION",type:f.NUMBER},{name:"WEBGL_FLOAT_TEXTURE_ENABLED",type:f.BOOLEAN},{name:"WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED",type:f.BOOLEAN}];class _{constructor(e){this.features={},this.globalMath=null,this.backendRegistry={},this.prevBackendRegistry=this.backendRegistry,null!=e&&(this.features=e)}get(e){return e in this.features?this.features[e]:(this.features[e]=this.evaluateFeature(e),this.features[e])}getBestBackend(){const e=["webgl","cpu"];for(let t=0;t<e.length;++t){const n=e[t];if(n in this.backendRegistry)return this.backendRegistry[n]}throw new Error("No backend found in registry.")}evaluateFeature(e){if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED"===e){const e=this.get("WEBGL_VERSION");return 0!==e&&r(e)}if("WEBGL_VERSION"===e)return n(2)?2:n(1)?1:0;if("WEBGL_FLOAT_TEXTURE_ENABLED"===e)return s(this.get("WEBGL_VERSION"));if("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED"===e)return i(this.get("WEBGL_VERSION"));throw new Error(`Unknown feature ${e}.`)}setFeatures(e){this.empty(),this.features=e}reset(){this.globalMath=null,this.backendRegistry=this.prevBackendRegistry,this.features=o()}setMath(e){this.globalMath=e}getBackend(e){return this.backendRegistry[e]}registerBackend(e,t){if(e in this.backendRegistry)throw new Error(`${e} backend was already registered`);try{const n=t();return this.backendRegistry[e]=n,!0}catch(e){return!1}}get math(){if(null==this.globalMath){const e=this.getBestBackend();this.globalMath=new l.NDArrayMath(e)}return this.globalMath}empty(){this.globalMath=null,this.prevBackendRegistry=this.backendRegistry,this.backendRegistry={},this.features=null}}exports.Environment=_;const h="dljsflags";exports.ENV=E();
},{"./math/math":18,"./util":24}],20:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("seedrandom"),e=require("../../environment"),a=require("../../util"),r=require("../broadcast_util"),n=require("../concat_util"),o=require("../ndarray"),s=require("../types"),l=require("../types"),i=require("./../axis_util");class h{constructor(){this.data=new WeakMap,"undefined"!=typeof document&&(this.canvas=document.createElement("canvas"))}register(t,e,a){this.data.set(t,null)}write(t,e){if(null==e)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(t),this.data.set(t,e)}writePixels(t,e,a){if(null==e)throw new Error("MathBackendCPU.writePixels(): pixels can not be null");this.throwIfNoData(t);let r;if(e instanceof ImageData)r=e.data;else if(e instanceof HTMLCanvasElement)r=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error(`pixels is of unknown type: ${e.constructor.name}`);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.getContext("2d").drawImage(e,0,0,e.width,e.height),r=this.canvas.getContext("2d").getImageData(0,0,e.width,e.height).data}let n;if(4===a)n=new Int32Array(r);else{const t=e.width*e.height;n=new Int32Array(t*a);for(let e=0;e<t;e++)for(let t=0;t<a;++t)n[e*a+t]=r[4*e+t]}this.data.set(t,n)}async read(t){return this.throwIfNoData(t),this.data.get(t)}readSync(t){return this.throwIfNoData(t),this.data.get(t)}disposeData(t){this.data.delete(t)}async time(t){const e=performance.now();return t(),performance.now()-e}throwIfNoData(t){if(!this.data.has(t))throw new Error(`No data found for NDArray with data id ${t}. `+"Use dl.ENV.math instead of constructing your own NDArrayMath. If you need to construct your own math, make sure this array is allocated after the math construction")}clone(t){return o.NDArray.make(t.shape,{values:new Float32Array(t.dataSync())})}slice1D(t,e,a){const r=t.dataSync().slice(e,e+a);return o.Array1D.new(r)}slice2D(t,e,a){const r=o.Array2D.zeros(a),[n,s]=e;for(let e=0;e<a[0];++e)for(let o=0;o<a[1];++o){const a=t.get(e+n,o+s);r.set(a,e,o)}return r}slice3D(t,e,a){const r=o.Array3D.zeros(a),[n,s,l]=e;for(let e=0;e<a[0];++e)for(let o=0;o<a[1];++o)for(let i=0;i<a[2];++i){const a=t.get(e+n,o+s,i+l);r.set(a,e,o,i)}return r}slice4D(t,e,a){const r=o.Array4D.zeros(a),[n,s,l,i]=e;for(let e=0;e<a[0];++e)for(let o=0;o<a[1];++o)for(let h=0;h<a[2];++h)for(let c=0;c<a[3];++c){const a=t.get(e+n,o+s,h+l,c+i);r.set(a,e,o,h,c)}return r}concat1D(t,e){const a=n.computeOutShape(t.shape,e.shape,0),r=o.Array1D.zeros(a),s=t.dataSync(),l=e.dataSync(),i=r.dataSync();return i.set(s,0),i.set(l,t.size),r}concat2D(t,e,a){const r=n.computeOutShape(t.shape,e.shape,a),s=o.Array2D.zeros(r);if(0===a){const a=t.dataSync(),r=e.dataSync(),n=s.dataSync();return n.set(a,0),n.set(r,t.size),s}for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o){const r=[n,o];let l;if(r[a]<t.shape[a])l=t.get(n,o);else{r[a]-=t.shape[a];const[n,o]=r;l=e.get(n,o)}s.set(l,n,o)}return s}concat3D(t,e,a){const r=n.computeOutShape(t.shape,e.shape,a),s=o.Array3D.zeros(r);if(0===a){const a=t.dataSync(),r=e.dataSync(),n=s.dataSync();return n.set(a,0),n.set(r,t.size),s}for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o)for(let l=0;l<r[2];++l){const r=[n,o,l];let i;if(r[a]<t.shape[a])i=t.get(n,o,l);else{r[a]-=t.shape[a];const[n,o,s]=r;i=e.get(n,o,s)}s.set(i,n,o,l)}return s}concat4D(t,e,a){const r=n.computeOutShape(t.shape,e.shape,a),s=o.Array4D.zeros(r);if(0===a){const a=t.dataSync(),r=e.dataSync(),n=s.dataSync();return n.set(a,0),n.set(r,t.size),s}for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o)for(let l=0;l<r[2];++l)for(let i=0;i<r[3];++i){const r=[n,o,l,i];let h;if(r[a]<t.shape[a])h=t.get(n,o,l,i);else{r[a]-=t.shape[a];const[n,o,s,l]=r;h=e.get(n,o,s,l)}s.set(h,n,o,l,i)}return s}neg(t){return this.multiply(o.Scalar.new(-1),t)}add(t,e){return this.broadcastedBinaryOp(t,e,s.upcastType(t.dtype,e.dtype),(t,e)=>t+e)}subtract(t,e){return this.broadcastedBinaryOp(t,e,s.upcastType(t.dtype,e.dtype),(t,e)=>t-e)}pow(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.pow(t,e))}matMul(t,e,a=l.MatrixOrientation.REGULAR,r=l.MatrixOrientation.REGULAR){const n=a===l.MatrixOrientation.REGULAR?t.shape[1]:t.shape[0],s=a===l.MatrixOrientation.REGULAR?t.shape[0]:t.shape[1],i=r===l.MatrixOrientation.REGULAR?e.shape[1]:e.shape[0],h=(t,e,a)=>t.get(e,a),c=(t,e,a)=>t.get(a,e),d=a===l.MatrixOrientation.REGULAR?h:c,y=r===l.MatrixOrientation.REGULAR?h:c,p=new Float32Array(s*i);let u=0;for(let a=0;a<s;++a)for(let r=0;r<i;++r){let o=0;for(let s=0;s<n;++s)o+=d(t,a,s)*y(e,s,r);p[u++]=o}return o.Array2D.new([s,i],p)}multiply(t,e){return this.broadcastedBinaryOp(t,e,s.upcastType(t.dtype,e.dtype),(t,e)=>t*e)}divide(t,e){return this.broadcastedBinaryOp(t,e,"float32",(t,e)=>t/e)}sum(t,e){i.assertAxesAreInnerMostDims("sum",e,t.rank);const[r,n]=i.computeOutAndReduceShapes(t.shape,e),s=l.SumTypesMap[t.dtype],h=o.NDArray.zeros(r,s),c=a.sizeFromShape(n),d=h.dataSync(),y=t.dataSync();for(let t=0;t<d.length;++t){const e=t*c;let a=0;for(let t=0;t<c;++t)a+=y[e+t];d[t]=a}return h}argMin(t,e){i.assertAxesAreInnerMostDims("argMin",e,t.rank);const[r,n]=i.computeOutAndReduceShapes(t.shape,e),s=o.NDArray.zeros(r,"int32"),l=a.sizeFromShape(n),h=s.dataSync(),c=t.dataSync();for(let t=0;t<h.length;++t){const e=t*l;let r=c[e],n=0;for(let t=0;t<l;++t){const o=c[e+t];if(isNaN(o)){n=a.NAN_INT32;break}o<r&&(r=o,n=t)}h[t]=n}return s}argMax(t,e){i.assertAxesAreInnerMostDims("argMax",e,t.rank);const[r,n]=i.computeOutAndReduceShapes(t.shape,e),s=o.NDArray.zeros(r,"int32"),l=a.sizeFromShape(n),h=s.dataSync(),c=t.dataSync();for(let t=0;t<h.length;++t){const e=t*l;let r=c[e],n=0;for(let t=0;t<l;++t){const o=c[e+t];if(isNaN(o)){n=a.NAN_INT32;break}o>r&&(r=o,n=t)}h[t]=n}return s}equal(t,e){return this.broadcastedBinaryOp(t,e,"bool",(r,n)=>a.isValNaN(r,t.dtype)||a.isValNaN(n,e.dtype)?a.getNaN("bool"):r===n?1:0)}notEqual(t,e){return this.broadcastedBinaryOp(t,e,"bool",(r,n)=>a.isValNaN(r,t.dtype)||a.isValNaN(n,e.dtype)?a.getNaN("bool"):r!==n?1:0)}greater(t,e){return this.broadcastedBinaryOp(t,e,"bool",(r,n)=>a.isValNaN(r,t.dtype)||a.isValNaN(n,e.dtype)?a.getNaN("bool"):r>n?1:0)}greaterEqual(t,e){return this.broadcastedBinaryOp(t,e,"bool",(r,n)=>a.isValNaN(r,t.dtype)||a.isValNaN(n,e.dtype)?a.getNaN("bool"):r>=n?1:0)}less(t,e){return this.broadcastedBinaryOp(t,e,"bool",(r,n)=>a.isValNaN(r,t.dtype)||a.isValNaN(n,e.dtype)?a.getNaN("bool"):r<n?1:0)}lessEqual(t,e){return this.broadcastedBinaryOp(t,e,"bool",(r,n)=>a.isValNaN(r,t.dtype)||a.isValNaN(n,e.dtype)?a.getNaN("bool"):r<=n?1:0)}select(t,e,a){return this.ternaryOp(t,e,a,e.dtype,(t,e,a)=>t?e:a)}topKValues(t,e){return this.topK(t,e).values}topKIndices(t,e){return this.topK(t,e).indices}topK(t,e){const r=t.dataSync(),n=[];for(let t=0;t<r.length;t++)n.push({value:r[t],index:t});n.sort((t,e)=>e.value-t.value);const s=a.getTypedArrayFromDType(t.dtype,e),l=new Int32Array(e);for(let t=0;t<e;t++)s[t]=n[t].value,l[t]=n[t].index;return{values:o.Array1D.new(s),indices:o.Array1D.new(l)}}min(t,e){i.assertAxesAreInnerMostDims("min",e,t.rank);const[r,n]=i.computeOutAndReduceShapes(t.shape,e),s=o.NDArray.zeros(r,t.dtype),l=a.sizeFromShape(n),h=s.dataSync(),c=t.dataSync();for(let t=0;t<h.length;++t){const e=t*l;let a=c[0];for(let t=0;t<l;++t){const r=c[e+t];if(isNaN(r)){a=Number.NaN;break}r<a&&(a=r)}h[t]=a}return s}minimum(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.min(t,e))}max(t,e){i.assertAxesAreInnerMostDims("max",e,t.rank);const[r,n]=i.computeOutAndReduceShapes(t.shape,e),s=o.NDArray.zeros(r,t.dtype),l=a.sizeFromShape(n),h=s.dataSync(),c=t.dataSync();for(let t=0;t<h.length;++t){const e=t*l;let a=c[e];for(let t=0;t<l;++t){const r=c[e+t];if(isNaN(r)){a=Number.NaN;break}r>a&&(a=r)}h[t]=a}return s}maximum(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.max(t,e))}ceil(t){const e=t.dataSync(),a=new Float32Array(e.length);for(let t=0;t<e.length;++t)a[t]=Math.ceil(e[t]);return o.NDArray.make(t.shape,{values:a})}floor(t){const e=t.dataSync(),a=new Float32Array(e.length);for(let t=0;t<e.length;++t)a[t]=Math.floor(e[t]);return o.NDArray.make(t.shape,{values:a})}exp(t){const e=t.dataSync(),a=new Float32Array(e.length);for(let t=0;t<e.length;++t)a[t]=Math.exp(e[t]);return o.NDArray.make(t.shape,{values:a})}log(t){const e=t.dataSync(),a=new Float32Array(e.length);for(let t=0;t<e.length;++t){const r=e[t];a[t]=Math.log(r)}return o.NDArray.make(t.shape,{values:a})}sqrt(t){const e=t.dataSync(),a=new Float32Array(e.length);for(let t=0;t<e.length;++t){const r=e[t];a[t]=Math.sqrt(r)}return o.NDArray.make(t.shape,{values:a})}square(t){const e=t.dataSync(),a=new Float32Array(e.length);for(let t=0;t<e.length;++t){const r=e[t];a[t]=r*r}return o.NDArray.make(t.shape,{values:a})}relu(t){const e=o.NDArray.zeros(t.shape,t.dtype),r=e.dataSync(),n=t.dataSync();for(let o=0;o<n.length;++o){const s=n[o];a.isValNaN(s,t.dtype)?r[o]=a.getNaN(e.dtype):r[o]=Math.max(0,n[o])}return e}elu(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t){const r=a[t];e[t]=r>=0?r:Math.exp(r)-1}return o.NDArray.make(t.shape,{values:e})}eluDer(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t){const r=a[t];e[t]=r>=0?1:Math.exp(r)}return o.NDArray.make(t.shape,{values:e})}selu(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t){const r=a[t];e[t]=r>=0?1.0507009873554805*r:1.7580993408473768*(Math.exp(r)-1)}return o.NDArray.make(t.shape,{values:e})}leakyRelu(t,e){const a=new Float32Array(t.size),r=t.dataSync();for(let t=0;t<r.length;t++){const n=r[t];a[t]=n>=0?n:e*n}return o.NDArray.make(t.shape,{values:a})}prelu(t,e){const a=new Float32Array(t.size),r=t.dataSync(),n=e.dataSync();for(let t=0;t<r.length;t++){const e=r[t];a[t]=e>=0?e:n[t]*e}return o.NDArray.make(t.shape,{values:a})}preluDer(t,e){const a=new Float32Array(t.size),r=t.dataSync(),n=e.dataSync();for(let t=0;t<r.length;t++){const e=r[t];a[t]=e>0?1:e<0?n[t]:e}return o.NDArray.make(t.shape,{values:a})}clip(t,e,a){const r=new Float32Array(t.size),n=t.dataSync();for(let t=0;t<n.length;++t)r[t]=Math.min(a,Math.max(e,n[t]));return o.NDArray.make(t.shape,{values:r})}abs(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.abs(a[t]);return o.NDArray.make(t.shape,{values:e})}int(t){const e=new Int32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=a[t];return o.NDArray.make(t.shape,{values:e},"int32")}sigmoid(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=1/(1+Math.exp(-a[t]));return o.NDArray.make(t.shape,{values:e})}sin(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.sin(a[t]);return o.NDArray.make(t.shape,{values:e})}cos(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.cos(a[t]);return o.NDArray.make(t.shape,{values:e})}tan(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.tan(a[t]);return o.NDArray.make(t.shape,{values:e})}asin(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.asin(a[t]);return o.NDArray.make(t.shape,{values:e})}acos(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.acos(a[t]);return o.NDArray.make(t.shape,{values:e})}atan(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.atan(a[t]);return o.NDArray.make(t.shape,{values:e})}sinh(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.sinh(a[t]);return o.NDArray.make(t.shape,{values:e})}cosh(t){const e=new Float32Array(t.size),a=t.dataSync();for(let t=0;t<a.length;++t)e[t]=Math.cosh(a[t]);return o.NDArray.make(t.shape,{values:e})}tanh(t){const e=new Float32Array(t.size),r=t.dataSync();for(let t=0;t<r.length;++t)e[t]=a.tanh(r[t]);return o.NDArray.make(t.shape,{values:e})}step(t,e=0){const r=new Float32Array(t.size),n=t.dataSync();for(let o=0;o<n.length;++o){const s=n[o];a.isValNaN(s,t.dtype)?r[o]=a.getNaN(t.dtype):r[o]=s>0?1:e}return o.NDArray.make(t.shape,{values:r})}conv2d(t,e,a,r){const n=r.filterHeight,s=r.filterWidth,l=r.padInfo.left,i=r.padInfo.top,h=o.Array4D.zeros(r.outShape);for(let o=0;o<r.batchSize;++o)for(let c=0;c<r.outChannels;++c)for(let d=0;d<r.outHeight;++d){const y=d*r.strideHeight-l,p=Math.max(0,y),u=Math.min(r.inHeight,n+y);for(let n=0;n<r.outWidth;++n){const l=n*r.strideWidth-i,f=Math.max(0,l),g=Math.min(r.inWidth,s+l);let m=0;for(let a=p;a<u;++a){const n=a-y;for(let s=f;s<g;++s){const i=s-l;for(let l=0;l<r.inChannels;++l){m+=t.get(o,a,s,l)*e.get(n,i,l,c)}}}const A=null!=a?a.get(c):0;h.set(m+A,o,d,n,c)}}return h}conv2dDerInput(t,e,a){const r=a.filterHeight,n=a.filterWidth,s=r-1-a.padInfo.top,l=n-1-a.padInfo.left,i=a.strideHeight,h=a.strideWidth,c=o.Array4D.zeros(a.inShape);for(let o=0;o<a.batchSize;++o)for(let d=0;d<a.inChannels;++d)for(let y=0;y<a.inHeight;++y){const p=y-l,u=Math.max(0,Math.ceil(p/i)),f=Math.min(a.outHeight,(r+p)/i);for(let l=0;l<a.inWidth;++l){const g=l-s,m=Math.max(0,Math.ceil(g/h)),A=Math.min(a.outWidth,(n+g)/h);let N=0;for(let s=u;s<f;++s){const l=s*i-p;for(let i=m;i<A;++i){const c=i*h-g;for(let h=0;h<a.outChannels;++h){N+=t.get(o,s,i,h)*e.get(r-1-l,n-1-c,d,h)}}}c.set(N,o,y,l,d)}}return c}conv2dDerFilter(t,e,a){const r=a.strideHeight,n=a.strideWidth,s=a.filterHeight,l=a.filterWidth,i=o.Array4D.zeros(a.filterShape),h=a.padInfo.left,c=a.padInfo.top;for(let o=0;o<s;++o){const s=Math.max(0,Math.ceil((c-o)/r)),d=Math.min(a.outHeight,(a.inHeight+c-o)/r);for(let y=0;y<l;++y){const l=Math.max(0,Math.ceil((h-y)/n)),p=Math.min(a.outWidth,(a.inWidth+h-y)/n);for(let u=0;u<a.inChannels;++u)for(let f=0;f<a.outChannels;++f){let g=0;for(let i=0;i<a.batchSize;++i)for(let a=s;a<d;++a){const s=o+a*r-c;for(let r=l;r<p;++r){const o=y+r*n-h;g+=t.get(i,s,o,u)*e.get(i,a,r,f)}}i.set(g,o,y,u,f)}}}return i}conv2dDerBias(t){const[e,a,r,n]=t.shape,s=new Float32Array(n);for(let o=0;o<n;++o){let n=0;for(let s=0;s<e;++s)for(let e=0;e<a;++e)for(let a=0;a<r;++a)n+=t.get(s,e,a,o);s[o]=n}return o.Array1D.new(s)}depthwiseConv2D(t,e,a){const r=a.filterHeight,n=a.filterWidth,s=a.padInfo.left,l=a.padInfo.top,i=a.outChannels/a.inChannels,h=o.Array4D.zeros(a.outShape);for(let o=0;o<a.batchSize;++o)for(let c=0;c<a.inChannels;++c)for(let d=0;d<a.outHeight;++d){const y=d*a.strideHeight-s,p=Math.max(0,y),u=Math.min(a.inHeight,r+y);for(let r=0;r<a.outWidth;++r){const s=r*a.strideWidth-l,f=Math.max(0,s),g=Math.min(a.inWidth,n+s);for(let a=0;a<i;++a){let n=0;for(let r=p;r<u;++r){const l=r-y;for(let i=f;i<g;++i){const h=i-s;n+=t.get(o,r,i,c)*e.get(l,h,c,a)}}h.set(n,o,d,r,c*i+a)}}}return h}tile(t,e){const r=new Array(t.rank);for(let a=0;a<r.length;a++)r[a]=t.shape[a]*e[a];let n;if("float32"===t.dtype)n=Float32Array;else if("int32"===t.dtype)n=Int32Array;else{if("bool"!==t.dtype)throw new Error(`Dtype ${t.dtype} not supported for tile`);n=Uint8Array}const s=new n(a.sizeFromShape(r)),l=o.NDArray.make(r,{values:s},t.dtype),i=t.dataSync();for(let e=0;e<l.size;++e){const a=l.indexToLoc(e),r=new Array(t.rank);for(let e=0;e<r.length;e++)r[e]=a[e]%t.shape[e];const n=t.locToIndex(r);s[e]=i[n]}return l}transpose(t,e){const a=new Array(t.rank);for(let r=0;r<a.length;r++)a[r]=t.shape[e[r]];const r=new Float32Array(t.size),n=t.dataSync(),s=o.NDArray.make(a,{values:r});for(let a=0;a<t.size;++a){const o=t.indexToLoc(a),l=new Array(o.length);for(let t=0;t<l.length;t++)l[t]=o[e[t]];r[s.locToIndex(l)]=n[a]}return s}pool(t,e,a){const r=e.strideHeight,n=e.strideWidth,s=e.filterHeight,l=e.filterWidth,i=o.Array4D.zeros(e.outShape),h=e.padInfo.top,c=e.padInfo.left;for(let o=0;o<e.batchSize;++o)for(let d=0;d<e.inChannels;++d)for(let y=0;y<e.outHeight;++y){const p=y*r-h,u=Math.max(0,p),f=Math.min(e.inHeight,s+p);for(let r=0;r<e.outWidth;++r){const h=r*n-c,p=Math.max(0,h),g=Math.min(e.inWidth,l+h);let m="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=0;for(let e=u;e<f;++e){for(let r=p;r<g;++r){const n=t.get(o,e,r,d);if(isNaN(n)){m=NaN,A=NaN;break}"max"===a&&n>m||"min"===a&&n<m?m=n:"avg"===a&&(A+=n/(s*l))}if(isNaN(m))break}i.set("avg"===a?A:m,o,y,r,d)}}return i}maxPool(t,e){return this.pool(t,e,"max")}maxPoolPositions(t,e){const a=o.Array4D.zeros(e.outShape),r=e.strideHeight,n=e.strideWidth,s=e.filterHeight,l=e.filterWidth,i=e.padInfo.top,h=e.padInfo.left;for(let o=0;o<e.batchSize;++o)for(let c=0;c<e.inChannels;++c)for(let d=0;d<e.outHeight;++d){const y=d*r-i,p=Math.max(0,y),u=Math.min(e.inHeight,s+y);for(let r=0;r<e.outWidth;++r){const s=r*n-h,i=Math.max(0,s),f=Math.min(e.inWidth,l+s);let g=Number.NEGATIVE_INFINITY,m=-1;for(let e=p;e<u;++e){const a=e-y;for(let r=i;r<f;++r){const n=r-s,i=t.get(o,e,r,c);i>g&&(g=i,m=a*l+n)}}a.set(m,o,d,r,c)}}return a}maxPoolBackprop(t,e,a){const r=this.maxPoolPositions(e,a),n=a.strideHeight,s=a.strideWidth,l=a.filterHeight,i=a.filterWidth,h=i-1-a.padInfo.left,c=l-1-a.padInfo.top,d=o.Array4D.zeros(e.shape);for(let e=0;e<a.batchSize;++e)for(let o=0;o<a.inChannels;++o)for(let y=0;y<a.inHeight;++y)for(let p=0;p<a.inWidth;++p){const u=y-c,f=p-h;let g=0;for(let h=0;h<l;++h){const c=(u+h)/n;if(!(c<0||c>=a.outHeight||Math.floor(c)!==c))for(let n=0;n<i;++n){const d=(f+n)/s;if(d<0||d>=a.outWidth||Math.floor(d)!==d)continue;const y=l*i-1-r.get(e,c,d,o)===h*i+n?1:0;if(0===y)continue;g+=t.get(e,c,d,o)*y}}d.set(g,e,y,p,o)}return d}minPool(t,e){return this.pool(t,e,"min")}avgPool(t,e){return this.pool(t,e,"avg")}resizeBilinear3D(t,e,a){const r=o.Array3D.zeros([e[0],e[1],t.shape[2]]),n=a?[t.shape[0]-1,t.shape[1]-1,t.shape[2]]:t.shape,s=a?[r.shape[0]-1,r.shape[1]-1,r.shape[2]]:r.shape;for(let e=0;e<r.shape[0];e++)for(let a=0;a<r.shape[1];a++)for(let o=0;o<r.shape[2];o++){const l=n[0]*e/s[0],i=n[1]*a/s[1],h=Math.floor(l),c=Math.min(t.shape[0]-1,Math.ceil(l)),d=Math.floor(i),y=Math.min(t.shape[1]-1,Math.ceil(i)),p=t.get(h,d,o),u=t.get(c,d,o),f=i-d,g=p+(t.get(h,y,o)-p)*f,m=g+(u+(t.get(c,y,o)-u)*f-g)*(l-h);r.set(m,e,a,o)}return r}batchNormalization2D(t,e,a,r,n,s){const l=t.dataSync(),i=e.dataSync(),h=a.dataSync(),c=n?n.dataSync():[1],d=s?s.dataSync():[0],y=new Float32Array(l.length);for(let t=0;t<l.length;t++)y[t]=d[t%d.length]+(l[t]-i[t%i.length])*c[t%c.length]/Math.sqrt(h[t%h.length]+r);return o.Array2D.new(t.shape,y)}batchNormalization3D(t,e,a,r,n,s){const l=t.dataSync(),i=e.dataSync(),h=a.dataSync(),c=n?n.dataSync():[1],d=s?s.dataSync():[0],y=new Float32Array(l.length);for(let t=0;t<l.length;t++)y[t]=d[t%d.length]+(l[t]-i[t%i.length])*c[t%c.length]/Math.sqrt(h[t%h.length]+r);return o.Array3D.new(t.shape,y)}batchNormalization4D(t,e,a,r,n,s){const l=t.dataSync(),i=e.dataSync(),h=a.dataSync(),c=n?n.dataSync():new Float32Array([1]),d=s?s.dataSync():new Float32Array([0]),y=new Float32Array(l.length);for(let t=0;t<l.length;t++)y[t]=d[t%d.length]+(l[t]-i[t%i.length])*c[t%c.length]/Math.sqrt(h[t%h.length]+r);return o.Array4D.new(t.shape,y)}multinomial(e,a,r){const n=e.shape[0],s=e.shape[1],l=o.Array2D.zeros([n,a],"int32"),i=l.dataSync(),h=e.dataSync();for(let e=0;e<n;++e){const n=e*s,o=new Float32Array(s-1);o[0]=h[n];for(let t=1;t<o.length;++t)o[t]=o[t-1]+h[n+t];const l=t.alea(r.toString()),c=e*a;for(let t=0;t<a;++t){const e=l();i[c+t]=o.length;for(let a=0;a<o.length;a++)if(e<o[a]){i[c+t]=a;break}}}return l}oneHot(t,e,a,r){const n=new Float32Array(t.size*e);n.fill(r);for(let r=0;r<t.size;++r)n[r*e+t.get(r)]=a;return o.Array2D.new([t.size,e],n)}setDiag(t,e){const a=this.clone(t),r=e.dataSync();for(let t=0;t<r.length;++t){const e=r[t];a.set(e,t,t)}return a}broadcastedBinaryOp(t,e,a,n){const s=r.assertAndGetBroadcastShape(t.shape,e.shape),l=o.NDArray.zeros(s,a),i=l.dataSync(),h=t.dataSync(),c=e.dataSync(),d=r.getBroadcastDims(t.shape,s),y=r.getBroadcastDims(e.shape,s);for(let a=0;a<i.length;++a){const r=l.indexToLoc(a),o=r.slice(-t.rank);d.forEach(t=>o[t]=0);const s=t.locToIndex(o),p=r.slice(-e.rank);y.forEach(t=>p[t]=0);const u=e.locToIndex(p);i[a]=n(h[s],c[u])}return l}ternaryOp(t,e,r,n,s){a.assertShapesMatch(t.shape,e.shape),a.assertShapesMatch(e.shape,r.shape);const l=t.shape,i=o.NDArray.zeros(l,n),h=i.getValues(),c=t.getValues(),d=e.getValues(),y=r.getValues();for(let a=0;a<h.length;++a){const n=i.indexToLoc(a),o=t.locToIndex(n),l=e.locToIndex(n),p=r.locToIndex(n);h[a]=s(c[o],d[l],y[p])}return i}dispose(){}}exports.MathBackendCPU=h,e.ENV.registerBackend("cpu",()=>new h);
},{"seedrandom":523,"../../environment":15,"../../util":24,"../broadcast_util":27,"../concat_util":29,"../ndarray":17,"../types":19,"./../axis_util":28}],33:[function(require,module,exports) {
"use strict";function t(t){return t<=exports.PARALLELIZE_THRESHOLD?t:e(t,Math.floor(Math.sqrt(t)))}function e(t,e){for(let r=e;r<t;++r)if(t%r==0)return r;return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PARALLELIZE_THRESHOLD=30,exports.computeOptimalWindowSize=t;
},{}],35:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,n,e){this.variableNames=["A"];const i=t.windowSize,s=t.batchSize,a=t.inSize,d=Math.ceil(a/i);e||this.variableNames.push("bestIndicesA"),this.outputShape=[s,d];const o="max"===n?">":"<",c=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < ${i}; i++) {\n          int inIdx = ${c};\n          float candidate = getA(batch, inIdx);\n          if (isNaN(candidate)) {\n            setOutput(candidate);\n            return;\n          }\n          if (candidate ${o} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}exports.ArgMinMaxProgram=t;
},{}],34:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../broadcast_util");class a{constructor(a,e,s,o,r,n){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],t.assertAndGetBroadcastShape(a,e),t.assertAndGetBroadcastShape(a,s);let l="0.0";null!=o&&(t.assertAndGetBroadcastShape(a,o),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let i="1.0";null!=r&&(t.assertAndGetBroadcastShape(a,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=a,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${l};\n        float scale = ${i};\n        float inv = scale / sqrt(variance + float(${n}));\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}exports.BatchNormProgram=a;
},{"../../broadcast_util":27}],36:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../../broadcast_util"),n="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n";exports.ADD="return a + b;",exports.SUB="return a - b;",exports.MUL="return a * b;",exports.DIV="return a / b;",exports.POW="\n  return (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",exports.EQUAL=n+"\n  return float(a == b);\n",exports.NOT_EQUAL=n+"\n  return float(a != b);\n",exports.GREATER="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n  return float(a > b);\n",exports.GREATER_EQUAL="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n  return float(a >= b);\n",exports.LESS="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n  return float(a < b);\n",exports.LESS_EQUAL="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n  return float(a <= b);\n",exports.PRELU="\n  return (a >= 0.0) ? a : b * a;\n",exports.PRELU_DER="\n  return (a > 0.0) ? 1.0 : ((a < 0.0) ? b : a);\n",exports.MAX=n+"\n  return max(a, b);\n",exports.MIN=n+"\n  return min(a, b);\n";class t{constructor(n,t,a){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=r.assertAndGetBroadcastShape(t,a),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${n}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}exports.BinaryOpProgram=t;
},{"../../broadcast_util":27}],37:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,e,s){this.variableNames=["A"],this.outputShape=t;const u=e.toFixed(20),o=s.toFixed(20);this.userCode=`\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, ${u}, ${o}));\n      }\n    `}}exports.ClipProgram=t;
},{}],54:[function(require,module,exports) {
"use strict";function t(t,e){return[e,t]}function e(t,e){return t*e}function r(t,e){return[4*e,t]}function o(t,e){if(t%e!=0)throw new Error(`unpackedSize (${t}) must be a multiple of `+`${e}`);return t/e}function n(t,r,o){const n=e(t.length,o);if(r.length<n)throw new Error(`unpackedArray length (${r.length}) must be >= `+`${n}`);let l=0;for(let e=0;e<t.length;++e)r[l]=t[e],l+=o}function l(t){const e=new Uint8Array(4*t.length);for(let r=0;r<e.length;r+=4){const o=t[r/4];if(isNaN(o)){e[r]=exports.BYTE_NAN_VALUE,e[r+1]=exports.BYTE_NAN_VALUE,e[r+2]=exports.BYTE_NAN_VALUE,e[r+3]=exports.BYTE_NAN_VALUE;continue}const n=(o-exports.FLOAT_MIN)/A,l=g.map(t=>t*n).map(t=>Math.floor(t%1*255));e[r]=Math.floor(n),e[r+1]=l[0],e[r+2]=l[1],e[r+3]=l[2]}return e}function s(t){const e=new Float32Array(t.length/4);for(let r=0;r<t.length;r+=4){if(t[r]===exports.BYTE_NAN_VALUE&&t[r+1]===exports.BYTE_NAN_VALUE&&t[r+2]===exports.BYTE_NAN_VALUE&&t[r+3]===exports.BYTE_NAN_VALUE){e[r/4]=NaN;continue}let o=0;u.forEach((e,n)=>{o+=e*t[r+n]});const n=o*A+exports.FLOAT_MIN;e[r/4]=n}return e}function a(t,e,r){const n=o(t.length,r);if(e.length<n)throw new Error(`matrix length (${e.length}) must be >= ${n}`);let l=0;for(let o=0;o<t.length;o+=r)e[l++]=t[o]}function c(t,e,r){const o=t.length*r/4;if(e.length<o)throw new Error(`matrix length (${e.length}) must be >= ${o}`);let n=0;for(let o=0;o<t.length;o+=4)for(let l=0;l<r;l++)e[n++]=t[o+l]}function i(t,e){return[Math.ceil(e/2),Math.ceil(t/2)]}function h(t,e){const[r,o]=i(t,e);return r*o*4}function p(t,e,r,o){const n=h(e,r);if(o.length<n)throw new Error(`packedRGBA length (${o.length}) must be >= ${n}`);const[l,s]=i(e,r),a=r%2==1,c=e%2==1,p=Math.floor(r/2),x=Math.floor(e/2);{const e=a?4:0,n=r;let l=0;for(let s=0;s<x;++s){const a=2*s*r;for(let e=0;e<p;++e){const r=a+2*e;o[l]=t[r],o[l+1]=t[r+1],o[l+2]=t[r+n],o[l+3]=t[r+n+1],l+=4}l+=e}}if(a){let e=r-1,n=4*(l-1);const s=2*r,a=4*l;for(let l=0;l<x;++l)o[n]=t[e],o[n+2]=t[e+r],e+=s,n+=a}if(c){let n=(e-1)*r,a=(s-1)*l*4;for(let e=0;e<p;++e)o[a++]=t[n++],o[a++]=t[n++],a+=2}return a&&c&&(o[o.length-4]=t[t.length-1]),o}function x(t,e,r,o){const n=e*r;if(n<o.length)throw new Error(`matrix length (${o.length}) must be >= ${n}`);const l=r%2==1,s=e%2==1,a=Math.floor(r/2),c=Math.floor(e/2),[h,p]=i(e,r);{const e=l?4:0,n=r+(l?1:0);let s=0,i=0,h=r;for(let r=0;r<c;++r){for(let e=0;e<a;++e)o[i++]=t[s++],o[i++]=t[s++],o[h++]=t[s++],o[h++]=t[s++];s+=e,i+=n,h+=n}}if(l){let e=4*(h-1),n=r-1;const l=4*h,s=2*r;for(let a=0;a<c;++a)o[n]=t[e],o[n+r]=t[e+2],e+=l,n+=s}if(s){let n=(p-1)*h*4,l=(e-1)*r;for(let e=0;e<a;++e)o[l++]=t[n++],o[l++]=t[n++],n+=2}return l&&s&&(o[o.length-1]=t[t.length-4]),o}Object.defineProperty(exports,"__esModule",{value:!0});var f;!function(t){t[t.DEFAULT=0]="DEFAULT",t[t.RGBA_COLOR=1]="RGBA_COLOR"}(f=exports.TextureType||(exports.TextureType={})),exports.getUnpackedMatrixTextureShapeWidthHeight=t,exports.getUnpackedArraySizeFromMatrixSize=e,exports.getColorMatrixTextureShapeWidthHeight=r,exports.getMatrixSizeFromUnpackedArraySize=o,exports.encodeMatrixToUnpackedArray=n,exports.FLOAT_MAX=2e4,exports.FLOAT_MIN=-exports.FLOAT_MAX;const A=(exports.FLOAT_MAX-exports.FLOAT_MIN)/255,u=[1,1/255,1/65025,1/16581375],g=[1,255,65025];exports.BYTE_NAN_VALUE=0,exports.encodeFloatArray=l,exports.decodeToFloatArray=s,exports.decodeMatrixFromUnpackedArray=a,exports.decodeMatrixFromUnpackedColorRGBAArray=c,exports.getPackedMatrixTextureShapeWidthHeight=i,exports.getPackedRGBAArraySizeFromMatrixShape=h,exports.encodeMatrixToPackedRGBA=p,exports.decodeMatrixFromPackedRGBA=x;
},{}],60:[function(require,module,exports) {
"use strict";function n(n,r,a,u){const l=e(),c=t(),s=n.map(n=>`uniform sampler2D ${n.name};`).join("\n"),p=n.map(n=>o(n,r,u)).join("\n"),x=r.textureShape,v=i(r.logicalShape,x);return[L,l,c,s,v,p,a].join("\n")}function e(){return w.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?_:A}function t(){return w.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?I:O}function r(n){const e=n.shapeInfo.logicalShape;switch(e.length){case 0:return p(n);case 1:return x(n);case 2:return v(n);case 3:return d(n);case 4:return f(n);default:throw new Error(`${e.length}-D input sampling`+" is not yet supported")}}function o(n,e,t){let o=$(n);return o+=r(n),(t||T.arraysEqual(n.shapeInfo.logicalShape,e.logicalShape))&&(o+=m(n,e,t)),o}function i(n,e){switch(n.length){case 0:return a();case 1:return u(n,e);case 2:return s(n,e);case 3:return l(n,e);case 4:return c(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function a(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function u(n,e){return 1===e[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${e[1]}.0);\n      }\n    `:1===e[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${e[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      return resTexRC.x * ${e[1]} + resTexRC.y;\n    }\n  `}function l(n,e){const t=n[1]*n[2],r=n[2];return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      int r = index / ${t};\n      index -= r * ${t};\n      int c = index / ${r};\n      int d = index - c * ${r};\n      return ivec3(r, c, d);\n    }\n  `}function c(n,e){const t=n[3],r=n[2]*t,o=n[1]*r;return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      int r = index / ${o};\n      index -= r * ${o};\n\n      int c = index / ${r};\n      index -= c * ${r};\n\n      int d = index / ${t};\n      int d2 = index - d * ${t};\n\n      return ivec4(r, c, d, d2);\n    }\n  `}function s(n,e){return T.arraysEqual(n,e)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx *\n                     vec2(${e[0]}, ${e[1]}));\n      }\n    `:1===n[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===n[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      int r = index / ${n[1]};\n      int c = index - r * ${n[1]};\n      return ivec2(r, c);\n    }\n  `}function p(n){const e=n.name;return`\n    float ${"get"+e.charAt(0).toUpperCase()+e.slice(1)}() {\n      return sample(${e}, halfCR);\n    }\n  `}function x(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1);return`\n    float ${t}(int index) {\n      return ${t}Flat(index);\n    }\n  `}function v(n){const e=n.shapeInfo.logicalShape,t=n.shapeInfo.textureShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=t[0],u=t[1];if(T.arraysEqual(e,t))return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${u}.0, ${a}.0);\n      return sample(${o}, uv);\n    }\n  `;const{newShape:l,keptDims:c}=T.squeezeShape(e),s=l;if(s.length<e.length){return`\n      ${r(g(n,s))}\n      float ${i}(int row, int col) {\n        return ${i}(${R(["row","col"],c)});\n      }\n    `}return 1===u?`\n    float ${i}(int row, int col) {\n      int index = row * ${e[1]} + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / ${a}.0);\n      return sample(${o}, uv);\n    }\n  `:1===a?`\n    float ${i}(int row, int col) {\n      int index = row * ${e[1]} + col;\n      vec2 uv = vec2((float(index) + 0.5) / ${u}.0, 0.5);\n      return sample(${o}, uv);\n    }\n  `:`\n  float ${i}(int row, int col) {\n    vec2 uv = UVfrom2D(${a}, ${u}, ${e[1]}, row, col);\n    return sample(${o}, uv);\n  }\n`}function d(n){const e=n.shapeInfo.textureShape,t=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=e[0],u=e[1],l=t[1]*t[2],c=t[2],s=n.shapeInfo.textureType;if(s===N.TextureType.DEFAULT){const{newShape:e,keptDims:o}=T.squeezeShape(t),a=e;if(a.length<t.length){return`\n        ${r(g(n,a))}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${R(["row","col","depth"],o)});\n        }\n      `}}if(u===l){if(s===N.TextureType.DEFAULT)return`\n        float ${i}(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * ${c} + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${u}.0, ${a}.0);\n          return sample(${o}, uv);\n        }\n      `;if(s===N.TextureType.RGBA_COLOR)return`\n        float ${i}(int row, int col, int depth) {\n          vec2 uv = (vec2(col, row) + halfCR) /\n                     vec2(${u}.0, ${a}.0);\n          return sampleUVAndDepth(${o}, uv, depth);\n        }\n      `;throw new Error(`Unknown TextureType ${s}.`)}if(u===c&&s===N.TextureType.DEFAULT)return`\n    float ${i}(int row, int col, int depth) {\n      int texR = row * ${t[1]} + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}.0, ${a}.0);\n      return sample(${o}, uv);\n    }\n  `;if(s===N.TextureType.DEFAULT)return`\n      float ${i}(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            ${a}, ${u}, ${l}, ${c}, row, col, depth);\n        return sample(${o}, uv);\n      }\n  `;if(s===N.TextureType.RGBA_COLOR)return`\n      float ${i}(int row, int col, int depth) {\n        vec2 uv = UVfrom2D(${a}, ${u}, ${t[1]}, row, col);\n        return sampleUVAndDepth(${o}, uv, depth);\n      }\n    `;throw new Error(`Unknown TextureType ${s}.`)}function f(n){const e=n.shapeInfo.logicalShape,t=n.shapeInfo.textureShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=t[0],u=t[1],l=e[3],c=e[2]*l,s=e[1]*c,{newShape:p,keptDims:x}=T.squeezeShape(e);if(p.length<e.length){return`\n      ${r(g(n,p))}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${R(["row","col","depth","depth2"],x)});\n      }\n    `}return u===s?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * ${c} + depth * ${l} + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${u}.0, ${a}.0);\n        return sample(${o}, uv);\n      }\n    `:u===l?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int texR = row * ${e[1]*e[2]} + col * ${e[2]} + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${u}.0, ${a}.0);\n        return sample(${o}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D(${a}, ${u}, ${s}, ${c},\n          ${l}, row, col, depth, depth2);\n      return sample(${o}, uv);\n    }\n  `}function $(n){const e=n.name,t=n.shapeInfo.textureShape,r="get"+e.charAt(0).toUpperCase()+e.slice(1)+"Flat",o=t[0],i=t[1];return 1===i&&1===o?`\n      float ${r}(int index) {\n        return sample(${e}, halfCR);\n      }\n    `:1===i?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / ${o}.0);\n        return sample(${e}, uv);\n      }\n    `:1===o?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / ${i}.0, 0.5);\n        return sample(${e}, uv);\n      }\n    `:`\n    float ${r}(int index) {\n      vec2 uv = UVfrom1D(${o}, ${i}, index);\n      return sample(${e}, uv);\n    }\n  `}function h(n,e,t,r){const o=n.shapeInfo.logicalShape.length,i=e.logicalShape.length;let a="int";2===i?a="ivec2":3===i?a="ivec3":4===i&&(a="ivec4");const u=V.getBroadcastDims(n.shapeInfo.logicalShape,e.logicalShape),l=i-o;let c;c=0===o?"":i<2&&u.length>=1?"coords = 0;":u.map(n=>`coords[${n+l}] = 0;`).join("\n");let s="";return s=i<2&&o>0?"coords":n.shapeInfo.logicalShape.map((n,e)=>`coords[${e+l}]`).join(", "),`\n    float ${r}() {\n      ${a} coords = getOutputCoords();\n      ${c}\n      return get${t}(${s});\n    }\n  `}function m(n,e,t){const r=n.shapeInfo.textureShape,o=n.name,i=n.shapeInfo.textureType===N.TextureType.RGBA_COLOR,a=o.charAt(0).toUpperCase()+o.slice(1),u="get"+a+"AtOutCoords",l=V.getBroadcastDims(n.shapeInfo.logicalShape,e.logicalShape),c=n.shapeInfo.logicalShape.length,s=e.logicalShape.length,p=t&&(s>c||l.length>0),x=V.broadcastDimsAreOuter(l);if(p&&!x)return h(n,e,a,u);const v=e.textureShape;if(T.arraysEqual(r,v)&&!i)return`\n      float ${u}() {\n        return sample(${o}, resultUV);\n      }\n    `;const d=i?[r[0],r[1]*n.shapeInfo.logicalShape[2]]:r;let f=`return sample(${o}, uv);`,$="";i&&($=`\n      int col = texC / ${n.shapeInfo.logicalShape[2]};\n      int texD = texC - col * ${n.shapeInfo.logicalShape[2]};\n      texC = col;\n    `,f=`return sampleUVAndDepth(${o}, uv, texD);`);const m=T.sizeFromShape(d);let C="";return p&&x&&(C=`\n        int mainPart = index / ${m};\n        index -= mainPart * ${m};\n      `),`\n    float ${u}() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${v[0]}, ${v[1]}));\n      int index = resTexRC.x * ${v[1]} + resTexRC.y;\n      ${C}\n      int texR = index / ${d[1]};\n      int texC = index - texR * ${d[1]};\n\n      ${$}\n\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2(${r[1]}.0, ${r[0]}.0);\n\n      ${f}\n    }\n  `}function C(n){if(1===n)return"int";if(2===n)return"ivec2";if(3===n)return"ivec3";if(4===n)return"ivec4";throw Error(`GPU for rank ${n} is not yet supported`)}function g(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function R(n,e){return e.map(e=>n[e]).join(", ")}Object.defineProperty(exports,"__esModule",{value:!0});const w=require("../../../environment"),T=require("../../../util"),V=require("../../broadcast_util"),y=require("./tex_util"),N=require("./tex_util");exports.makeShader=n;const U="\nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",D="\nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",S="\nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",E="\nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",A=`\n  uniform float NaN;\n\n  const vec4 floatDeltas = vec4(\n      1.0,\n      1.0 / 255.0,\n      1.0 / (255.0 * 255.0),\n      1.0 / (255.0 * 255.0 * 255.0)\n  );\n  const float minValue = ${y.FLOAT_MIN}.0;\n  const float maxValue = ${y.FLOAT_MAX}.0;\n  const float range = (maxValue - minValue) / 255.0;\n  const vec2 dotRange = vec2(1.0, range);\n\n  float sample(sampler2D texture, vec2 uv) {\n    vec4 sampleValue = texture2D(texture, uv);\n    if (all(equal(sampleValue, vec4(${y.BYTE_NAN_VALUE})))) {\n      return NaN;\n    }\n\n    vec4 encValue = floor(sampleValue * 255.0 + 0.5);\n    float decodedValue = dot(encValue, floatDeltas);\n    return dot(vec2(minValue, decodedValue), dotRange);\n  }\n`,O=`\n  const vec4 floatPowers = vec4(\n    1.0,\n    255.0,\n    255.0 * 255.0,\n    255.0 * 255.0 * 255.0\n  );\n  const vec2 recipRange = vec2(1.0/range);\n  const vec2 recipRange255 = vec2(1.0/(maxValue - minValue));\n\n  void setOutput(float decodedValue) {\n    if (isNaN(decodedValue)) {\n      gl_FragColor = vec4(${y.BYTE_NAN_VALUE});\n      return;\n    }\n\n    float a = dot(vec2(decodedValue, -minValue), recipRange);\n    float b = fract(a) * 255.0;\n    float c = fract(b) * 255.0;\n    float d = fract(c) * 255.0;\n    gl_FragColor = floor(vec4(a, b, c, d)) / 255.0;\n\n    // TODO(dsmilkov): Version above gets better accuracy but probably slower\n    // than the version below. Benchmark to determine if the accuracy is worth\n    // the cost.\n\n    // float normValue = dot(vec2(decodedValue, -minValue), recipRange255);\n    // vec4 f = normValue * floatPowers;\n    // gl_FragColor = floor(fract(f) * 255.0) / 255.0;\n  }\n`,_="\n  float sample(sampler2D texture, vec2 uv) {\n    return texture2D(texture, uv).r;\n  }\n",I="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",L=`\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  bool isNaN(float val) {\n    float v1 = val * val;\n    float v2 = val * val;\n    return v1 == v2 ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  const vec2 randomConst = vec2(\n    23.14069263277926, // e^pi (Gelfond's constant)\n     2.665144142690225 // 2^sqrt(2) (GelfondSchneider constant)\n  );\n\n  float random(float seed) {\n      return fract(cos(dot(resultUV * seed, randomConst)) * 12345.6789);\n  }\n\n  float sampleUVAndDepth(sampler2D texture, vec2 uv, int depth) {\n    float value;\n    if (depth == 0) {\n      value = texture2D(texture, uv).r;\n    } else if (depth == 1) {\n      value = texture2D(texture, uv).g;\n    } else if (depth == 2) {\n      value = texture2D(texture, uv).b;\n    } else if (depth == 3) {\n      value = texture2D(texture, uv).a;\n    }\n    return floor(value * 255.0 + 0.5);\n  }\n\n  ${U}\n  ${D}\n  ${S}\n  ${E}\n`;exports.getCoordsDataType=C;
},{"../../../environment":15,"../../../util":24,"../../broadcast_util":27,"./tex_util":54}],38:[function(require,module,exports) {
"use strict";function t(t){if(1===t)return"yR";if(2===t)return"yR, yC";if(3===t)return"yR, yC, yD";if(4===t)return"yR, yC, yD, yW";throw Error(`Concat for rank ${t} is not yet supported`)}function e(t){let e=1===t?"int yR = coords;":"int yR = coords.x;";if(t>1&&(e+="\nint yC = coords.y;"),t>2&&(e+="\nint yD = coords.z;"),t>3&&(e+="\nint yW = coords.w;"),t>4)throw Error(`Concat for rank ${t} is not yet supported`);return e}Object.defineProperty(exports,"__esModule",{value:!0});const n=require("../../concat_util"),o=require("./shader_compiler");class r{constructor(r,s,u){this.variableNames=["A","B"],this.outputShape=[];const i=["yR","yC","yD","yW"][u];this.outputShape=n.computeOutShape(r,s,u);const a=o.getCoordsDataType(r.length),y=e(r.length),c=t(r.length);this.userCode=`\n      void main() {\n        ${a} coords = getOutputCoords();\n        ${y}\n\n        float value = 0.0;\n        if (${i} < ${r[u]}) {\n          value = getA(${c});\n        } else {\n          ${i} -= ${r[u]};\n          value = getB(${c});\n        }\n\n        setOutput(value);\n      }\n    `}}exports.ConcatProgram=r;
},{"../../concat_util":29,"./shader_compiler":60}],39:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class n{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideHeight,o=n.strideWidth,d=n.padInfo.top,e=n.padInfo.left;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${d};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${o} - ${e};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DDerFilterProgram=n;class t{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterHeight,o=n.filterWidth,d=n.strideHeight,e=n.strideWidth,i=t-1-n.padInfo.top,r=o-1-n.padInfo.left;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${r});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${d}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${o} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DDerInputProgram=t;class o{constructor(n){this.variableNames=["dy"];const[t,o,d,e]=n;this.outputShape=[e],this.userCode=`\n      void main() {\n        int d2 = getOutputCoords();\n\n        float derBias = 0.0;\n        for (int b = 0; b < ${t}; b++) {\n          for (int yR = 0; yR < ${o}; yR++) {\n            for (int yC = 0; yC < ${d}; yC++) {\n              derBias += getDy(b, yR, yC, d2);\n            }\n          }\n        }\n        setOutput(derBias);\n      }\n    `}}exports.Conv2DDerBiasProgram=o;
},{}],40:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class n{constructor(n,e){this.variableNames=["x","W"],e&&this.variableNames.push("bias"),this.outputShape=n.outShape;const t=e?"dotProd += getBias(d2);":"",d=n.padInfo.top,o=n.padInfo.left,s=n.strideHeight,i=n.strideWidth,a=n.filterHeight,r=n.filterWidth,C=4*Math.floor(n.inChannels/4),x=n.inChannels%4;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${i});\n      const ivec2 pads = ivec2(${d}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${a}; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${r}; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= ${n.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${C}; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if (${1===x}) {\n              dotProd +=\n                getX(batch, xR, xC, ${C}) *\n                getW(wR, wC, ${C}, d2);\n            } else if (${2===x}) {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, ${C}),\n                getX(batch, xR, xC, ${C} + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, ${C}, d2),\n                getW(wR, wC, ${C} + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if (${3===x}) {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, ${C}),\n                getX(batch, xR, xC, ${C} + 1),\n                getX(batch, xR, xC, ${C} + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, ${C}, d2),\n                getW(wR, wC, ${C} + 1, d2),\n                getW(wR, wC, ${C} + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        ${t}\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DProgram=n;
},{}],41:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class n{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const t=n.inHeight,e=n.inWidth,o=n.padInfo.top,i=n.padInfo.left,r=n.strideHeight,d=n.strideWidth,s=n.filterHeight,a=n.filterWidth,C=n.outChannels/n.inChannels;this.userCode=`\n      const ivec2 strides = ivec2(${r}, ${d});\n      const ivec2 pads = ivec2(${o}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${C};\n        int q = d2 - d1 * ${C};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${s}; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${t}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= ${e}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.DepthwiseConv2DProgram=n;
},{}],42:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,e){this.variableNames=["source"],this.outputShape=null,this.userCode=`\n      uniform ivec2 sourceStart;\n      uniform ivec2 destStart;\n\n      void main() {\n        ivec2 destCoords = getOutputCoords() - destStart;\n        int index = destCoords.x * ${e} + destCoords.y;\n        int r = index / ${t};\n        ivec2 sourceCoords = sourceStart + ivec2(r, index - r * ${t});\n        setOutput(getSource(sourceCoords.x, sourceCoords.y));\n      }\n    `}getCustomSetupFunc(t,e,o){return(r,s)=>{r.setOutputMatrixWriteRegion(e[0],o[0],e[1],o[1]);const n=r.getUniformLocation(s,"sourceStart");r.gl.uniform2i(n,t[0],t[1]);const i=r.getUniformLocation(s,"destStart");r.gl.uniform2i(i,e[0],e[1])}}}exports.Copy2DProgram=t;
},{}],59:[function(require,module,exports) {
"use strict";function e(e){const t=document.createElement("canvas");return t.width=1,t.height=1,r(t,e)}function r(e,r){let t;const n=B.ENV.get("WEBGL_VERSION");if(2===n?t=e.getContext("webgl2",r):1===n&&(t=e.getContext("webgl",r)||e.getContext("experimental-webgl",r)),0===n||null==t)throw new Error("This browser does not support WebGL.");return t}function t(e,r){const t=r();return o(e),t}function n(e){D=e}function o(e){if(D){const r=e.getError();if(r!==e.NO_ERROR)throw new Error("WebGL Error: "+a(e,r))}}function a(e,r){switch(r){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function i(e,r){return N(e,()=>e.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function E(e,r){const n=N(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(t(e,()=>e.shaderSource(n,r)),t(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function u(e,r){const n=N(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(t(e,()=>e.shaderSource(n,r)),t(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw c(r,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}function c(e,r){const t=G.exec(r);if(null==t)return console.log(`Couldn't parse line number in error: ${r}`),void console.log(e);const n=+t[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map((e,r)=>C.rightPad((r+1).toString(),a)+e);let E=0;for(let e=0;e<i.length;e++)E=Math.max(i[e].length,E);const u=i.slice(0,n-1),c=i.slice(n-1,n),s=i.slice(n);console.log(u.join("\n")),console.log(r.split("\n")[0]),console.log(`%c ${C.rightPad(c[0],E)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(s.join("\n"))}function s(e){return N(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function f(e,r){if(t(e,()=>e.linkProgram(r)),!1===e.getProgramParameter(r,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function T(e,r){if(t(e,()=>e.validateProgram(r)),!1===e.getProgramParameter(r,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function l(e,r){const n=N(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return t(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),t(e,()=>e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)),n}function R(e,r){const n=N(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return t(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),t(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)),n}function g(e){return null!=w?w:w=t(e,()=>e.getParameter(e.MAX_TEXTURE_SIZE))}function F(){return B.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===B.ENV.get("WEBGL_VERSION")?1:4}function x(e){return N(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function A(e,r,t){const n=g(e);if(r<=0||t<=0){const e=`[${r}x${t}]`;throw new Error("Requested texture size "+e+" is invalid.")}if(r>n||t>n){const e=`[${r}x${t}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+e+" greater than WebGL maximum on this browser / GPU "+o+".")}}function b(e){return N(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function d(e,r,n,o,a,i,E,u){let c=-1;-1!==(c=null!=u&&n in u?u[n]:e.getAttribLocation(r,n))&&(t(e,()=>e.bindBuffer(e.ARRAY_BUFFER,o)),t(e,()=>e.vertexAttribPointer(c,a,e.FLOAT,!1,i,E)),t(e,()=>e.enableVertexAttribArray(c)))}function _(e,r,n){O(e,n),t(e,()=>e.activeTexture(e.TEXTURE0+n)),t(e,()=>e.bindTexture(e.TEXTURE_2D,r))}function h(e,r){O(e,r),t(e,()=>e.activeTexture(e.TEXTURE0+r)),t(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function m(e,r,t){return N(e,()=>e.getUniformLocation(r,t),'uniform "'+t+'" not present in program.')}function U(e,r,n,o,a){t(e,()=>_(e,n,a)),t(e,()=>e.uniform1i(o,a))}function L(e){t(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),t(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),t(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function S(e,r,n){t(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),t(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0))}function p(e,r){t(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,r)),t(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function M(e){const r=e.checkFramebufferStatus(e.FRAMEBUFFER);if(r!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+I(e,r))}function I(e,r){switch(r){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function N(e,r,n){const o=t(e,()=>r());if(null==o)throw new Error(n);return o}function O(e,r){const t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=r+e.TEXTURE0;if(n<e.TEXTURE0||n>t){const e=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${e}.`)}}function P(e,r){if(2!==r.length){r=C.squeezeShape(r).newShape}const t=g(e),n=C.sizeFromShape(r);return r.length<=1&&n<=t?[n,1]:2===r.length&&r[0]<=t&&r[1]<=t?r:3===r.length&&r[0]<=t&&r[1]*r[2]<=t?[r[0],r[1]*r[2]]:4===r.length&&r[0]<=t&&r[1]*r[2]*r[3]<=t?[r[0],r[1]*r[2]*r[3]]:C.sizeToSquarishShape(n)}Object.defineProperty(exports,"__esModule",{value:!0});let w=null;const B=require("../../../environment"),C=require("../../../util");exports.createWebGLRenderingContext=e,exports.createWebGLRenderingContextFromCanvas=r,exports.callAndCheck=t;let D=!1;exports.enableDebugWebGLErrorChecking=n,exports.checkWebGLError=o,exports.getWebGLErrorMessage=a,exports.getExtensionOrThrow=i,exports.createVertexShader=E,exports.createFragmentShader=u;const G=/ERROR: [0-9]+:([0-9]+):/g;exports.createProgram=s,exports.linkProgram=f,exports.validateProgram=T,exports.createStaticVertexBuffer=l,exports.createStaticIndexBuffer=R,exports.queryMaxTextureSize=g,exports.getChannelsPerTexture=F,exports.createTexture=x,exports.validateTextureSize=A,exports.createFramebuffer=b,exports.bindVertexBufferToProgramAttribute=d,exports.bindTextureUnit=_,exports.unbindTextureUnit=h,exports.getProgramUniformLocationOrThrow=m,exports.bindTextureToProgramUniformSampler=U,exports.bindCanvasToFramebuffer=L,exports.bindColorTextureToFramebuffer=S,exports.unbindColorTextureFromFramebuffer=p,exports.validateFramebuffer=M,exports.getFramebufferErrorMessage=I,exports.getTextureShapeFromLogicalShape=P;
},{"../../../environment":15,"../../../util":24}],45:[function(require,module,exports) {
"use strict";function e(){return{failIfMajorPerformanceCaveat:!0,alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1}}function t(t){const r=e();let a;return a=null!=t?g.createWebGLRenderingContextFromCanvas(t,r):g.createWebGLRenderingContext(r),g.callAndCheck(a,()=>a.disable(a.DEPTH_TEST)),g.callAndCheck(a,()=>a.disable(a.STENCIL_TEST)),g.callAndCheck(a,()=>a.disable(a.BLEND)),g.callAndCheck(a,()=>a.disable(a.DITHER)),g.callAndCheck(a,()=>a.disable(a.POLYGON_OFFSET_FILL)),g.callAndCheck(a,()=>a.disable(a.SAMPLE_COVERAGE)),g.callAndCheck(a,()=>a.enable(a.SCISSOR_TEST)),g.callAndCheck(a,()=>a.enable(a.CULL_FACE)),g.callAndCheck(a,()=>a.cullFace(a.BACK)),a}function r(e){return g.createVertexShader(e,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function a(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return g.createStaticVertexBuffer(e,t)}function n(e){const t=new Uint16Array([0,1,2,2,1,3]);return g.createStaticIndexBuffer(e,t)}function c(e,t){return F.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===F.ENV.get("WEBGL_VERSION")?4===t?e.RGBA32F:e.R32F:e.RGBA}function i(e,t){return F.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===F.ENV.get("WEBGL_VERSION")?4===t?e.RGBA:e.RED:e.RGBA}function o(e){return F.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?e.FLOAT:e.UNSIGNED_BYTE}function l(e,t,r,a){g.validateTextureSize(e,t,r);const n=g.createTexture(e),l=e.TEXTURE_2D,u=c(e,a),d=i(e,a);return g.callAndCheck(e,()=>e.bindTexture(l,n)),g.callAndCheck(e,()=>e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),g.callAndCheck(e,()=>e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),g.callAndCheck(e,()=>e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)),g.callAndCheck(e,()=>e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)),g.callAndCheck(e,()=>e.texImage2D(l,0,u,t,r,0,d,o(e),null)),g.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null)),n}function u(e,t,r){const[a,n]=k.getUnpackedMatrixTextureShapeWidthHeight(t,r);return l(e,a,n,1)}function d(e,t,r){const[a,n]=k.getColorMatrixTextureShapeWidthHeight(t,r);return l(e,a,n,4)}function A(e,t,r){const[a,n]=k.getPackedMatrixTextureShapeWidthHeight(t,r);return l(e,a,n,4)}function E(e,t,r,a){g.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),g.bindVertexBufferToProgramAttribute(e,t,"clipSpacePos",r,3,20,0,a),g.bindVertexBufferToProgramAttribute(e,t,"uv",r,2,20,12,a)}function T(e,t,r){g.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,t)),g.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)),g.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function x(e,t,r,a,n,c){const l=i(e,c);g.validateTextureSize(e,r,a),g.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,t)),g.callAndCheck(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,r,a,l,o(e),n)),g.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function s(e,t,r,a,n,c){const[i,o]=k.getUnpackedMatrixTextureShapeWidthHeight(r,a);let l;if(F.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){const e=1===c?g.getChannelsPerTexture():c;1===e?l=n:(l=new Float32Array(k.getUnpackedArraySizeFromMatrixSize(n.length,e)),k.encodeMatrixToUnpackedArray(n,l,e))}else l=k.encodeFloatArray(n);x(e,t,i,o,l,c)}function h(e,t,r,a,n){const[c,i]=k.getPackedMatrixTextureShapeWidthHeight(r,a),o=new Float32Array(k.getPackedRGBAArraySizeFromMatrixShape(r,a));k.encodeMatrixToPackedRGBA(n,r,a,o);x(e,t,c,i,o,4)}function _(e,t,r){let a;return a=F.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?new Float32Array(k.getUnpackedArraySizeFromMatrixSize(e*t,r)):new Uint8Array(e*t*r)}function f(e,t,r,a){if(F.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){const n=new Float32Array(t*r);return k.decodeMatrixFromUnpackedArray(e,n,a),n}return k.decodeToFloatArray(e)}async function R(e,t,r,a){const n=e,c=_(r,a,4),i=c instanceof Float32Array?4*c.length:c,l=e.createBuffer();return g.callAndCheck(e,()=>e.bindBuffer(n.PIXEL_PACK_BUFFER,l)),g.callAndCheck(e,()=>e.bufferData(n.PIXEL_PACK_BUFFER,i,e.STATIC_DRAW)),g.callAndCheck(e,()=>n.readPixels(0,0,a,r,e.RGBA,o(e),0)),await t.getBufferSubDataAsync(n.PIXEL_PACK_BUFFER,0,c),f(c,r,a,4)}function p(e,t,r){const[a,n]=k.getUnpackedMatrixTextureShapeWidthHeight(t,r),c=_(t,r,4);return g.callAndCheck(e,()=>e.readPixels(0,0,a,n,e.RGBA,o(e),c)),f(c,t,r,4)}function C(e,t,r,a){const n=t*r*4,c=new Uint8Array(n);g.callAndCheck(e,()=>e.readPixels(0,0,r,t,e.RGBA,e.UNSIGNED_BYTE,c));const i=new Float32Array(n);for(let e=0;e<c.length;e++)i[e]=c[e];const o=new Float32Array(t*r*a);return k.decodeMatrixFromUnpackedColorRGBAArray(i,o,a),o}function B(e,t,r){const[a,n]=k.getPackedMatrixTextureShapeWidthHeight(t,r),c=new Float32Array(k.getPackedRGBAArraySizeFromMatrixShape(t,r));g.callAndCheck(e,()=>e.readPixels(0,0,a,n,e.RGBA,o(e),c));const i=new Float32Array(t*r);return k.decodeMatrixFromPackedRGBA(c,t,r,i)}Object.defineProperty(exports,"__esModule",{value:!0});const F=require("../../../environment"),k=require("./tex_util"),g=require("./webgl_util");exports.getWebGLContextAttributes=e,exports.createWebGLContext=t,exports.createVertexShader=r,exports.createVertexBuffer=a,exports.createIndexBuffer=n,exports.createMatrixTexture=u,exports.createColorMatrixTexture=d,exports.createPackedMatrixTexture=A,exports.bindVertexProgramAttributeStreams=E,exports.uploadPixelDataToTexture=T,exports.uploadMatrixToTexture=s,exports.uploadMatrixToPackedTexture=h,exports.downloadMatrixFromOutputTextureAsync=R,exports.downloadMatrixFromOutputTexture=p,exports.downloadMatrixFromRGBAColorTexture=C,exports.downloadMatrixFromPackedOutputTexture=B;
},{"../../../environment":15,"./tex_util":54,"./webgl_util":59}],43:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../../environment"),e=require("../../../util"),r=require("./gpgpu_util"),i=require("./tex_util"),o=require("./webgl_util");class s{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.gl=null!=e?e:r.createWebGLContext(),1===t.ENV.get("WEBGL_VERSION")?(this.textureFloatExtension=o.getExtensionOrThrow(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float")):this.colorBufferFloatExtension=o.getExtensionOrThrow(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=o.getExtensionOrThrow(this.gl,"WEBGL_lose_context"),t.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&(this.getBufferSubDataAsyncExtension=this.gl.getExtension("WEBGL_get_buffer_sub_data_async")),this.vertexBuffer=r.createVertexBuffer(this.gl),this.indexBuffer=r.createIndexBuffer(this.gl),this.framebuffer=o.createFramebuffer(this.gl)}dispose(){this.throwIfDisposed(),null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;o.callAndCheck(t,()=>t.finish()),o.callAndCheck(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),o.callAndCheck(t,()=>t.deleteFramebuffer(this.framebuffer)),o.callAndCheck(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),o.callAndCheck(t,()=>t.deleteBuffer(this.vertexBuffer)),o.callAndCheck(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),o.callAndCheck(t,()=>t.deleteBuffer(this.indexBuffer)),this.loseContextExtension.loseContext(),this.disposed=!0}enableAutomaticDebugValidation(t){this.autoDebugValidate=t,o.enableDebugWebGLErrorChecking(t)}createMatrixTexture(t,e){return this.throwIfDisposed(),r.createMatrixTexture(this.gl,t,e)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),r.uploadPixelDataToTexture(this.gl,t,e)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),r.createPackedMatrixTexture(this.gl,t,e)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),o.callAndCheck(this.gl,()=>this.gl.deleteTexture(t))}uploadMatrixToTexture(t,e,i,o){this.throwIfDisposed();return r.uploadMatrixToTexture(this.gl,t,e,i,o,1)}uploadMatrixToPackedTexture(t,e,i,o){return this.throwIfDisposed(),r.uploadMatrixToPackedTexture(this.gl,t,e,i,o)}downloadMatrixFromTexture(t,e,i){return this.downloadMatrixDriver(t,()=>r.downloadMatrixFromOutputTexture(this.gl,e,i))}async downloadMatrixFromTextureAsync(t,e,i){if(null==this.getBufferSubDataAsyncExtension)throw new Error("Cannot download matrix from output texture asynchronously, WEBGL_get_buffer_sub_data_async is not enabled.");return this.downloadMatrixDriverAsync(t,()=>r.downloadMatrixFromOutputTextureAsync(this.gl,this.getBufferSubDataAsyncExtension,e,i))}downloadMatrixFromRGBAColorTexture(t,e,i,o){return this.downloadMatrixDriver(t,()=>r.downloadMatrixFromRGBAColorTexture(this.gl,e,i,o))}downloadMatrixFromPackedTexture(t,e,i){return this.downloadMatrixDriver(t,()=>r.downloadMatrixFromPackedOutputTexture(this.gl,e,i))}createProgram(t){this.throwIfDisposed();const e=this.gl,i=o.createFragmentShader(e,t),s=r.createVertexShader(e),a=o.createProgram(e);return o.callAndCheck(e,()=>e.attachShader(a,s)),o.callAndCheck(e,()=>e.attachShader(a,i)),o.linkProgram(e,a),this.autoDebugValidate&&o.validateProgram(e,a),a}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&o.callAndCheck(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,null!=this.program&&this.autoDebugValidate&&o.validateProgram(this.gl,this.program),o.callAndCheck(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,e){return this.throwIfDisposed(),o.getProgramUniformLocationOrThrow(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),o.bindTextureToProgramUniformSampler(this.gl,this.program,t,e,r)}setOutputMatrixTexture(t,e,r){this.setOutputMatrixTextureDriver(t,r,e)}setOutputPackedMatrixTexture(t,e,r){this.throwIfDisposed();const[o,s]=i.getPackedMatrixTextureShapeWidthHeight(e,r);this.setOutputMatrixTextureDriver(t,o,s)}setOutputMatrixWriteRegion(t,e,r,i){this.setOutputMatrixWriteRegionDriver(r,t,i,e)}setOutputPackedMatrixWriteRegion(t,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&o.validateProgram(this.gl,this.program),o.validateFramebuffer(this.gl)}executeProgram(t){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;r.bindVertexProgramAttributeStreams(e,this.program,this.vertexBuffer,t),this.autoDebugValidate&&this.debugValidate(),o.callAndCheck(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.finish())}runQuery(e){return 2===t.ENV.get("WEBGL_VERSION")?this.runQueryWebGL2(e):this.runQueryWebGL1(e)}runQueryWebGL2(t){const r=o.getExtensionOrThrow(this.gl,"EXT_disjoint_timer_query_webgl2"),i=this.gl.createQuery();return this.gl.beginQuery(r.TIME_ELAPSED_EXT,i),t(),this.gl.endQuery(r.TIME_ELAPSED_EXT),new Promise((t,o)=>{e.repeatedTry(()=>{const t=this.gl.getQueryParameter(i,this.gl.QUERY_RESULT_AVAILABLE),e=this.gl.getParameter(r.GPU_DISJOINT_EXT);return t&&!e}).then(()=>{const e=this.gl.getQueryParameter(i,this.gl.QUERY_RESULT);t(e/1e6)}).catch(()=>{console.warn("Disjoint query timer never available."),t(-1)})})}runQueryWebGL1(t){const r=o.getExtensionOrThrow(this.gl,"EXT_disjoint_timer_query"),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),t(),r.endQueryEXT(r.TIME_ELAPSED_EXT),new Promise((t,o)=>{e.repeatedTry(()=>{const t=r.getQueryObjectEXT(i,r.QUERY_RESULT_AVAILABLE_EXT),e=this.gl.getParameter(r.GPU_DISJOINT_EXT);return t&&!e}).then(()=>{const e=r.getQueryObjectEXT(i,r.QUERY_RESULT_EXT);t(e/1e6)}).catch(()=>{console.warn("Disjoint query timer never available."),t(-1)})})}downloadMatrixDriverSetup(t){this.throwIfDisposed(),o.bindColorTextureToFramebuffer(this.gl,t,this.framebuffer),this.autoDebugValidate&&o.validateFramebuffer(this.gl)}downloadMatrixDriverTeardown(){null!=this.outputTexture?(o.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&o.validateFramebuffer(this.gl)):o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.downloadMatrixDriverSetup(t);const r=e();return this.downloadMatrixDriverTeardown(),r}async downloadMatrixDriverAsync(t,e){this.downloadMatrixDriverSetup(t);const r=await e();return this.downloadMatrixDriverTeardown(),r}setOutputMatrixTextureDriver(t,e,r){this.throwIfDisposed();const i=this.gl;o.bindColorTextureToFramebuffer(i,t,this.framebuffer),this.autoDebugValidate&&o.validateFramebuffer(i),this.outputTexture=t,o.callAndCheck(i,()=>i.viewport(0,0,e,r)),o.callAndCheck(i,()=>i.scissor(0,0,e,r))}setOutputMatrixWriteRegionDriver(t,e,r,i){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.scissor(t,e,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}exports.GPGPUContext=s;
},{"../../../environment":15,"../../../util":24,"./gpgpu_util":45,"./tex_util":54,"./webgl_util":59}],44:[function(require,module,exports) {
"use strict";function e(){return!n.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")}function t(t,a,r,o){const n=a.userCode,u=r.map((e,t)=>{const r={logicalShape:e.array.shape,textureShape:e.texData.textureShape,textureType:e.texData.textureType};return{name:a.variableNames[t],shapeInfo:r}}),c=u.map(e=>e.shapeInfo),h={logicalShape:o.array.shape,textureShape:o.texData.textureShape,textureType:o.texData.textureType},m=s.makeShader(u,h,n,!0===a.supportsBroadcasting),x=t.createProgram(m),g={};for(let e=0;e<a.variableNames.length;e++){const r=a.variableNames[e];g[r]=t.getUniformLocation(x,r)}const l={};return i.forEach(e=>{l[e]=t.getAttributeLocation(x,e)}),e()&&(g[p]=t.getUniformLocation(x,p)),{webGLProgram:x,program:a,uniformLocations:g,attributeLocations:l,gpgpu:t,source:m,inShapeInfos:c,outShapeInfo:h}}function a(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but `+`was executed with ${t.length} inputs`);e.forEach((e,a)=>{const r=e.logicalShape,o=e.textureShape,n=t[a].array.shape,s=t[a].texData.textureShape;if(!u.arraysEqual(r,n))throw Error("Binary was compiled with different shapes than "+`the current args. Shapes ${r} and ${n} must match`);if(!u.arraysEqual(o,s))throw Error("Binary was compiled with different texture shapes than the"+` current args. Shape ${o} and ${s} must match`)})}function r(t,r,o,n){a(t.inShapeInfos,r),a([t.outShapeInfo],[o]);const u=o.texData.texture,s=o.texData.textureShape,i=t.gpgpu;i.setOutputMatrixTexture(u,s[0],s[1]),i.setProgram(t.webGLProgram),r.forEach((e,a)=>{const r=e.texData.texture,o=t.program.variableNames[a],n=t.uniformLocations[o];i.setInputMatrixTexture(r,n,a)}),e()&&i.gl.uniform1f(t.uniformLocations[p],NaN),null!=n&&n(i,t.webGLProgram),i.executeProgram(t.attributeLocations)}function o(e,t,a){let r="";t.concat(a).forEach(e=>{r+=`${e.array.shape}_${e.texData.textureShape}_${e.texData.textureType}`});const o=e.userCode,n=(!0===e.supportsBroadcasting).toString();let u=e.constructor.name;return u+="_"+n+"_"+r+"_"+o}Object.defineProperty(exports,"__esModule",{value:!0});const n=require("../../../environment"),u=require("../../../util"),s=require("./shader_compiler"),i=["uv","clipSpacePos"],p="NaN";exports.compileProgram=t,exports.runProgram=r,exports.makeShaderKey=o;
},{"../../../environment":15,"../../../util":24,"./shader_compiler":60}],47:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class n{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const t=n.filterHeight,o=n.filterWidth,e=n.strideHeight,d=n.strideWidth,i=t-1-n.padInfo.top,r=o-1-n.padInfo.left,a=t*o-1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${r});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${a} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.MaxPool2DBackpropProgram=n;
},{}],46:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../types");class n{constructor(n,e,i=t.MatrixOrientation.REGULAR,r=t.MatrixOrientation.REGULAR){this.variableNames=["matrixA","matrixB"];const a=i===t.MatrixOrientation.REGULAR?n[0]:n[1],o=r===t.MatrixOrientation.REGULAR?e[1]:e[0];this.outputShape=[a,o];const x=i===t.MatrixOrientation.REGULAR?n[1]:n[0],$=(n,e)=>i===t.MatrixOrientation.REGULAR?`aRow, ${e} + ${n}`:`${e} + ${n}, aRow`,M=(n,e)=>r===t.MatrixOrientation.REGULAR?`${e} + ${n}, bCol`:`bCol, ${e} + ${n}`,s=4*Math.floor(x/4),g=x%4;this.userCode=` float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < ${s}; i += 4) {\n        vec4 a = vec4(\n          getMatrixA(${$(0,"i")}),\n          getMatrixA(${$(1,"i")}),\n          getMatrixA(${$(2,"i")}),\n          getMatrixA(${$(3,"i")})\n        );\n        vec4 b = vec4(\n          getMatrixB(${M(0,"i")}),\n          getMatrixB(${M(1,"i")}),\n          getMatrixB(${M(2,"i")}),\n          getMatrixB(${M(3,"i")})\n        );\n\n        result += dot(a, b);\n      }\n\n      if (${1===g}) {\n        result += getMatrixA(${$(0,s)}) *\n          getMatrixB(${M(0,s)});\n      } else if (${2===g}) {\n        vec2 a = vec2(\n          getMatrixA(${$(0,s)}),\n          getMatrixA(${$(1,s)})\n        );\n        vec2 b = vec2(\n          getMatrixB(${M(0,s)}),\n          getMatrixB(${M(1,s)})\n        );\n        result += dot(a, b);\n      } else if (${3===g}) {\n        vec3 a = vec3(\n          getMatrixA(${$(0,s)}),\n          getMatrixA(${$(1,s)}),\n          getMatrixA(${$(2,s)})\n        );\n        vec3 b = vec3(\n          getMatrixB(${M(0,s)}),\n          getMatrixB(${M(1,s)}),\n          getMatrixB(${M(2,s)})\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    `}}exports.MatMulProgram=n;
},{"../../types":19}],48:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(n,"seed")),e.gl.uniform1f(this.seedLoc,t)}}}exports.MultinomialProgram=t;
},{}],49:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(e,t,o,s){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${s}), float(${o}),\n                      float(index == coords.y)));\n      }\n    `}getCustomSetupFunc(e){return(t,o)=>{null==this.seedLoc&&(this.seedLoc=t.getUniformLocation(o,"seed")),t.gl.uniform1f(this.seedLoc,e)}}}exports.OneHotProgram=e;
},{}],50:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class n{constructor(n,e,t){if(this.variableNames=["x"],"avg"===e&&t)throw new Error("Cannot compute positions for average pool.");const i=n.filterHeight,a=n.filterWidth,o=n.strideHeight,u=n.strideWidth,r=n.padInfo.top,l=n.padInfo.left;this.outputShape=n.outShape;const x="avg"===e;let s="0.0";if(x||(s="min"===e?"1.0 / 0.0":"-1.0 / 0.0"),t){const t="min"===e?"<=":">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${o}, ${u});\n        const ivec2 pads = ivec2(${r}, ${l});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${i}; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${a}; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              if (isNaN(value)) {\n                setOutput(value);\n                return;\n              }\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * ${a} + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const c="min"===e?"min":"max";let d=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(d=`avgValue / ${i*a}.0`);const C=4*Math.floor(a/4),v=a%4,R=`\n      if (hasNaN(values)) {\n        setOutput(getNaN(values));\n        return;\n      }\n      if (${x}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${c}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${u});\n      const ivec2 pads = ivec2(${r}, ${l});\n      const float initializationValue = ${s};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${s});\n        float avgValue = 0.0;\n\n        for (int wR = 0; wR < ${i}; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${C}; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            ${R}\n          }\n\n          int xC = xCCorner + ${C};\n          if (${1===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n            ${R}\n          } else if (${2===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${R}\n          } else if (${3===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            ${R}\n          }\n        }\n        setOutput(${d});\n      }\n    `}}exports.Pool2DProgram=n;
},{}],51:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class n{constructor(n,e){this.variableNames=["x"];const i=n.windowSize,t=n.batchSize,a=n.inSize,u=Math.ceil(a/i);this.outputShape=[t,u];const l="sum"===e;let s="0.0";l||(s="min"===e?"1.0 / 0.0":"-1.0 / 0.0");const o="min"===e?"min":"max";let c=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e&&(c="sumValue");const d=4*Math.floor(i/4),x=i%4,V=`\n      if (${l}) {\n        sumValue += dot(values, ones);\n      } else {\n        if (hasNaN(values)) {\n          setOutput(getNaN(values));\n          return;\n        }\n        minMaxValue = ${o}(values, minMaxValue);\n      }\n    `;let v="";a%i>0&&(v=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${v}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        vec4 minMaxValue = vec4(${s});\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${d}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${V}\n        }\n\n        int inIdx = inOffset + ${d};\n        if (${1===x}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n          ${V}\n        } else if (${2===x}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n          ${V}\n        } else if (${3===x}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n          ${V}\n        }\n        setOutput(${c});\n      }\n    `}}exports.ReduceProgram=n;
},{}],52:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,e,o){this.variableNames=["A"],this.outputShape=[];const n=t[2];this.outputShape=[e[0],e[1],n];const c=o?[t[0]-1,t[1]-1,n]:t,r=o?[this.outputShape[0]-1,this.outputShape[1]-1,n]:this.outputShape;this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/r[0]},\n          ${c[1]/r[1]});\n      const vec2 inputShapeRC = vec2(${t[0]}.0, ${t[1]}.0);\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        ivec2 yRC = coords.xy;\n        int d = coords.z;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeBilinear3DProgram=t;
},{}],53:[function(require,module,exports) {
"use strict";function t(t){if(1===t)return"sourceLoc";if(2===t)return"sourceLoc.x, sourceLoc.y";if(3===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error(`Slicing for rank ${t} is not yet supported`)}Object.defineProperty(exports,"__esModule",{value:!0});const r=require("./shader_compiler");class o{constructor(o){this.variableNames=["source"],this.outputShape=o,this.rank=o.length;const s=r.getCoordsDataType(this.rank),e=t(this.rank);this.userCode=`\n      uniform ${s} start;\n\n      void main() {\n        ${s} sourceLoc = start + getOutputCoords();\n        setOutput(getSource(${e}));\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${t.length})`);return(r,o)=>{if(null!=this.startLoc||(this.startLoc=r.getUniformLocationNoThrow(o,"start"),null!=this.startLoc))if(1===this.rank)r.gl.uniform1i(this.startLoc,t[0]);else if(2===this.rank)r.gl.uniform2i(this.startLoc,t[0],t[1]);else if(3===this.rank)r.gl.uniform3i(this.startLoc,t[0],t[1],t[2]);else{if(4!==this.rank)throw Error(`Slicing for rank ${this.rank} is not yet supported`);r.gl.uniform4i(this.startLoc,t[0],t[1],t[2],t[3])}}}}exports.SliceProgram=o;
},{"./shader_compiler":60}],55:[function(require,module,exports) {
"use strict";function e(e){return`${e[0]}_${e[1]}`}Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextureCount={}}acquireTexture(t){const s=e(t);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextureCount||(this.usedTextureCount[s]=0),this.usedTextureCount[s]++,this.freeTextures[s].length>0)return this.numFreeTextures--,this.numUsedTextures++,this.log(),this.freeTextures[s].shift();this.numUsedTextures++,this.log();return this.gpgpu.createMatrixTexture(t[0],t[1])}releaseTexture(t,s){const r=e(s);r in this.freeTextures||(this.freeTextures[r]=[]),this.freeTextures[r].push(t),this.numFreeTextures++,this.numUsedTextures--,this.usedTextureCount[r]--,this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`)}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){for(const e of Object.keys(this.freeTextures))for(const t of this.freeTextures[e])this.gpgpu.deleteMatrixTexture(t);this.freeTextures=null,this.usedTextureCount=null,this.numUsedTextures=0,this.numFreeTextures=0}}exports.TextureManager=t;
},{}],56:[function(require,module,exports) {
"use strict";function e(e){const t=e.length;if(t>4)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const r=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let t=0;t<e.length;t++)s.push(`imod(${r[t]}, ${e[t]})`);return s.join()}Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./shader_compiler");class r{constructor(r,s){this.variableNames=["A"];const o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[e]*s[e];this.outputShape=o,this.rank=o.length;const n=t.getCoordsDataType(this.rank),i=e(r);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}exports.TileProgram=r;
},{"./shader_compiler":60}],57:[function(require,module,exports) {
"use strict";function e(e){const t=e.length;if(t>4)throw Error(`Transpose for rank ${t} is not yet supported`);const r=["resRC.x","resRC.y","resRC.z","resRC.w"],s=new Array(t);for(let t=0;t<e.length;t++)s[e[t]]=r[t];return s.join()}Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./shader_compiler");class r{constructor(r,s){this.variableNames=["A"];const o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[s[e]];this.outputShape=o,this.rank=o.length;const n=t.getCoordsDataType(this.rank),a=e(s);this.userCode=`\n    void main() {\n      ${n} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}exports.TransposeProgram=r;
},{"./shader_compiler":60}],58:[function(require,module,exports) {
"use strict";function n(n){return`\n    return (x >= 0.0) ? x : ${n} * x;\n  `}function r(n=0){return t+`\n    return x > 0.0 ? 1.0 : float(${n});\n  `}Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(n,r){this.variableNames=["A"],this.outputShape=n,this.userCode=`\n      float unaryOperation(float x) {\n        ${r}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpProgram=e;const t="\n  if (isNaN(x)) return x;\n";exports.ABS="\n  return abs(x);\n",exports.RELU=t+"\n  return (x < 0.0) ? 0.0 : x;\n",exports.ELU="\n  return (x >= 0.0) ? x : (exp(x) - 1.0);\n",exports.ELU_DER="\n  return (x >= 0.0) ? 1.0 : exp(x);\n",exports.SELU="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768599402175208123;\n  float scale = 1.0507009873554804934193349852946;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",exports.LEAKY_RELU=n,exports.STEP=r,exports.NEG="\n  return -x;\n",exports.CEIL="\n  return ceil(x);\n",exports.FLOOR="\n  return floor(x);\n",exports.EXP="\n  return exp(x);\n",exports.LOG="\n  return log(x);\n",exports.SQRT=t+"\n  return sqrt(x);\n",exports.SIGMOID="\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",exports.SIN=t+"\n  return sin(x);\n",exports.COS=t+"\n  return cos(x);\n",exports.TAN="\n  return tan(x);\n",exports.ASIN=t+"\n  return asin(x);\n",exports.ACOS=t+"\n  return acos(x);\n",exports.ATAN=t+"\n  return atan(x);\n",exports.SINH="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",exports.COSH="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",exports.TANH="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",exports.SQUARE="\n  return x * x;\n",exports.TO_INT="\n  return float(int(x));\n";
},{}],21:[function(require,module,exports) {
"use strict";function e(e,t){if("float32"===t)return e;if("int32"===t||"bool"===t){const r="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let a=0;a<r.length;++a){let s=e[a];s=isNaN(s)?n.getNaN(t):Math.round(s),r[a]=s}return r}throw new Error(`Unknown dtype ${t}`)}function t(e,t){if(e instanceof Float32Array)return e;{const r=new Float32Array(e.length);for(let a=0;a<r.length;a++){const s=e[a];r[a]=n.isValNaN(s,t)?NaN:s}return r}}Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../../environment"),n=require("../../util"),a=require("../axis_util"),s=require("../ndarray"),u=require("../reduce_util"),o=require("../types"),i=require("../types"),p=require("./webgl/argminmax_gpu"),h=require("./webgl/batchnorm_gpu"),l=require("./webgl/binaryop_gpu"),c=require("./webgl/binaryop_gpu"),m=require("./webgl/clip_gpu"),g=require("./webgl/concat_gpu"),d=require("./webgl/conv_backprop_gpu"),w=require("./webgl/conv_gpu"),y=require("./webgl/conv_gpu_depthwise"),A=require("./webgl/copy_gpu"),x=require("./webgl/gpgpu_context"),P=require("./webgl/gpgpu_math"),D=require("./webgl/gpgpu_util"),R=require("./webgl/max_pool_backprop_gpu"),O=require("./webgl/mulmat_gpu"),S=require("./webgl/multinomial_gpu"),E=require("./webgl/onehot_gpu"),b=require("./webgl/pool_gpu"),T=require("./webgl/reduce_gpu"),U=require("./webgl/resize_bilinear_gpu"),_=require("./webgl/slice_gpu"),N=require("./webgl/tex_util"),C=require("./webgl/texture_manager"),I=require("./webgl/tile_gpu"),M=require("./webgl/transpose_gpu"),f=require("./webgl/unaryop_gpu"),q=require("./webgl/unaryop_gpu"),B=require("./webgl/webgl_util");class L{constructor(e){if(this.gpgpu=e,this.texData=new WeakMap,this.binaryCache={},r.ENV.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");if(null==e){const e=D.createWebGLContext();this.gpgpu=new x.GPGPUContext(e),this.gpgpuCreatedLocally=!0}else this.gpgpuCreatedLocally=!1;"undefined"!=typeof document&&(this.canvas=document.createElement("canvas")),this.textureManager=new C.TextureManager(this.gpgpu)}register(e,t,r){if(this.texData.has(e))throw new Error(`data id ${e} already registered`);this.texData.set(e,{shape:t,dtype:r,values:null,texture:null,textureShape:null,textureType:null})}writePixels(e,t,r){if(null==t)throw new Error("MathBackendWebGL.writePixels(): pixels can not be null");this.throwIfNoData(e);const n=[t.height,t.width],a=this.texData.get(e).texture||this.textureManager.acquireTexture(n),{shape:s}=this.texData.get(e);if(this.texData.set(e,{shape:s,dtype:"int32",values:null,texture:a,textureShape:n,textureType:N.TextureType.RGBA_COLOR,numChannels:r}),t instanceof HTMLVideoElement){if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height),t=this.canvas}this.gpgpu.uploadPixelDataToTexture(a,t)}write(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(e);const{texture:r,textureShape:n}=this.texData.get(e);null!=r&&(this.textureManager.releaseTexture(r,n),Object.assign(this.texData.get(e),{texture:null,textureShape:null,textureType:null})),this.texData.get(e).values=t}readSync(e){this.throwIfNoData(e);const{texture:t,values:r,textureType:n,textureShape:a,numChannels:s}=this.texData.get(e);if(null!=r)return this.cacheOnCPU(e),r;let u;return u=n===N.TextureType.DEFAULT?this.gpgpu.downloadMatrixFromTexture(t,a[0],a[1]):this.gpgpu.downloadMatrixFromRGBAColorTexture(t,a[0],a[1],s),this.cacheOnCPU(e,u),this.texData.get(e).values}async read(e){this.throwIfNoData(e);const{texture:t,values:n,textureType:a,textureShape:s}=this.texData.get(e);if(null!=n)return this.cacheOnCPU(e),n;if(r.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&a===N.TextureType.DEFAULT){const r=await this.gpgpu.downloadMatrixFromTextureAsync(t,s[0],s[1]);return this.cacheOnCPU(e,r),this.texData.get(e).values}return r.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED")?(await this.gpgpu.runQuery(()=>{}),this.readSync(e)):this.readSync(e)}async time(e){if(!r.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED")){const t=performance.now(),r=e();return await r.data(),performance.now()-t}return this.gpgpu.runQuery(e)}disposeData(e){if(this.texData.has(e)){const{texture:t,textureShape:r}=this.texData.get(e);null!=t&&this.textureManager.releaseTexture(t,r),this.texData.delete(e)}}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getTextureData(e){return this.uploadToGPU(e),this.texData.get(e)}getGPGPUContext(){return this.gpgpu}clone(e){this.throwIfNoData(e.dataId),this.uploadToGPU(e.dataId);const{textureShape:t}=this.texData.get(e.dataId),r=e.as2D(t[0],t[1]),n=this.makeOutputArray(t,e.dtype);return this.copy2D(r,[0,0],t,n,[0,0],t),n.reshape(e.shape)}slice1D(e,t,r){const n=new _.SliceProgram([r]),a=n.getCustomSetupFunc([t]);return this.compileAndRun(n,[e],null,a)}slice2D(e,t,r){const n=new _.SliceProgram(r),a=n.getCustomSetupFunc(t);return this.compileAndRun(n,[e],null,a)}slice3D(e,t,r){const n=new _.SliceProgram(r),a=n.getCustomSetupFunc(t);return this.compileAndRun(n,[e],null,a)}slice4D(e,t,r){const n=new _.SliceProgram(r),a=n.getCustomSetupFunc(t);return this.compileAndRun(n,[e],null,a)}copy2D(e,t,r,n,a,s){const u=new A.Copy2DProgram(r[1],s[1]),o=u.getCustomSetupFunc(t,a,s);this.compileAndRun(u,[e],n,o)}concat1D(e,t){const r=new g.ConcatProgram(e.shape,t.shape,0);return this.compileAndRun(r,[e,t])}concat2D(e,t,r){const n=new g.ConcatProgram(e.shape,t.shape,r);return this.compileAndRun(n,[e,t])}concat3D(e,t,r){const n=new g.ConcatProgram(e.shape,t.shape,r);return this.compileAndRun(n,[e,t])}concat4D(e,t,r){const n=new g.ConcatProgram(e.shape,t.shape,r);return this.compileAndRun(n,[e,t])}neg(e){const t=new q.UnaryOpProgram(e.shape,f.NEG);return this.compileAndRun(t,[e])}matMul(e,t,r,n){const a=new O.MatMulProgram(e.shape,t.shape,r,n);return this.compileAndRun(a,[e,t])}multiply(e,t){const r=new c.BinaryOpProgram(l.MUL,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,o.upcastType(e.dtype,t.dtype));return this.compileAndRun(r,[e,t],n)}batchNormalization2D(e,t,r,n,a,s){const u=[e,t,r];let o=null;null!=s&&(o=s.shape,u.push(s));let i=null;null!=a&&(i=a.shape,u.push(a));const p=new h.BatchNormProgram(e.shape,t.shape,r.shape,o,i,n);return this.compileAndRun(p,u)}batchNormalization3D(e,t,r,n,a,s){const u=[e,t,r];let o=null;null!=s&&(o=s.shape,u.push(s));let i=null;null!=a&&(i=a.shape,u.push(a));const p=new h.BatchNormProgram(e.shape,t.shape,r.shape,o,i,n);return this.compileAndRun(p,u)}batchNormalization4D(e,t,r,n,a,s){const u=[e,t,r];let o=null;null!=s&&(o=s.shape,u.push(s));let i=null;null!=a&&(i=a.shape,u.push(a));const p=new h.BatchNormProgram(e.shape,t.shape,r.shape,o,i,n);return this.compileAndRun(p,u)}tile(e,t){const r=new I.TileProgram(e.shape,t);return this.compileAndRun(r,[e])}transpose(e,t){const r=new M.TransposeProgram(e.shape,t);return this.compileAndRun(r,[e])}reduce(e,t,r){const n=e.shape[0],a=e.shape[1],s={windowSize:u.computeOptimalWindowSize(a),inSize:a,batchSize:n},o=new T.ReduceProgram(s,t),[i,p]=o.outputShape,h=this.makeOutputArray(o.outputShape,r).as2D(i,p);return this.compileAndRun(o,[e],h),1===h.shape[1]?h:this.reduce(h,t,r)}argReduce(e,t,r=null){let n=e.shape[0],a=e.shape[1];null!=r&&(n=r.shape[0],a=r.shape[1]);const s={windowSize:u.computeOptimalWindowSize(a),inSize:a,batchSize:n},o=new p.ArgMinMaxProgram(s,t,null==r),[i,h]=o.outputShape,l=this.makeOutputArray(o.outputShape,"int32").as2D(i,h),c=[e];return null!=r&&c.push(r),this.compileAndRun(o,c,l),1===l.shape[1]?l:this.argReduce(e,t,l)}sum(e,t){a.assertAxesAreInnerMostDims("sum",t,e.rank);const[r,s]=a.computeOutAndReduceShapes(e.shape,t),u=n.sizeFromShape(s),o=e.as2D(-1,u),p=i.SumTypesMap[e.dtype];return this.reduce(o,"sum",p).reshape(r)}argMin(e,t){a.assertAxesAreInnerMostDims("argMin",t,e.rank);const[r,s]=a.computeOutAndReduceShapes(e.shape,t),u=n.sizeFromShape(s),o=e.as2D(-1,u);return this.argReduce(o,"min").reshape(r)}argMax(e,t){a.assertAxesAreInnerMostDims("argMax",t,e.rank);const[r,s]=a.computeOutAndReduceShapes(e.shape,t),u=n.sizeFromShape(s),o=e.as2D(-1,u);return this.argReduce(o,"max").reshape(r)}equal(e,t){const r=new c.BinaryOpProgram(l.EQUAL,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,t],n)}notEqual(e,t){const r=new c.BinaryOpProgram(l.NOT_EQUAL,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,t],n)}greater(e,t){const r=new c.BinaryOpProgram(l.GREATER,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,t],n)}greaterEqual(e,t){const r=new c.BinaryOpProgram(l.GREATER_EQUAL,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,t],n)}less(e,t){const r=new c.BinaryOpProgram(l.LESS,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,t],n)}lessEqual(e,t){const r=new c.BinaryOpProgram(l.LESS_EQUAL,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,t],n)}select(e,t,r){throw new Error("select GPU not yet implemented!")}topKValues(e,t){throw new Error("topKValues GPU not yet implemented!")}topKIndices(e,t){throw new Error("topKIndices GPU not yet implemented!")}min(e,t){a.assertAxesAreInnerMostDims("min",t,e.rank);const[r,s]=a.computeOutAndReduceShapes(e.shape,t),u=n.sizeFromShape(s),o=e.as2D(-1,u);return this.reduce(o,"min",o.dtype).reshape(r)}minimum(e,t){const r=new c.BinaryOpProgram(l.MIN,e.shape,t.shape);return this.compileAndRun(r,[e,t])}max(e,t){a.assertAxesAreInnerMostDims("max",t,e.rank);const[r,s]=a.computeOutAndReduceShapes(e.shape,t),u=n.sizeFromShape(s),o=e.as2D(-1,u);return this.reduce(o,"max",o.dtype).reshape(r)}maximum(e,t){const r=new c.BinaryOpProgram(l.MAX,e.shape,t.shape);return this.compileAndRun(r,[e,t])}divide(e,t){const r=new c.BinaryOpProgram(l.DIV,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e,t],n)}add(e,t){const r=new c.BinaryOpProgram(l.ADD,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,o.upcastType(e.dtype,t.dtype));return this.compileAndRun(r,[e,t],n)}subtract(e,t){const r=new c.BinaryOpProgram(l.SUB,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,o.upcastType(e.dtype,t.dtype));return this.compileAndRun(r,[e,t],n)}pow(e,t){const r=new c.BinaryOpProgram(l.POW,e.shape,t.shape),n=this.makeOutputArray(r.outputShape,o.upcastType(e.dtype,t.dtype));return this.compileAndRun(r,[e,t],n)}ceil(e){const t=new q.UnaryOpProgram(e.shape,f.CEIL);return this.compileAndRun(t,[e])}floor(e){const t=new q.UnaryOpProgram(e.shape,f.FLOOR);return this.compileAndRun(t,[e])}exp(e){const t=new q.UnaryOpProgram(e.shape,f.EXP);return this.compileAndRun(t,[e])}log(e){const t=new q.UnaryOpProgram(e.shape,f.LOG);return this.compileAndRun(t,[e])}sqrt(e){const t=new q.UnaryOpProgram(e.shape,f.SQRT);return this.compileAndRun(t,[e])}square(e){const t=new q.UnaryOpProgram(e.shape,f.SQUARE);return this.compileAndRun(t,[e])}relu(e){const t=new q.UnaryOpProgram(e.shape,f.RELU);return this.compileAndRun(t,[e])}elu(e){const t=new q.UnaryOpProgram(e.shape,f.ELU);return this.compileAndRun(t,[e])}eluDer(e){const t=new q.UnaryOpProgram(e.shape,f.ELU_DER);return this.compileAndRun(t,[e])}selu(e){const t=new q.UnaryOpProgram(e.shape,f.SELU);return this.compileAndRun(t,[e])}leakyRelu(e,t){const r=new q.UnaryOpProgram(e.shape,f.LEAKY_RELU(t));return this.compileAndRun(r,[e])}prelu(e,t){const r=new c.BinaryOpProgram(l.PRELU,e.shape,t.shape);return this.compileAndRun(r,[e,t])}preluDer(e,t){const r=new c.BinaryOpProgram(l.PRELU_DER,e.shape,t.shape);return this.compileAndRun(r,[e,t])}int(e){const t=new q.UnaryOpProgram(e.shape,f.TO_INT),r=this.makeOutputArray(t.outputShape,"int32");return this.compileAndRun(t,[e],r)}clip(e,t,r){const n=new m.ClipProgram(e.shape,t,r);return this.compileAndRun(n,[e])}abs(e){const t=new q.UnaryOpProgram(e.shape,f.ABS);return this.compileAndRun(t,[e])}sigmoid(e){const t=new q.UnaryOpProgram(e.shape,f.SIGMOID);return this.compileAndRun(t,[e])}sin(e){const t=new q.UnaryOpProgram(e.shape,f.SIN);return this.compileAndRun(t,[e])}cos(e){const t=new q.UnaryOpProgram(e.shape,f.COS);return this.compileAndRun(t,[e])}tan(e){const t=new q.UnaryOpProgram(e.shape,f.TAN);return this.compileAndRun(t,[e])}asin(e){const t=new q.UnaryOpProgram(e.shape,f.ASIN);return this.compileAndRun(t,[e])}acos(e){const t=new q.UnaryOpProgram(e.shape,f.ACOS);return this.compileAndRun(t,[e])}atan(e){const t=new q.UnaryOpProgram(e.shape,f.ATAN);return this.compileAndRun(t,[e])}sinh(e){const t=new q.UnaryOpProgram(e.shape,f.SINH);return this.compileAndRun(t,[e])}cosh(e){const t=new q.UnaryOpProgram(e.shape,f.COSH);return this.compileAndRun(t,[e])}tanh(e){const t=new q.UnaryOpProgram(e.shape,f.TANH);return this.compileAndRun(t,[e])}step(e,t){const r=new q.UnaryOpProgram(e.shape,f.STEP(t));return this.compileAndRun(r,[e])}conv2d(e,t,r,n){const a=new w.Conv2DProgram(n,null!=r),s=null!=r?[e,t,r]:[e,t];return this.compileAndRun(a,s)}conv2dDerInput(e,t,r){const n=new d.Conv2DDerInputProgram(r);return this.compileAndRun(n,[e,t])}conv2dDerFilter(e,t,r){const n=new d.Conv2DDerFilterProgram(r);return this.compileAndRun(n,[e,t])}conv2dDerBias(e){const t=new d.Conv2DDerBiasProgram(e.shape);return this.compileAndRun(t,[e])}depthwiseConv2D(e,t,r){const n=new y.DepthwiseConv2DProgram(r);return this.compileAndRun(n,[e,t])}maxPool(e,t){const r=new b.Pool2DProgram(t,"max",!1);return this.compileAndRun(r,[e])}minPool(e,t){const r=new b.Pool2DProgram(t,"min",!1);return this.compileAndRun(r,[e])}avgPool(e,t){const r=new b.Pool2DProgram(t,"avg",!1);return this.compileAndRun(r,[e])}maxPoolBackprop(e,t,r){const n=new b.Pool2DProgram(r,"max",!0),a=this.compileAndRun(n,[t]),s=new R.MaxPool2DBackpropProgram(r),u=this.compileAndRun(s,[e,a]);return a.dispose(),u}resizeBilinear3D(e,t,r){const n=new U.ResizeBilinear3DProgram(e.shape,t,r);return this.compileAndRun(n,[e])}multinomial(e,t,r){const n=e.shape[0],a=e.shape[1],s=new S.MultinomialProgram(n,a,t),u=this.makeOutputArray(s.outputShape,"int32"),o=s.getCustomSetupFunc(r);return this.compileAndRun(s,[e],u,o)}oneHot(e,t,r,n){const a=new E.OneHotProgram(e.size,t,r,n);return this.compileAndRun(a,[e])}setDiag(e,t){throw new Error("setDiag GPU not yet implemented!")}makeOutputArray(e,t){return s.NDArray.make(e,{},t)}compileAndRun(e,t,r,n){null==r&&(r=this.makeOutputArray(e.outputShape,t[0].dtype));const a=t.map(e=>(this.uploadToGPU(e.dataId),{array:e,texData:this.texData.get(e.dataId)}));this.uploadToGPU(r.dataId);const s={array:r,texData:this.texData.get(r.dataId)},u=P.makeShaderKey(e,a,s),o=this.getAndSaveBinary(u,()=>P.compileProgram(this.gpgpu,e,a,s));return P.runProgram(o,a,s,n),r}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){for(const e in this.binaryCache)this.binaryCache.hasOwnProperty(e)&&this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram);this.textureManager.dispose(),this.gpgpuCreatedLocally&&this.gpgpu.dispose()}throwIfNoData(e){if(!this.texData.has(e))throw new Error(`No data found for NDArray with data id ${e}. `+"Use dl.ENV.math instead of constructing your own NDArrayMath. If you need to construct your own math, make sure this array is allocated after the math construction")}uploadToGPU(e){this.throwIfNoData(e);const{shape:r,values:n,texture:a,dtype:s}=this.texData.get(e);if(null!=a)return;const u=B.getTextureShapeFromLogicalShape(this.gpgpu.gl,r);this.texData.get(e).textureType=N.TextureType.DEFAULT,this.texData.get(e).textureShape=u;const o=this.textureManager.acquireTexture(u);this.texData.get(e).texture=o,null!=n&&this.gpgpu.uploadMatrixToTexture(o,u[0],u[1],t(n,s))}cacheOnCPU(t,r){const{texture:n,textureShape:a,dtype:s}=this.texData.get(t);null!=n&&(this.textureManager.releaseTexture(n,a),Object.assign(this.texData.get(t),{texture:null,textureShape:null,textureType:null})),null!=r&&(this.texData.get(t).values=e(r,s))}}exports.MathBackendWebGL=L,r.ENV.registerBackend("webgl",()=>new L);
},{"../../environment":15,"../../util":24,"../axis_util":28,"../ndarray":17,"../reduce_util":33,"../types":19,"./webgl/argminmax_gpu":35,"./webgl/batchnorm_gpu":34,"./webgl/binaryop_gpu":36,"./webgl/clip_gpu":37,"./webgl/concat_gpu":38,"./webgl/conv_backprop_gpu":39,"./webgl/conv_gpu":40,"./webgl/conv_gpu_depthwise":41,"./webgl/copy_gpu":42,"./webgl/gpgpu_context":43,"./webgl/gpgpu_math":44,"./webgl/gpgpu_util":45,"./webgl/max_pool_backprop_gpu":47,"./webgl/mulmat_gpu":46,"./webgl/multinomial_gpu":48,"./webgl/onehot_gpu":49,"./webgl/pool_gpu":50,"./webgl/reduce_gpu":51,"./webgl/resize_bilinear_gpu":52,"./webgl/slice_gpu":53,"./webgl/tex_util":54,"./webgl/texture_manager":55,"./webgl/tile_gpu":56,"./webgl/transpose_gpu":57,"./webgl/unaryop_gpu":58,"./webgl/webgl_util":59}],8:[function(require,module,exports) {
"use strict";function r(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Int32Array}function t(r){if(r instanceof Int32Array)return"int32";if(r instanceof Float32Array)return"float32";if(r instanceof Uint8Array)return"uint8";throw new Error("Unsupported TypedArray flavor")}function e(r,t="float32"){switch(t){case"bool":return new Uint8Array(r);case"float32":return new Float32Array(r);case"int32":return new Int32Array(r);case"uint8":return new Uint8Array(r);default:throw new Error("Not implemented")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isTypedArray=r,exports.getDType=t,exports.makeTypedArray=e;
},{}],11:[function(require,module,exports) {
"use strict";function e(e,t){return e.toFixed(t).replace(/0+$/,"").split(".",2)}function t(e,t,r){const n=o.getDType(t);let l=0,s=0;for(let e=0;e<t.length;e++){const[n,o]=t[e].toFixed(r).replace(/0+$/,"").split(".",2);l<n.length&&(l=n.length),s<o.length&&(s=o.length)}return{precision:r,dtype:n,maxBefore:l,maxAfter:s}}function r(t,r){switch(r.dtype){case"int32":case"uint8":return""+t;case"float32":const[n,o]=e(t,r.precision),l=1+r.maxBefore-n.length,s=r.maxAfter-o.length;return" ".repeat(l)+n+"."+o+" ".repeat(s);default:throw new Error("Bad dtype.")}}function n(e,n){let o;const l=t(e,n,3);switch(e.length){case 0:return r(n[0],l);case 1:o="[";for(let t=0;t<e[0];t++)o+=0===t?"":", ",o+=r(n[t],l);return o+="]";case 2:let t=1;for(let o=0;o<e[0];o++)for(let s=0;s<e[1];s++){const c=r(n[o*e[1]+s],l);c.length>t&&(t=c.length)}o="[";for(let s=0;s<e[0];s++){o+=0===s?"[":"\n [";for(let c=0;c<e[1];c++){const a=r(n[s*e[1]+c],l);o+=0===c?"":", ",o+=a.padStart(t)}o+="]",s!==e[0]-1&&(o+=",")}return o+="]";default:return"Tensor(["+e+"])"}}Object.defineProperty(exports,"__esModule",{value:!0});const o=require("./types");exports.toString=n;
},{"./types":8}],3:[function(require,module,exports) {
"use strict";function t(t){const o=t.inputIds.toString(),e=t.outputIds.toString();return`${t.name}(${t.oid}) in ${o} out ${e}`}function o(t,o){const e=n(t,o);return function(...t){return e(...t)[0]}}function e(t,o){return function(e){if(i(),o)for(const t of o)a(e.get(t));else e.forEach((t,o)=>a(t));let n=t(e);n=h.convert(n);const s=[],r=[];e.forEach((t,o)=>{s.push(o),r.push(t)});const c=p(n,r);g.assert(c.length===s.length);const u=new l.Params;for(let t=0;t<s.length;++t){const o=s[t];u.set(o,c[t])}return[u,n]}}function n(t,o){return function(...e){i();const n=e.map(t=>h.convert(t));if(null==o)for(const t of n)a(t);else for(const t of o)a(n[t]);let s=t.apply(null,n);return s=h.convert(s),[p(s,n),s]}}function s(t,o=0){const e=n(t,[o]);return function(...t){return e(...t)[0][0]}}function r(t,o=0){const e=n(t,[o]);return function(...t){const[o,n]=e(...t);return[o[0],n]}}function p(o,e){const n=u(),s=[],r=new Set(e.map(t=>t.id)),[p,i,a]=c(o,n,r);g.log("usageCounts",p),g.log("opMissingTensor",i);const d=n.tensorToOp.get(o.id);d&&s.push(d);const O=new m;for(O.append(o.id,o.onesLike());s.length>0;){const o=s.pop(),e=a.get(o);g.assertEqual(e.outputIds.length,1);const c=O.aggregate(e.outputIds[0]);g.log("backprop",t(e)),g.log("- outGrad %s",c.shape,c.device);const u=f.getBackwardFuncs(e.name).map((t,o)=>{if(t)return t(c,...e.savedForBackward||[]);{const t=e.inputShapeDTypes[o],n=h.convert(0,{dtype:t[1],device:c.device});return l.fill(n,t[0])}});g.log("- inGrad",u.map(t=>t?[t.device,t.shape]:null));for(let t=0;t<e.inputIds.length;t++){const o=e.inputIds[t];if(null!==o&&null!=u[t]){if(g.assert(null!=u[t],`inGrads[${t}] = null but tid = ${o}`),O.append(o,u[t]),p.get(o)>0&&(p.dec(o),n.tensorToOp.has(o)&&0===p.get(o)&&!r.has(o))){const t=n.tensorToOp.get(o);t>0&&i.get(t)>0&&(i.dec(t),0===i.get(t)&&s.push(t))}}else g.log("- null inGrad[%d] ",t,u[t],"tid",o)}}const T=[];for(const t of e){const o=O.aggregate(t.id);g.log("- result",t.id,o.shape,o.device),T.push(o)}return T}function c(t,o,e){const n=[t.id],s=new Map,r=new g.CounterMap;for(;n.length>0;){const t=n.pop(),p=o.tensorToOp.get(t);if(void 0===p||p<0||s.has(p))continue;const c=o.oidLookup.get(p);s.set(p,c);for(const t of c.inputIds)r.inc(t),1===r.get(t)&&o.tensorToOp.has(t)&&!e.has(t)&&n.push(t)}const p=new g.CounterMap;for(const t of r.keys())if(o.tensorToOp.has(t)&&o.tensorToOp.get(t)>0){const e=o.tensorToOp.get(t);p.inc(e)}return[r,p,s]}function i(){O.push(new T)}function u(){return O.pop()}function a(t){for(const o of O)o.watch(t)}function d(t){for(const o of O)o.recordOp(t)}Object.defineProperty(exports,"__esModule",{value:!0});const l=require("./api"),f=require("./ops"),h=require("./tensor"),g=require("./util"),O=[];class T{constructor(){this.tensorToOp=new Map,this.oidLookup=new Map}shouldRecord(t){for(const o of t)if(this.tensorToOp.has(o))return!0;return!1}watch(t){const o=t.id;this.tensorToOp.has(o)||this.tensorToOp.set(o,-1),g.log("- watch tensor id",o,t.device)}recordOp(o){if(this.shouldRecord(o.inputIds)){g.log("recordOp %s",t(o));for(const t of o.outputIds)this.tensorToOp.set(t,o.oid);this.oidLookup.set(o.oid,o)}}}exports.Tape=T,exports.multigrad=o,exports.gradParams=e,exports.multigradAndVal=n,exports.grad=s,exports.gradAndVal=r,exports.pushNewTape=i,exports.popTape=u,exports.recordOp=d;class m{constructor(){this.map=new Map}append(t,o){g.log("- GradientCollector append",t,o.shape,o.device),this.map.has(t)?this.map.get(t).push(o):this.map.set(t,[o])}aggregate(t){if(!this.map.has(t)||0===this.map.get(t).length)return h.convert(0);const o=this.map.get(t);let e=o[0];for(let t=1;t<o.length;t++)e=e.add(o[t]);return e}}exports.GradientCollector=m;
},{"./api":1,"./ops":4,"./tensor":6,"./util":2}],4:[function(require,module,exports) {
"use strict";function e(e,s){const t=(...t)=>{const o=[],u=t.map(e=>e.id?(o.push(e),e.id):null),n=t.map(e=>{if(e.shape){const r=e;return[r.shape,r.dtype]}return null}),a=t.map(e=>e.basic?e.basic:e),l=s(...a),p=new x.Tensor(l);o.push(p);const d=r(b,o);return b=null,c.recordOp({name:e,oid:i++,inputIds:u,inputShapeDTypes:n,outputIds:[p.id],savedForBackward:d}),p};return m[e]={name:e,opFunc:t,bwFuncs:null},t}function r(e,r){return e?e.map(e=>{if(e.getData){const s=e;for(const e of r)if(e.basic===s)return e;throw new Error("Couldn't find corresponding Tensor.")}return e}):null}function s(e,...r){m[e].bwFuncs=r}function t(...e){d.assert(null===b),b=e}function o(e){return m[e].bwFuncs}function u(e,r){return exports.fill(x.convert(1,r),e)}function n(e,r){return exports.fill(x.convert(0,r),e)}function a(e){return(r,s,t)=>{if(d.shapesEqual(s,t))return r;const[o,u]=d.bcastGradientArgs(s,t);return e?r.reduceSum(o).reshape(s):r.reduceSum(u).reshape(t)}}function l(e,r){return(s,t,o)=>{if(s=r?e?s.mul(o):s.mul(t):e?s.div(o):s.mul(t).neg().div(o.square()),d.shapesEqual(t.shape,o.shape))return s;const[u,n]=d.bcastGradientArgs(t.shape,o.shape);return e?s.reduceSum(u).reshape(t.shape):s.reduceSum(n).reshape(o.shape)}}Object.defineProperty(exports,"__esModule",{value:!0});const p=require("./backend"),c=require("./backprop"),x=require("./tensor"),d=require("./util");let i=1;const m={};let b=null;exports.getBackwardFuncs=o,exports.ones=u,exports.zeros=n,exports.add=e("add",(e,r)=>(t(e.shape,r.shape),p.bo.add(e,r))),s("add",(e,r,s)=>a(!0)(e,r,s),(e,r,s)=>a(!1)(e,r,s)),exports.sub=e("sub",(e,r)=>(t(e.shape,r.shape),p.bo.sub(e,r))),s("sub",(e,r,s)=>a(!0)(e,r,s),(e,r,s)=>a(!1)(e,r,s).neg()),exports.mul=e("mul",(e,r)=>(t(e,r),p.bo.mul(e,r))),s("mul",(e,r,s)=>l(!0,!0)(e,r,s),(e,r,s)=>l(!1,!0)(e,r,s)),exports.div=e("div",(e,r)=>(t(e,r),p.bo.div(e,r))),s("div",(e,r,s)=>l(!0,!1)(e,r,s),(e,r,s)=>l(!1,!1)(e,r,s)),exports.matmul=e("matmul",(e,r,s=!1,o=!1)=>(t(e,r,s,o),p.bo.matmul(e,r,s,o))),s("matmul",(e,r,s,t,o)=>exports.matmul(e,s,t,!o),(e,r,s,t,o)=>exports.matmul(r,e,!t,o)),exports.neg=e("neg",e=>p.bo.neg(e)),s("neg",e=>exports.neg(e)),exports.exp=e("exp",e=>{const r=p.bo.exp(e);return t(r),r}),s("exp",(e,r)=>exports.mul(r,e)),exports.log=e("log",e=>(t(e),p.bo.log(e))),s("log",(e,r)=>exports.div(e,r)),exports.fill=e("fill",(e,r)=>(t(e),p.bo.fill(e,r))),s("fill",(e,r)=>{throw new Error("Not Implemented: backward pass of fill.")}),exports.square=e("square",e=>(t(e),p.bo.square(e))),s("square",(e,r)=>{const s=x.convert(2,r);return e.mul(r.mul(s))}),exports.sinh=e("sinh",e=>(t(e),p.bo.sinh(e))),s("sinh",(e,r)=>exports.mul(e,exports.cosh(r))),exports.cosh=e("cosh",e=>(t(e),p.bo.cosh(e))),s("cosh",(e,r)=>exports.mul(e,exports.sinh(r))),exports.tanh=e("tanh",e=>(t(e),p.bo.tanh(e))),s("tanh",(e,r)=>exports.div(e,exports.square(exports.cosh(r)))),exports.relu=e("relu",e=>(t(e),p.bo.relu(e))),s("relu",(e,r)=>exports.reluGrad(e,r)),exports.reluGrad=e("reluGrad",(e,r)=>(t(r),p.bo.reluGrad(e,r))),s("reluGrad",(e,r)=>exports.reluGrad(e,r),null),exports.sigmoid=e("sigmoid",e=>{const r=p.bo.sigmoid(e);return t(r),r}),s("sigmoid",(e,r)=>e.mul(r.sub(r.square()))),exports.abs=e("abs",e=>(t(e),p.bo.abs(e))),s("abs",(e,r)=>{const s=r.zerosLike();return r.greater(s).select(e,e.neg())}),exports.transpose=e("transpose",(e,r)=>(t(r),p.bo.transpose(e,r))),s("transpose",(e,r)=>exports.transpose(e,r)),exports.reverse=e("reverse",(e,r)=>(t(r),p.bo.reverse(e,r))),s("reverse",(e,r)=>exports.reverse(e,r)),exports.argmax=e("argmax",(e,r)=>p.bo.argmax(e,r)),s("argmax",null),exports.argmin=e("argmin",(e,r)=>p.bo.argmin(e,r)),s("argmin",null),exports.reduceSum=e("reduceSum",(e,r,s)=>(t(e.shape,e.dtype,r),p.bo.reduceSum(e,r,s))),s("reduceSum",(e,r,s,t)=>{const o=r.slice();for(const e of t){o[e<0?r.length+e:e]=1}return e.reshape(o).mul(u(r,s))}),exports.reduceMean=e("reduceMean",(e,r,s)=>(t(r,e.shape,e.dtype),p.bo.reduceMean(e,r,s))),s("reduceMean",(e,r,s,t)=>{let o=1;const u=s.slice();for(const e of r){const r=e<0?s.length+e:e;o*=s[r],u[r]=1}const n=x.convert(1/o,{dtype:"float32",device:e.device});return e.reshape(u).mul(exports.fill(n,s))}),exports.reduceMax=e("reduceMax",(e,r,s)=>p.bo.reduceMax(e,r,s)),s("reduceMax",(e,r,s)=>{throw new Error("Not Implemented.")}),exports.equal=e("equal",(e,r)=>p.bo.equal(e,r)),s("equal",null,null),exports.greater=e("greater",(e,r)=>p.bo.greater(e,r)),s("greater",null,null),exports.greaterEqual=e("greaterEqual",(e,r)=>p.bo.greaterEqual(e,r)),s("greaterEqual",null,null),exports.less=e("less",(e,r)=>p.bo.less(e,r)),s("less",null,null),exports.lessEqual=e("lessEqual",(e,r)=>p.bo.lessEqual(e,r)),s("lessEqual",null,null),exports.select=e("select",(e,r,s)=>(t(e),p.bo.select(e,r,s))),s("select",null,(e,r)=>r.cast(e.dtype).mul(e),(e,r)=>r.cast(e.dtype).neg().add(1).mul(e)),exports.sign=e("sign",e=>p.bo.sign(e)),s("sign",null),exports.slice=e("slice",(e,r,s)=>(t(e.shape,r,s),p.bo.slice(e,r,s))),s("slice",(e,r,s,t)=>{throw new Error("Not Implemented.")}),exports.reshape=e("reshape",(e,r)=>(t(e.shape),p.bo.reshape(e,r))),s("reshape",(e,r)=>e.reshape(r)),exports.reduceLogSumExp=e("reduceLogSumExp",(e,r,s=!1)=>{const o=p.bo.reduceMax(e,r,!0),u=p.bo.exp(p.bo.sub(e,o)),n=p.bo.reduceSum(u,r,!0),a=p.bo.log(n),l=p.bo.add(o,a);return t(l,e),l}),s("reduceLogSumExp",(e,r,s)=>e.mul(exports.exp(s.sub(r)))),exports.softmax=e("softmax",e=>{d.assert(2===e.shape.length);const r=p.bo.softmax(e);return t(r),r}),s("softmax",(e,r)=>e.sub(e.mul(r).reduceSum([1]).reshape([-1,1])).mul(r)),exports.logSoftmax=e("logSoftmax",e=>{d.assert(2===e.shape.length);const r=p.bo.logSoftmax(e);return t(r),r}),s("logSoftmax",(e,r)=>{const s=r.exp();return e.sub(e.reduceSum([1],!0).mul(s))}),exports.cast=e("cast",(e,r)=>(t(e.dtype),p.bo.cast(e,r))),s("cast",(e,r)=>e.cast(r)),exports.oneHot=e("oneHot",(e,r,s,t)=>p.bo.oneHot(e,r,s,t)),s("oneHot",null),exports.setDiag=e("setDiag",(e,r)=>p.bo.setDiag(e,r)),s("setDiag",e=>{throw new Error("Not Implemented.")},e=>{throw new Error("Not Implemented.")});
},{"./backend":7,"./backprop":3,"./tensor":6,"./util":2}],6:[function(require,module,exports) {
"use strict";function t(t,e){return t instanceof l?t:new l(h.convertBasic(t,e))}function e(t){const e=new Array(t);for(let s=0;s<t;s++)e[s]=s;return e}function s(t,e,s){if(-1!==e)throw new Error("Softmax along a non-last axis is not yet supported.");if(2===t.rank)return s(t,e);const r=t.shape,i=t.shape[t.rank-1];return s(t.reshape([-1,i])).reshape(r)}function r(t){const e=new p;d.push(e);const s=t=>{e.keep(t)};try{t(s)}finally{u.assert(e===d.pop()),e.clean()}}function i(t){d.length>0&&d[d.length-1].track(t)}function n(t){for(const e of d)e.untrack(t)}Object.defineProperty(exports,"__esModule",{value:!0});const a=require("./api"),h=require("./backend"),o=require("./format"),c=require("./ops"),u=require("./util");exports.convert=t;class l{constructor(t){this.basic=t,this.id=l.nextId++,i(this)}dispose(){this.basic.dispose(),this.basic=null,n(this)}assign(t){u.assertShapesEqual(t.shape,this.shape),u.assert(t.dtype===this.dtype),this.dispose(),this.basic=t.basic,t.basic=null}[Symbol.iterator](){const t=this.basic.getData();let e=0;return{next:()=>e<t.length?{value:t[e++],done:!1}:{value:null,done:!0}}}colocate(t,e){return t instanceof l?t.device===this.device?t:new l(h.bo.copyToDevice(t.basic,this.device)):new l(h.convertBasic(t,{dtype:e,device:this.device}))}getData(){return this.basic.getData()}get rank(){return this.shape.length}get device(){return h.bo.getDevice(this.basic)}get dtype(){return this.basic.dtype}get shape(){return this.basic.shape}toString(){return o.toString(this.shape,this.getData())}copy(t){t||(t=this.device);const e=h.bo.copyToDevice(this.basic,t);return new l(e)}gpu(){if("GPU:0"===this.device)return this;const t=h.bo.copyToDevice(this.basic,"GPU:0");return new l(t)}cpu(){if("CPU:0"===this.device)return this;const t=h.bo.copyToDevice(this.basic,"CPU:0");return new l(t)}cast(t){return c.cast(this,t)}add(t){return c.add(this,this.colocate(t))}sub(t){return c.sub(this,this.colocate(t))}mul(t){return c.mul(this,this.colocate(t))}div(t){return c.div(this,this.colocate(t))}matmul(t){return c.matmul(this,this.colocate(t))}onesLike(){const t=h.bo.onesLike(this.basic);return new l(t)}zerosLike(){const t=h.bo.zerosLike(this.basic);return new l(t)}neg(){return c.neg(this)}exp(){return c.exp(this)}log(){return c.log(this)}square(){return c.square(this)}sinh(){return c.sinh(this)}cosh(){return c.cosh(this)}tanh(){return c.tanh(this)}relu(){return c.relu(this)}sigmoid(){return c.sigmoid(this)}abs(){return c.abs(this)}transpose(t){return void 0===t&&(t=a.range(this.rank).reverse()),t=this.colocate(t,"int32"),c.transpose(this,t)}reverse(t){t||(t=[-1]);const e=new Uint8Array(this.rank);for(const s of t){u.assert(-this.rank<=s&&s<this.rank);e[s>=0?s:this.rank+s]=1}const s=this.colocate(e,"bool");return c.reverse(this,s)}argmax(t){return void 0===t&&(t=0),c.argmax(this,t)}argmin(t){return void 0===t&&(t=0),c.argmin(this,t)}reduceSum(t,s=!1){return t||(t=e(this.rank)),c.reduceSum(this,t,s)}reduceMean(t,s=!1){return t||(t=e(this.rank)),c.reduceMean(this,t,s)}reduceMax(t,s=!1){return t||(t=e(this.rank)),c.reduceMax(this,t,s)}reduceLogSumExp(t,s=!1){return t||(t=e(this.rank)),c.reduceLogSumExp(this,t,s)}equal(t){return c.equal(this,this.colocate(t))}greater(t){return c.greater(this,this.colocate(t,this.dtype))}greaterEqual(t){return c.greaterEqual(this,this.colocate(t,this.dtype))}less(t){return c.less(this,this.colocate(t,this.dtype))}lessEqual(t){return c.lessEqual(this,this.colocate(t,this.dtype))}select(t,e){const s=this.colocate(t),r=this.colocate(e,s.dtype);return c.select(this,s,r)}sign(){return c.sign(this)}slice(t,e){return u.assert(u.allFinite(t)),u.assert(u.allFinite(e)),c.slice(this,t,e)}reshape(t){return c.reshape(this,t)}flatten(){return this.reshape([-1])}squeeze(){const t=this.shape.filter(t=>t>1);return this.reshape(t)}softmax(t=-1){return s(this,t,c.softmax)}logSoftmax(t=-1){return s(this,t,c.logSoftmax)}dot(t){const e=this.colocate(t);let s,r,i,n;if(0===this.rank?(s=this.reshape([1,1]),i=[]):1===this.rank?(u.assert(this.shape[0]===e.shape[0]),s=this.reshape([1,this.shape[0]]),i=[]):2===this.rank?(s=this,i=[this.shape[0]]):s=null,0===e.rank?(r=e.reshape([1,1]),n=[]):1===e.rank?(u.assert(this.shape[this.rank-1]===e.shape[0]),r=e.reshape([e.shape[0],1]),n=[]):2===e.rank?(r=e,n=[e.shape[e.rank-1]]):r=null,!s||!r)throw new Error("dot with tensors of rank greater than 2 is not yet implemented.");const a=i.concat(n);return s.matmul(r).reshape(a)}oneHot(t,e=1,s=0){if("float32"===this.dtype)throw new Error("Must use integer type with oneHot.");return c.oneHot(this,t,e,s)}softmaxCE(t){const e=this.colocate(t).cast("float32");u.assert(2===e.rank),u.assert(2===this.rank);const s=this.logSoftmax();return e.mul(s).reduceSum([1]).neg()}setDiag(t){return c.setDiag(this,this.colocate(t,this.dtype))}}l.nextId=1,exports.Tensor=l,exports.gc=r;class p{constructor(){this.keeping=new Set,this.tensors=new Set}track(t){this.tensors.add(t)}untrack(t){this.tensors.delete(t),this.keeping.delete(t)}keep(t){this.keeping.add(t)}clean(){this.tensors.forEach(t=>{this.keeping.has(t)||null==t.basic||t.dispose()}),this.tensors.clear(),this.keeping.clear()}}const d=[];
},{"./api":1,"./backend":7,"./format":11,"./ops":4,"./util":2}],14:[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],23:[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],10:[function(require,module,exports) {

function t(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function n(e){if(s===setTimeout)return setTimeout(e,0);if((s===t||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function r(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function o(){m&&f&&(m=!1,f.length?h=f.concat(h):p=-1,h.length&&i())}function i(){if(!m){var t=n(o);m=!0;for(var e=h.length;e;){for(f=h,h=[];++p<e;)f&&f[p].run();p=-1,e=h.length}f=null,m=!1,r(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var s,l,a=module.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:t}catch(e){s=t}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var f,h=[],m=!1,p=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new u(t,e)),1!==h.length||m||n(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=c,a.addListener=c,a.once=c,a.off=c,a.removeListener=c,a.removeAllListeners=c,a.emit=c,a.prependListener=c,a.prependOnceListener=c,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0};
},{}],9:[function(require,module,exports) {
var global = (1,eval)("this");
var process = require("process");
function e(e,n){var i={seen:[],stylize:r};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),a(n)?i.showHidden=n:n&&exports._extend(i,n),h(i.showHidden)&&(i.showHidden=!1),h(i.depth)&&(i.depth=2),h(i.colors)&&(i.colors=!1),h(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=t),o(i,e,i.depth)}function t(t,r){var n=e.styles[r];return n?"["+e.colors[n][0]+"m"+t+"["+e.colors[n][1]+"m":t}function r(e,t){return e}function n(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function o(e,t,r){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var a=t.inspect(r,e);return d(a)||(a=o(e,a,r)),a}var f=i(e,t);if(f)return f;var g=Object.keys(t),y=n(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(t)),S(t)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return s(t);if(0===g.length){if(j(t)){var x=t.name?": "+t.name:"";return e.stylize("[Function"+x+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(v(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return s(t)}var h="",m=!1,O=["{","}"];if(p(t)&&(m=!0,O=["[","]"]),j(t)){h=" [Function"+(t.name?": "+t.name:"")+"]"}if(b(t)&&(h=" "+RegExp.prototype.toString.call(t)),v(t)&&(h=" "+Date.prototype.toUTCString.call(t)),S(t)&&(h=" "+s(t)),0===g.length&&(!m||0==t.length))return O[0]+h+O[1];if(r<0)return b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var z;return z=m?u(e,t,r,y,g):g.map(function(n){return c(e,t,r,y,n,m)}),e.seen.pop(),l(z,h,O)}function i(e,t){if(h(t))return e.stylize("undefined","undefined");if(d(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):a(t)?e.stylize(""+t,"boolean"):f(t)?e.stylize("null","null"):void 0}function s(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)D(t,String(s))?i.push(c(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(c(e,t,r,n,o,!0))}),i}function c(e,t,r,n,i,s){var u,c,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?c=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(c=e.stylize("[Setter]","special")),D(n,i)||(u="["+i+"]"),c||(e.seen.indexOf(l.value)<0?(c=f(r)?o(e,l.value,null):o(e,l.value,r-1)).indexOf("\n")>-1&&(c=s?c.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+c.split("\n").map(function(e){return"   "+e}).join("\n")):c=e.stylize("[Circular]","special")),h(u)){if(s&&i.match(/^\d+$/))return c;(u=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+c}function l(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function a(e){return"boolean"==typeof e}function f(e){return null===e}function g(e){return null==e}function y(e){return"number"==typeof e}function d(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function h(e){return void 0===e}function b(e){return m(e)&&"[object RegExp]"===z(e)}function m(e){return"object"==typeof e&&null!==e}function v(e){return m(e)&&"[object Date]"===z(e)}function S(e){return m(e)&&("[object Error]"===z(e)||e instanceof Error)}function j(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function z(e){return Object.prototype.toString.call(e)}function w(e){return e<10?"0"+e.toString(10):e.toString(10)}function E(){var e=new Date,t=[w(e.getHours()),w(e.getMinutes()),w(e.getSeconds())].join(":");return[e.getDate(),$[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=(0,eval)("this"),A=require("process"),J=/%[sdj%]/g;exports.format=function(t){if(!d(t)){for(var r=[],n=0;n<arguments.length;n++)r.push(e(arguments[n]));return r.join(" ")}n=1;for(var o=arguments,i=o.length,s=String(t).replace(J,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),u=o[n];n<i;u=o[++n])f(u)||!m(u)?s+=" "+u:s+=" "+e(u);return s},exports.deprecate=function(e,t){if(h(N.process))return function(){return exports.deprecate(e,t).apply(this,arguments)};if(!0===A.noDeprecation)return e;var r=!1;return function(){if(!r){if(A.throwDeprecation)throw new Error(t);A.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}};var R,H={};exports.debuglog=function(e){if(h(R)&&(R=""),e=e.toUpperCase(),!H[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var t=A.pid;H[e]=function(){var r=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,t,r)}}else H[e]=function(){};return H[e]},exports.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=p,exports.isBoolean=a,exports.isNull=f,exports.isNullOrUndefined=g,exports.isNumber=y,exports.isString=d,exports.isSymbol=x,exports.isUndefined=h,exports.isRegExp=b,exports.isObject=m,exports.isDate=v,exports.isError=S,exports.isFunction=j,exports.isPrimitive=O,exports.isBuffer=require("./support/isBuffer");var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",E(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!m(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};
},{"./support/isBuffer":14,"inherits":23,"process":10}],2:[function(require,module,exports) {
var process = require("process");
function t(t){for(const e of t)if(Number.isNaN(e))return!1;return!0}function e(t){if(t.cpu&&(t=t.cpu()),t.getData)return t=t,[t.shape,t.getData()];if(w.isTypedArray(t))return[[t.length],t];if(t instanceof Array)return[g(t),x(t)];if("number"==typeof t)return[[],[t]];throw new Error("Not TensorLike")}function r(t){const r=e(t)[1];if(1!==r.length)throw new Error("Not Scalar");return r[0]}function n(...t){A&&console.log.apply(null,t)}function o(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function s(t,e=""){if(!t)throw new Error(e)}function i(t,e=""){s(!t,e)}function a(t,e,n=.001){t=r(t),e=r(e),s(Math.abs(t-e)<n,`actual: ${t} expected: ${e}`)}function u(t,e,n=null){t=r(t),n||(n=`actual: ${t} expected: ${e}`),s(t===e,n)}function c(t,e){const r=`Shape mismatch. actual: ${E(t)} expected ${E(e)}`;s(o(t,e),r)}function l(t,r){const[n,o]=e(t),[i,a]=e(r);c(n,i);for(let t=0;t<o.length;t++)s(o[t]===a[t],`index ${t} actual: ${o[t]} expected: ${a[t]}`)}function p(t,r,n=.001){const[o,i]=e(t),[a,u]=e(r);c(o,a);for(let t=0;t<i.length;++t){const e=i[t],r=u[t];s(Math.abs(e-r)<n,`index ${t} actual: ${i[t]} expected: ${u[t]}`)}}function f(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e[r]=Array.isArray(n)?f(n):n}return e}function h(t,e){const r=[],n=[],o=Math.max(t.length,e.length);for(let i=0;i<o;++i){const a=o-i-1;if(i>=t.length){r.unshift(a);continue}if(i>=e.length){n.unshift(a);continue}const u=t[t.length-i-1],c=e[e.length-i-1];u!==c&&(1===u&&1!==c?r.unshift(a):1!==u&&1===c?n.unshift(a):s(1===u&&1===c,"Incompatible broadcast shapes."))}return[r,n]}function x(t,e=[]){if(Array.isArray(t))for(let r=0;r<t.length;++r)x(t[r],e);else e.push(t);return e}function g(t){const e=[];for(;t instanceof Array;)e.push(t.length),t=t[0];return e}function d(t){return new Promise(function(e){setTimeout(e,t)})}var y=require("process");Object.defineProperty(exports,"__esModule",{value:!0});const m=require("./tensor"),w=require("./types"),A=!1,E=JSON.stringify,$=eval;if(exports.IS_WEB="undefined"!=typeof window,exports.IS_NODE=!exports.IS_WEB,exports.global=$(exports.IS_WEB?"window":"global"),exports.IS_NODE){const t=require("util").inspect.custom;m.Tensor.prototype[t]=function(t,e){return this.toString()},y.on("unhandledRejection",t=>{throw t})}exports.allFinite=t,exports.log=n,exports.shapesEqual=o,exports.assert=s,exports.assertFalse=i,exports.assertClose=a,exports.assertEqual=u,exports.assertShapesEqual=c,exports.assertAllEqual=l,exports.assertAllClose=p;class S{constructor(){this.map=new Map}get(t){return this.map.has(t)?this.map.get(t):0}keys(){return Array.from(this.map.keys())}inc(t){this.map.set(t,this.get(t)+1)}dec(t){this.map.set(t,this.get(t)-1)}}exports.CounterMap=S,exports.deepCloneArray=f,exports.bcastGradientArgs=h,exports.flatten=x,exports.inferShape=g,exports.delay=d;
},{"./tensor":6,"./types":8,"util":9,"process":10}],12:[function(require,module,exports) {
"use strict";function a(a){return m.assert(o.has(a)),o.get(a)}function t(a){switch(a){case"int32":case"float32":case"bool":return a;case"uint8":return"int32"}}Object.defineProperty(exports,"__esModule",{value:!0}),require("./dl/math/backends/backend_cpu"),require("./dl/math/backends/backend_webgl");const r=require("./dl/environment"),e=require("./dl/math/math"),n=require("./dl/math/ndarray"),s=require("./dl/math/types"),h=require("./types"),m=require("./util"),o=new Map,d=new e.NDArrayMath("cpu");r.ENV.setMath(d),o.set("CPU:0",d);let u;const c=r.ENV.getBackend("webgl");c&&(u=new e.NDArrayMath("webgl"),o.set("GPU:0",u));class y{static fromTypedArray(t,r,e,s){null==e&&(e=h.getDType(t)),null==s&&(s="CPU:0");const m=a(s),o=n.NDArray.make(r,{values:t},e,m);return new y(o,m)}constructor(a,t=d){this.dtype=a.dtype,this.shape=a.shape,this.math=t,this.ndarray=a,this.isDisposed=!1,m.assert(!1===this.ndarray.isDisposed)}getData(){return m.assert(!this.isDisposed),this.ndarray.getValues()}dispose(){m.assert(!this.isDisposed),this.ndarray.isDisposed||this.ndarray.dispose(),this.isDisposed=!0}}exports.TensorDL=y;class i{copyToDevice(t,r){const e=a(r),s=t.ndarray,h=n.NDArray.make(s.shape,{values:s.dataSync()},s.dtype,e);return new y(h,e)}getDevice(a){if(a.math===d)return"CPU:0";if(a.math===u)return"GPU:0";throw new Error("Unreachable")}listDevices(){const a=["CPU:0"];return c&&a.push("GPU:0"),a}add(a,t){r.ENV.setMath(a.math);const e=a.math.add(a.ndarray,t.ndarray);return new y(e,a.math)}sub(a,t){r.ENV.setMath(a.math);const e=a.math.sub(a.ndarray,t.ndarray);return new y(e,a.math)}mul(a,t){r.ENV.setMath(a.math);const e=a.math.multiply(a.ndarray,t.ndarray);return new y(e,a.math)}div(a,t){r.ENV.setMath(a.math);const e=a.math.divide(a.ndarray,t.ndarray);return new y(e,a.math)}neg(a){r.ENV.setMath(a.math);const t=a.math.neg(a.ndarray);return new y(t,a.math)}exp(a){r.ENV.setMath(a.math);const t=a.math.exp(a.ndarray);return new y(t,a.math)}log(a){r.ENV.setMath(a.math);const t=a.math.log(a.ndarray);return new y(t,a.math)}matmul(a,t,e=!1,n=!1){r.ENV.setMath(a.math);const h=a=>a?s.MatrixOrientation.TRANSPOSED:s.MatrixOrientation.REGULAR;m.assert(2===a.shape.length&&2===t.shape.length);const o=a.ndarray,d=t.ndarray,u=a.math.matMul(o,d,h(e),h(n));return new y(u,a.math)}setDiag(a,t){if(2!==a.shape.length||1!==t.shape.length)throw new Error("Not implemented");r.ENV.setMath(d);const e=d.setDiag(a.ndarray,t.ndarray);return new y(e,a.math)}onesLike(a){r.ENV.setMath(a.math);const t=n.NDArray.zerosLike(a.ndarray);return t.fill(1),new y(t,a.math)}zerosLike(a){r.ENV.setMath(a.math);const t=n.NDArray.zerosLike(a.ndarray);return new y(t,a.math)}fill(a,t){if(0!==a.shape.length)throw new Error("Fill value must be a scalar.");r.ENV.setMath(a.math);const e=n.NDArray.zeros(t,a.ndarray.dtype);return e.fill(a.ndarray.getValues()[0]),new y(e,a.math)}square(a){r.ENV.setMath(a.math);const t=a.math.square(a.ndarray);return new y(t,a.math)}sinh(a){r.ENV.setMath(a.math);const t=a.math.sinh(a.ndarray);return new y(t,a.math)}cosh(a){r.ENV.setMath(a.math);const t=a.math.cosh(a.ndarray);return new y(t,a.math)}tanh(a){r.ENV.setMath(a.math);const t=a.math.tanh(a.ndarray);return new y(t,a.math)}relu(a){r.ENV.setMath(a.math);const t=a.math.relu(a.ndarray);return new y(t,a.math)}reluGrad(a,t){const r=a.math,e=r.step(t.ndarray),n=r.multiply(a.ndarray,e);return new y(n,r)}sigmoid(a){r.ENV.setMath(a.math);const t=a.math.sigmoid(a.ndarray);return new y(t,a.math)}abs(a){r.ENV.setMath(a.math);const t=a.math.abs(a.ndarray);return new y(t,a.math)}randn(a,t){r.ENV.setMath(d);const e=n.NDArray.randNormal(a,0,1,"float32",t);return new y(e,d)}linspace(a,t,r){const e=(t-a)/(r-1),n=new Float32Array(r);for(let t=0;t<=r-1;++t)n[t]=a+t*e;return y.fromTypedArray(n,[r])}range(a,t,r){const e=(t-a)/r,n=new Int32Array(e);for(let t=0;t<e;++t)n[t]=a+t*r;return y.fromTypedArray(n,[e])}transpose(a,t){const r=Array.from(t.ndarray.getValues()),e=a.math.transpose(a.ndarray,r);return new y(e,a.math)}reverse(a,r){const e=a.ndarray,s=r.getData(),m=h.makeTypedArray(e.size,a.dtype),o=e.getValues(),d=t(a.dtype),u=n.NDArray.make(e.shape,{values:m},d);for(let a=0;a<e.size;++a){const t=e.indexToLoc(a),r=new Array(t.length);for(let a=0;a<r.length;a++)r[a]=s[a]?e.shape[a]-t[a]-1:t[a];m[u.locToIndex(r)]=o[a]}return new y(u,a.math)}argmax(a,t){r.ENV.setMath(a.math);const e=a.math.argMax(a.ndarray,t);return new y(e,a.math)}argmin(a,t){r.ENV.setMath(a.math);const e=a.math.argMin(a.ndarray,t);return new y(e,a.math)}reduceSum(a,t,e){r.ENV.setMath(a.math);const n=a.math.sum(a.ndarray,t,e);return new y(n,a.math)}reduceMean(a,t,e){r.ENV.setMath(a.math);const n=a.math.mean(a.ndarray,t,e);return new y(n,a.math)}reduceMax(a,t,e){r.ENV.setMath(a.math);const n=a.math.max(a.ndarray,t,e);return new y(n,a.math)}equal(a,t){r.ENV.setMath(a.math);const e=a.math.equal(a.ndarray,t.ndarray);return new y(e,a.math)}greater(a,t){r.ENV.setMath(a.math);const e=a.math.greater(a.ndarray,t.ndarray);return new y(e,a.math)}greaterEqual(a,t){r.ENV.setMath(a.math);const e=a.math.greaterEqual(a.ndarray,t.ndarray);return new y(e,a.math)}less(a,t){r.ENV.setMath(a.math);const e=a.math.less(a.ndarray,t.ndarray);return new y(e,a.math)}lessEqual(a,t){r.ENV.setMath(a.math);const e=a.math.lessEqual(a.ndarray,t.ndarray);return new y(e,a.math)}select(a,t,e){const n=t.math;r.ENV.setMath(n);const s=n.cast(a.ndarray,"bool"),h=n.select(s,t.ndarray,e.ndarray);return new y(h,n)}sign(a){r.ENV.setMath(a.math);const e=a.math,s=e.step(a.ndarray),h=t(a.dtype),m=n.Scalar.new(2,h),o=n.Scalar.new(1,h),d=e.scalarTimesArray(m,s),u=e.arrayMinusScalar(d,o);return new y(u,e)}slice(a,t,e){r.ENV.setMath(a.math);let n;switch(e=e.map((t,r)=>t>=0?t:(m.assert(-1===t,"Bad value in size"),a.shape[r])),a.shape.length){case 0:throw new Error("Slicing a scalar.");case 1:n=a.math.slice1D(a.ndarray.as1D(),t[0],e[0]);break;case 2:n=a.math.slice2D(a.ndarray,[t[0],t[1]],[e[0],e[1]]);break;case 3:n=a.math.slice3D(a.ndarray,[t[0],t[1],t[2]],[e[0],e[1],e[2]]);break;case 4:n=a.math.slice4D(a.ndarray,[t[0],t[1],t[2],t[3]],[e[0],e[1],e[2],e[3]]);break;default:throw new Error("Slicing for tensors rank higher than 4 not yet supported.")}return n=n.asType(a.dtype),new y(n,a.math)}reshape(a,t){r.ENV.setMath(a.math);const e=a.ndarray.reshape(t);return new y(e,a.math)}softmax(a){r.ENV.setMath(a.math);const t=a.math.softmax(a.ndarray);return new y(t,a.math)}logSoftmax(a){r.ENV.setMath(a.math);const t=a.ndarray,e=a.shape.length-1,n=a.math.sub(t,a.math.logSumExp(t,e,!0));return new y(n,a.math)}cast(a,e){r.ENV.setMath(a.math);const n=a.math.cast(a.ndarray,t(e));return new y(n,a.math)}oneHot(a,t,e,n){r.ENV.setMath(a.math);const s=a.math.cast(a.ndarray,"float32").as1D(),h=a.math.oneHot(s,t,e,n);return new y(h,a.math)}}exports.OpsDL=i;
},{"./dl/math/backends/backend_cpu":20,"./dl/math/backends/backend_webgl":21,"./dl/environment":15,"./dl/math/math":18,"./dl/math/ndarray":17,"./dl/math/types":19,"./types":8,"./util":2}],16:[function(require,module,exports) {
module.exports=function(){const n=["./tensorflow-binding.node","./build/Release/tensorflow-binding.node","./build/Debug/tensorflow-binding.node","../build/Release/tensorflow-binding.node","../build/Debug/tensorflow-binding.node","propel_linux_gpu","propel_linux","propel_mac","propel_windows"];for(const e of n)try{return require(e)}catch(n){if("MODULE_NOT_FOUND"!==n.code)throw n}return null}();
},{}],13:[function(require,module,exports) {
"use strict";function e(){return exports.binding=require("./load_binding"),!!exports.binding&&(exports.ctx=new exports.binding.Context,!0)}function n(e,n,t){const r=n.map(e=>e.handle),i=exports.binding.execute(exports.ctx,e,t,r);return a.assertEqual(i.length,1),new x(i[0])}function t(e,n,t){const r=n.map(e=>e.handle),s=null==t?exports.binding.getDType(r[0]):i(t),o=[["T",exports.binding.ATTR_TYPE,s]],T=exports.binding.execute(exports.ctx,e,o,r);return new x(T[0])}function r(e){switch(e){case exports.binding.TF_BOOL:return"bool";case exports.binding.TF_FLOAT:return"float32";case exports.binding.TF_INT32:return"int32";case exports.binding.TF_UINT8:return"uint8";default:throw new Error(`Not Implemented: dtype ${e}`)}}function i(e){switch(e){case"bool":return exports.binding.TF_BOOL;case"float32":return exports.binding.TF_FLOAT;case"int32":return exports.binding.TF_INT32;case"uint8":return exports.binding.TF_UINT8;default:throw new Error(`Not Implemented ${e}`)}}function s(e){return e?exports.binding.getDevice(e.handle):"CPU:0"}function o(e,n){return new x(exports.binding.createSmallHandle(exports.ctx,exports.binding.TF_INT32,s(n),e))}function T(e,n){return new x(exports.binding.createSmallHandle(exports.ctx,exports.binding.TF_FLOAT,s(n),e))}function d(e){return e.split("/").pop().replace("device:","")}Object.defineProperty(exports,"__esModule",{value:!0});const p=require("./types"),a=require("./util");exports.loadBinding=e,exports.execute0=n,exports.execute1=t;class x{static fromTypedArray(e,n,t,r){null==t&&(t=p.getDType(e));const s=i(t);let o=new exports.binding.Handle(e,n,s);return r&&"CPU:0"!==r&&(o=exports.binding.copyToDevice(exports.ctx,o,r)),new x(o)}constructor(e){this.handle=e}get shape(){return exports.binding.getShape(this.handle)}get dtype(){return r(exports.binding.getDType(this.handle))}get device(){return d(exports.binding.getDevice(this.handle))}getData(){if(!this.data){const e=exports.binding.asArrayBuffer(this.handle);switch(this.dtype){case"float32":this.data=new Float32Array(e);break;case"int32":this.data=new Int32Array(e);break;case"uint8":case"bool":this.data=new Uint8Array(e)}}return this.data}dispose(){a.assert(null!=this.handle),exports.binding.dispose(this.handle),this.handle=null}}exports.TensorTF=x;class g{copyToDevice(e,n){const t=exports.binding.copyToDevice(exports.ctx,e.handle,n);return new x(t)}getDevice(e){return e.device}listDevices(){return exports.binding.listDevices(exports.ctx).map(e=>d(e.name))}add(e,n){return t("Add",[e,n])}sub(e,n){return t("Sub",[e,n])}mul(e,n){return t("Mul",[e,n])}div(e,n){return t("Div",[e,n])}neg(e){return t("Neg",[e])}exp(e){return t("Exp",[e])}log(e){return t("Log",[e])}setDiag(e,n){return t("MatrixSetDiag",[e,n])}onesLike(e){return t("OnesLike",[e])}zerosLike(e){return t("ZerosLike",[e])}fill(e,n){if(0!==e.shape.length)throw new Error("Fill value must be a scalar.");return t("Fill",[o(n),e],e.dtype)}square(e){return t("Square",[e])}sinh(e){return t("Sinh",[e])}cosh(e){return t("Cosh",[e])}tanh(e){return t("Tanh",[e])}relu(e){return t("Relu",[e])}reluGrad(e,n){return t("ReluGrad",[e,n])}sigmoid(e){return t("Sigmoid",[e])}abs(e){return t("Abs",[e])}randn(e,t){const r=o(e);"number"!=typeof t&&(t=0);return n("RandomStandardNormal",[r],[["dtype",exports.binding.ATTR_TYPE,exports.binding.TF_FLOAT],["T",exports.binding.ATTR_TYPE,exports.binding.TF_INT32],["seed",exports.binding.ATTR_INT,t],["seed2",exports.binding.ATTR_INT,t]])}linspace(e,t,r){return n("LinSpace",[T(e),T(t),o(r)],[["T",exports.binding.ATTR_TYPE,exports.binding.TF_FLOAT],["Tidx",exports.binding.ATTR_TYPE,exports.binding.TF_INT32]])}range(e,t,r){return n("Range",[o(e),o(t),o(r)],[["Tidx",exports.binding.ATTR_TYPE,exports.binding.TF_INT32]])}transpose(e,t){return n("Transpose",[e,t],[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["Tperm",exports.binding.ATTR_TYPE,exports.binding.getDType(t.handle)]])}reverse(e,n){return a.assert("bool"===n.dtype),t("Reverse",[e,n])}matmul(e,t,r=!1,i=!1){return n("MatMul",[e,t],[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["transpose_a",exports.binding.ATTR_BOOL,r],["transpose_b",exports.binding.ATTR_BOOL,i]])}argmax(e,t){return n("ArgMax",[e,o(t)],[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["Tidx",exports.binding.ATTR_TYPE,exports.binding.TF_INT32],["output_type",exports.binding.ATTR_TYPE,exports.binding.TF_INT32]])}argmin(e,t){return n("ArgMin",[e,o(t)],[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["Tidx",exports.binding.ATTR_TYPE,exports.binding.TF_INT32],["output_type",exports.binding.ATTR_TYPE,exports.binding.TF_INT32]])}reduceSum(e,t,r){return n("Sum",[e,o(t)],[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["Tidx",exports.binding.ATTR_TYPE,exports.binding.TF_INT32],["keep_dims",exports.binding.ATTR_BOOL,r]])}reduceMean(e,t,r){return n("Mean",[e,o(t)],[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["Tidx",exports.binding.ATTR_TYPE,exports.binding.TF_INT32],["keep_dims",exports.binding.ATTR_BOOL,r]])}reduceMax(e,t,r){return n("Max",[e,o(t)],[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["Tidx",exports.binding.ATTR_TYPE,exports.binding.TF_INT32],["keep_dims",exports.binding.ATTR_BOOL,r]])}equal(e,n){return t("Equal",[e,n])}greater(e,n){return t("Greater",[e,n])}greaterEqual(e,n){return t("GreaterEqual",[e,n])}less(e,n){return t("Less",[e,n])}lessEqual(e,n){return t("LessEqual",[e,n])}select(e,n,r){return t("Select",[e,n,r],n.dtype)}sign(e){return t("Sign",[e])}slice(e,n,t){let r;"int32"!==e.dtype||exports.binding.getDevice(e.handle).endsWith("CPU:0")?r=e.handle:(console.warn("Slice on GPU not supported for int32. Copying to CPU."),r=exports.binding.copyToDevice(exports.ctx,e.handle,"CPU:0"));const i=o(n),s=o(t),T=[r,i.handle,s.handle],d=[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(r)],["Index",exports.binding.ATTR_TYPE,exports.binding.TF_INT32]],p=exports.binding.execute(exports.ctx,"Slice",d,T);return a.assertEqual(p.length,1),new x(p[0])}reshape(e,n){let t;"int32"!==e.dtype||exports.binding.getDevice(e.handle).endsWith("CPU:0")?t=e.handle:(console.warn("Reshape on GPU not supported for int32. Copying to CPU."),t=exports.binding.copyToDevice(exports.ctx,e.handle,"CPU:0"));const r=[t,o(n).handle],i=[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(t)],["Tshape",exports.binding.ATTR_TYPE,exports.binding.TF_INT32]],s=exports.binding.execute(exports.ctx,"Reshape",i,r);return a.assertEqual(s.length,1),new x(s[0])}softmax(e){return t("Softmax",[e])}logSoftmax(e){return t("LogSoftmax",[e])}cast(e,t){return n("Cast",[e],[["SrcT",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["DstT",exports.binding.ATTR_TYPE,i(t)]])}oneHot(e,t,r,i){if("float32"===e.dtype)throw new Error("Must use integer type with oneHot.");const s=o(t),d=T(r,e);return n("OneHot",[e,s,d,T(i,e)],[["T",exports.binding.ATTR_TYPE,exports.binding.getDType(d.handle)],["TI",exports.binding.ATTR_TYPE,exports.binding.getDType(e.handle)],["axis",exports.binding.ATTR_INT,-1]])}}exports.OpsTF=g;
},{"./types":8,"./util":2,"./load_binding":16}],7:[function(require,module,exports) {
"use strict";function e(){return!a.IS_WEB}function r(e,r){const n=s.fromTypedArray,o=r?r.dtype:void 0,i=(r?r.device:null)||"CPU:0";if("number"==typeof e)return n(t.makeTypedArray([e],o),[],o,i);if(t.isTypedArray(e))return n(e,[e.length],o,i);if(Array.isArray(e)){e instanceof Array||(e=a.deepCloneArray(e));const r=a.inferShape(e),s=a.flatten(e);return n(t.makeTypedArray(s,o),r,o,i)}throw new Error("Unreachable")}Object.defineProperty(exports,"__esModule",{value:!0});const n=require("./dl"),o=require("./tf"),t=require("./types"),a=require("./util");let s,i=!1;i?console.warn("Warning: backend.onLoad called more than once."):(i=!0,e()&&o.loadBinding()?(console.log("Using TF backend."),s=o.TensorTF,exports.bo=new o.OpsTF,exports.backend="tf"):(console.log("Using DL backend."),s=n.TensorDL,exports.bo=new n.OpsDL,exports.backend="dl")),exports.convertBasic=r;
},{"./dl":12,"./tf":13,"./types":8,"./util":2}],25:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.name="d3",d=exports.version="4.13.0",s=exports.description="Data-Driven Documents",i=exports.keywords=["dom","visualization","svg","animation","canvas"],t=exports.homepage="https://d3js.org",o=exports.license="BSD-3-Clause",r=exports.author={name:"Mike Bostock",url:"https://bost.ocks.org/mike"},p=exports.main="build/d3.node.js",a=exports.unpkg="build/d3.min.js",l=exports.jsdelivr="build/d3.min.js",n="index";exports.module=n;var u=exports.repository={type:"git",url:"https://github.com/d3/d3.git"},m=exports.scripts={pretest:"rimraf build && mkdir build && json2module package.json > build/package.js && node rollup.node",test:"tape 'test/**/*-test.js'",prepublishOnly:'npm run test && rollup -c --banner "$(preamble)" && uglifyjs -b beautify=false,preamble="\'$(preamble)\'" build/d3.js -c negate_iife=false -m -o build/d3.min.js',postpublish:'git push && git push --tags && cd ../d3.github.com && git pull && cp ../d3/build/d3.js d3.v4.js && cp ../d3/build/d3.min.js d3.v4.min.js && git add d3.v4.js d3.v4.min.js && git commit -m "d3 ${npm_package_version}" && git push && cd - && cd ../d3-bower && git pull && cp ../d3/LICENSE ../d3/README.md ../d3/build/d3.js ../d3/build/d3.min.js . && git add -- LICENSE README.md d3.js d3.min.js && git commit -m "${npm_package_version}" && git tag -am "${npm_package_version}" v${npm_package_version} && git push && git push --tags && cd - && zip -j build/d3.zip -- LICENSE README.md API.md CHANGES.md build/d3.js build/d3.min.js'},c=exports.devDependencies={json2module:"0.0","package-preamble":"0.1",rimraf:"2",rollup:"0.53","rollup-plugin-ascii":"0.0","rollup-plugin-node-resolve":"3",tape:"4","uglify-js":"3.2"},g=exports.dependencies={"d3-array":"1.2.1","d3-axis":"1.0.8","d3-brush":"1.0.4","d3-chord":"1.0.4","d3-collection":"1.0.4","d3-color":"1.0.3","d3-dispatch":"1.0.3","d3-drag":"1.2.1","d3-dsv":"1.0.8","d3-ease":"1.0.3","d3-force":"1.1.0","d3-format":"1.2.2","d3-geo":"1.9.1","d3-hierarchy":"1.1.5","d3-interpolate":"1.1.6","d3-path":"1.0.5","d3-polygon":"1.0.3","d3-quadtree":"1.0.3","d3-queue":"3.0.7","d3-random":"1.1.0","d3-request":"1.0.6","d3-scale":"1.0.7","d3-selection":"1.3.0","d3-shape":"1.2.0","d3-time":"1.0.8","d3-time-format":"2.1.1","d3-timer":"1.0.7","d3-transition":"1.1.1","d3-voronoi":"1.1.2","d3-zoom":"1.7.1"};
},{}],99:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};
},{}],96:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function n(e){return function(n,t){return(0,r.default)(e(n),t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return 1===e.length&&(e=n(e)),{left:function(n,t,r,u){for(null==r&&(r=0),null==u&&(u=n.length);r<u;){var l=r+u>>>1;e(n[l],t)<0?r=l+1:u=l}return r},right:function(n,t,r,u){for(null==r&&(r=0),null==u&&(u=n.length);r<u;){var l=r+u>>>1;e(n[l],t)>0?u=l:r=l+1}return r}}};var t=require("./ascending"),r=e(t);
},{"./ascending":99}],97:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bisectLeft=exports.bisectRight=void 0;var t=require("./ascending"),r=e(t),s=require("./bisector"),i=e(s),o=(0,i.default)(r.default),u=exports.bisectRight=o.right,c=exports.bisectLeft=o.left;exports.default=u;
},{"./ascending":99,"./bisector":96}],107:[function(require,module,exports) {
"use strict";function e(e,r){return[e,r]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,t){null==t&&(t=e);for(var n=0,u=r.length-1,o=r[0],l=new Array(u<0?0:u);n<u;)l[n]=t(o,o=r[++n]);return l},exports.pair=e;
},{}],100:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,t,n){var u,a,l,o,i=r.length,s=t.length,f=new Array(i*s);for(null==n&&(n=e.pair),u=l=0;u<i;++u)for(o=r[u],a=0;a<s;++a,++l)f[l]=n(o,t[a]);return f};var e=require("./pairs");
},{"./pairs":107}],101:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};
},{}],364:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return null===e?NaN:+e};
},{}],115:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var u,f,l=e.length,n=0,a=-1,i=0,o=0;if(null==r)for(;++a<l;)isNaN(u=(0,t.default)(e[a]))||(o+=(f=u-i)*(u-(i+=f/++n)));else for(;++a<l;)isNaN(u=(0,t.default)(r(e[a],a,e)))||(o+=(f=u-i)*(u-(i+=f/++n)));if(n>1)return o/(n-1)};var r=require("./number"),t=e(r);
},{"./number":364}],102:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var u=(0,t.default)(e,r);return u?Math.sqrt(u):u};var r=require("./variance"),t=e(r);
},{"./variance":115}],98:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,l){var r,u,f,n=e.length,t=-1;if(null==l){for(;++t<n;)if(null!=(r=e[t])&&r>=r)for(u=f=r;++t<n;)null!=(r=e[t])&&(u>r&&(u=r),f<r&&(f=r))}else for(;++t<n;)if(null!=(r=l(e[t],t,e))&&r>=r)for(u=f=r;++t<n;)null!=(r=l(e[t],t,e))&&(u>r&&(u=r),f<r&&(f=r));return[u,f]};
},{}],362:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Array.prototype,r=exports.slice=e.slice,t=exports.map=e.map;
},{}],361:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return function(){return e}};
},{}],363:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return e};
},{}],109:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=0|Math.max(0,Math.ceil((t-e)/r)),o=new Array(n);++a<n;)o[a]=e+a*r;return o};
},{}],118:[function(require,module,exports) {
"use strict";function t(t,r,M){var h=(r-t)/Math.max(0,M),i=Math.floor(Math.log(h)/Math.LN10),n=h/Math.pow(10,i);return i>=0?(n>=a?10:n>=e?5:n>=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(n>=a?10:n>=e?5:n>=o?2:1)}function r(t,r,M){var h=Math.abs(r-t)/Math.max(0,M),i=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),n=h/i;return n>=a?i*=10:n>=e?i*=5:n>=o&&(i*=2),r<t?-i:i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,a,e){var o,M,h,i,n=-1;if(a=+a,r=+r,e=+e,r===a&&e>0)return[r];if((o=a<r)&&(M=r,r=a,a=M),0===(i=t(r,a,e))||!isFinite(i))return[];if(i>0)for(r=Math.ceil(r/i),a=Math.floor(a/i),h=new Array(M=Math.ceil(a-r+1));++n<M;)h[n]=(r+n)*i;else for(r=Math.floor(r*i),a=Math.ceil(a*i),h=new Array(M=Math.ceil(r-a+1));++n<M;)h[n]=(r-n)/i;return o&&h.reverse(),h},exports.tickIncrement=t,exports.tickStep=r;var a=Math.sqrt(50),e=Math.sqrt(10),o=Math.sqrt(2);
},{}],239:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1};
},{}],104:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function e(e){var r,a,i=e.length,o=new Array(i);for(r=0;r<i;++r)o[r]=t(e[r],r,e);var l=n(o),s=l[0],h=l[1],y=f(o,s,h);Array.isArray(y)||(y=(0,d.tickStep)(s,h,y),y=(0,c.default)(Math.ceil(s/y)*y,Math.floor(h/y)*y,y));for(var p=y.length;y[0]<=s;)y.shift(),--p;for(;y[p-1]>h;)y.pop(),--p;var q,v=new Array(p+1);for(r=0;r<=p;++r)(q=v[r]=[]).x0=r>0?y[r-1]:s,q.x1=r<p?y[r]:h;for(r=0;r<i;++r)s<=(a=o[r])&&a<=h&&v[(0,u.default)(y,a,0,p)].push(e[r]);return v}var t=l.default,n=i.default,f=y.default;return e.value=function(r){return arguments.length?(t="function"==typeof r?r:(0,a.default)(r),e):t},e.domain=function(r){return arguments.length?(n="function"==typeof r?r:(0,a.default)([r[0],r[1]]),e):n},e.thresholds=function(t){return arguments.length?(f="function"==typeof t?t:Array.isArray(t)?(0,a.default)(r.slice.call(t)):(0,a.default)(t),e):f},e};var r=require("./array"),t=require("./bisect"),u=e(t),n=require("./constant"),a=e(n),f=require("./extent"),i=e(f),o=require("./identity"),l=e(o),s=require("./range"),c=e(s),d=require("./ticks"),h=require("./threshold/sturges"),y=e(h);
},{"./array":362,"./bisect":97,"./constant":361,"./extent":98,"./identity":363,"./range":109,"./ticks":118,"./threshold/sturges":239}],113:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r,u){if(null==u&&(u=t.default),n=e.length){if((r=+r)<=0||n<2)return+u(e[0],0,e);if(r>=1)return+u(e[n-1],n-1,e);var n,f=(n-1)*r,l=Math.floor(f),o=+u(e[l],l,e);return o+(+u(e[l+1],l+1,e)-o)*(f-l)}};var r=require("./number"),t=e(r);
},{"./number":364}],236:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,a){return e=r.map.call(e,l.default).sort(u.default),Math.ceil((a-t)/(2*((0,i.default)(e,.75)-(0,i.default)(e,.25))*Math.pow(e.length,-1/3)))};var r=require("../array"),t=require("../ascending"),u=e(t),a=require("../number"),l=e(a),n=require("../quantile"),i=e(n);
},{"../array":362,"../ascending":99,"../number":364,"../quantile":113}],237:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,u){return Math.ceil((u-t)/(3.5*(0,r.default)(e)*Math.pow(e.length,-1/3)))};var t=require("../deviation"),r=e(t);
},{"../deviation":102}],108:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,l){var r,u,f=e.length,n=-1;if(null==l){for(;++n<f;)if(null!=(r=e[n])&&r>=r)for(u=r;++n<f;)null!=(r=e[n])&&r>u&&(u=r)}else for(;++n<f;)if(null!=(r=l(e[n],n,e))&&r>=r)for(u=r;++n<f;)null!=(r=l(e[n],n,e))&&r>u&&(u=r);return u};
},{}],106:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var u,f=e.length,l=f,n=-1,a=0;if(null==r)for(;++n<f;)isNaN(u=(0,t.default)(e[n]))?--l:a+=u;else for(;++n<f;)isNaN(u=(0,t.default)(r(e[n],n,e)))?--l:a+=u;if(l)return a/l};var r=require("./number"),t=e(r);
},{"./number":364}],103:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,u){var t,a=e.length,s=-1,f=[];if(null==u)for(;++s<a;)isNaN(t=(0,l.default)(e[s]))||f.push(t);else for(;++s<a;)isNaN(t=(0,l.default)(u(e[s],s,e)))||f.push(t);return(0,n.default)(f.sort(r.default),.5)};var u=require("./ascending"),r=e(u),t=require("./number"),l=e(t),a=require("./quantile"),n=e(a);
},{"./ascending":99,"./number":364,"./quantile":113}],105:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var r,t,n,o=e.length,f=-1,l=0;++f<o;)l+=e[f].length;for(t=new Array(l);--o>=0;)for(r=(n=e[o]).length;--r>=0;)t[--l]=n[r];return t};
},{}],110:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,l){var r,u,f=e.length,n=-1;if(null==l){for(;++n<f;)if(null!=(r=e[n])&&r>=r)for(u=r;++n<f;)null!=(r=e[n])&&u>r&&(u=r)}else for(;++n<f;)if(null!=(r=l(e[n],n,e))&&r>=r)for(u=r;++n<f;)null!=(r=l(e[n],n,e))&&u>r&&(u=r);return u};
},{}],111:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){for(var t=r.length,n=new Array(t);t--;)n[t]=e[r[t]];return n};
},{}],112:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){if(u=e.length){var u,n,l=0,o=0,d=e[o];for(null==r&&(r=t.default);++l<u;)(r(n=e[l],d)<0||0!==r(d,d))&&(d=n,o=l);return 0===r(d,d)?o:void 0}};var r=require("./ascending"),t=e(r);
},{"./ascending":99}],116:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,r){for(var l,n,u=(null==r?e.length:r)-(t=null==t?0:+t);u;)n=Math.random()*u--|0,l=e[u+t],e[u+t]=e[n+t],e[n+t]=l;return e};
},{}],114:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var t,l=e.length,o=-1,u=0;if(null==r)for(;++o<l;)(t=+e[o])&&(u+=t);else for(;++o<l;)(t=+r(e[o],o,e))&&(u+=t);return u};
},{}],117:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.length}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){if(!(o=e.length))return[];for(var t=-1,u=(0,n.default)(e,r),f=new Array(u);++t<u;)for(var o,a=-1,i=f[t]=new Array(o);++a<o;)i[a]=e[a][t];return f};var t=require("./min"),n=e(t);
},{"./min":110}],120:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return(0,r.default)(arguments)};var t=require("./transpose"),r=e(t);
},{"./transpose":117}],66:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/bisect");Object.defineProperty(exports,"bisect",{enumerable:!0,get:function(){return e(r).default}}),Object.defineProperty(exports,"bisectRight",{enumerable:!0,get:function(){return r.bisectRight}}),Object.defineProperty(exports,"bisectLeft",{enumerable:!0,get:function(){return r.bisectLeft}});var t=require("./src/ascending");Object.defineProperty(exports,"ascending",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/bisector");Object.defineProperty(exports,"bisector",{enumerable:!0,get:function(){return e(n).default}});var u=require("./src/cross");Object.defineProperty(exports,"cross",{enumerable:!0,get:function(){return e(u).default}});var i=require("./src/descending");Object.defineProperty(exports,"descending",{enumerable:!0,get:function(){return e(i).default}});var c=require("./src/deviation");Object.defineProperty(exports,"deviation",{enumerable:!0,get:function(){return e(c).default}});var o=require("./src/extent");Object.defineProperty(exports,"extent",{enumerable:!0,get:function(){return e(o).default}});var a=require("./src/histogram");Object.defineProperty(exports,"histogram",{enumerable:!0,get:function(){return e(a).default}});var s=require("./src/threshold/freedmanDiaconis");Object.defineProperty(exports,"thresholdFreedmanDiaconis",{enumerable:!0,get:function(){return e(s).default}});var f=require("./src/threshold/scott");Object.defineProperty(exports,"thresholdScott",{enumerable:!0,get:function(){return e(f).default}});var d=require("./src/threshold/sturges");Object.defineProperty(exports,"thresholdSturges",{enumerable:!0,get:function(){return e(d).default}});var p=require("./src/max");Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return e(p).default}});var l=require("./src/mean");Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return e(l).default}});var b=require("./src/median");Object.defineProperty(exports,"median",{enumerable:!0,get:function(){return e(b).default}});var m=require("./src/merge");Object.defineProperty(exports,"merge",{enumerable:!0,get:function(){return e(m).default}});var g=require("./src/min");Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return e(g).default}});var x=require("./src/pairs");Object.defineProperty(exports,"pairs",{enumerable:!0,get:function(){return e(x).default}});var j=require("./src/permute");Object.defineProperty(exports,"permute",{enumerable:!0,get:function(){return e(j).default}});var v=require("./src/quantile");Object.defineProperty(exports,"quantile",{enumerable:!0,get:function(){return e(v).default}});var y=require("./src/range");Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return e(y).default}});var O=require("./src/scan");Object.defineProperty(exports,"scan",{enumerable:!0,get:function(){return e(O).default}});var P=require("./src/shuffle");Object.defineProperty(exports,"shuffle",{enumerable:!0,get:function(){return e(P).default}});var q=require("./src/sum");Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return e(q).default}});var h=require("./src/ticks");Object.defineProperty(exports,"ticks",{enumerable:!0,get:function(){return e(h).default}}),Object.defineProperty(exports,"tickIncrement",{enumerable:!0,get:function(){return h.tickIncrement}}),Object.defineProperty(exports,"tickStep",{enumerable:!0,get:function(){return h.tickStep}});var k=require("./src/transpose");Object.defineProperty(exports,"transpose",{enumerable:!0,get:function(){return e(k).default}});var S=require("./src/variance");Object.defineProperty(exports,"variance",{enumerable:!0,get:function(){return e(S).default}});var _=require("./src/zip");Object.defineProperty(exports,"zip",{enumerable:!0,get:function(){return e(_).default}});
},{"./src/bisect":97,"./src/ascending":99,"./src/bisector":96,"./src/cross":100,"./src/descending":101,"./src/deviation":102,"./src/extent":98,"./src/histogram":104,"./src/threshold/freedmanDiaconis":236,"./src/threshold/scott":237,"./src/threshold/sturges":239,"./src/max":108,"./src/mean":106,"./src/median":103,"./src/merge":105,"./src/min":110,"./src/pairs":107,"./src/permute":111,"./src/quantile":113,"./src/range":109,"./src/scan":112,"./src/shuffle":116,"./src/sum":114,"./src/ticks":118,"./src/transpose":117,"./src/variance":115,"./src/zip":120}],360:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.slice=Array.prototype.slice;
},{}],93:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function n(t){return"translate("+(t+.5)+",0)"}function r(t){return"translate(0,"+(t+.5)+")"}function e(t){return function(n){return+t(n)}}function i(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(r){return+t(r)+n}}function a(){return!this.__axis}function u(t,u){function o(n){var r=null==c?u.ticks?u.ticks.apply(u,l):u.domain():c,o=null==s?u.tickFormat?u.tickFormat.apply(u,l):m.default:s,f=Math.max(d,0)+_,b=u.range(),z=+b[0]+.5,A=+b[b.length-1]+.5,V=(u.bandwidth?i:e)(u.copy()),H=n.selection?n.selection():n,S=H.selectAll(".domain").data([null]),q=H.selectAll(".tick").data(r,u).order(),w=q.exit(),O=q.enter().append("g").attr("class","tick"),P=q.select("line"),j=q.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),q=q.merge(O),P=P.merge(O.append("line").attr("stroke","#000").attr(M+"2",v*d)),j=j.merge(O.append("text").attr("fill","#000").attr(M,v*f).attr("dy",t===p?"0em":t===x?"0.71em":"0.32em")),n!==H&&(S=S.transition(n),q=q.transition(n),P=P.transition(n),j=j.transition(n),w=w.transition(n).attr("opacity",k).attr("transform",function(t){return isFinite(t=V(t))?F(t):this.getAttribute("transform")}),O.attr("opacity",k).attr("transform",function(t){var n=this.parentNode.__axis;return F(n&&isFinite(n=n(t))?n:V(t))})),w.remove(),S.attr("d",t===g||t==h?"M"+v*y+","+z+"H0.5V"+A+"H"+v*y:"M"+z+","+v*y+"V0.5H"+A+"V"+v*y),q.attr("opacity",1).attr("transform",function(t){return F(V(t))}),P.attr(M+"2",v*d),j.attr(M,v*f).text(o),H.filter(a).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===h?"start":t===g?"end":"middle"),H.each(function(){this.__axis=V})}var l=[],c=null,s=null,d=6,y=6,_=3,v=t===p||t===g?-1:1,M=t===g||t===h?"x":"y",F=t===p||t===x?n:r;return o.scale=function(t){return arguments.length?(u=t,o):u},o.ticks=function(){return l=f.slice.call(arguments),o},o.tickArguments=function(t){return arguments.length?(l=null==t?[]:f.slice.call(t),o):l.slice()},o.tickValues=function(t){return arguments.length?(c=null==t?null:f.slice.call(t),o):c&&c.slice()},o.tickFormat=function(t){return arguments.length?(s=t,o):s},o.tickSize=function(t){return arguments.length?(d=y=+t,o):d},o.tickSizeInner=function(t){return arguments.length?(d=+t,o):d},o.tickSizeOuter=function(t){return arguments.length?(y=+t,o):y},o.tickPadding=function(t){return arguments.length?(_=+t,o):_},o}function o(t){return u(p,t)}function l(t){return u(h,t)}function c(t){return u(x,t)}function s(t){return u(g,t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.axisTop=o,exports.axisRight=l,exports.axisBottom=c,exports.axisLeft=s;var f=require("./array"),d=require("./identity"),m=t(d),p=1,h=2,x=3,g=4,k=1e-6;
},{"./array":360,"./identity":363}],61:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/axis");Object.defineProperty(exports,"axisTop",{enumerable:!0,get:function(){return e.axisTop}}),Object.defineProperty(exports,"axisRight",{enumerable:!0,get:function(){return e.axisRight}}),Object.defineProperty(exports,"axisBottom",{enumerable:!0,get:function(){return e.axisBottom}}),Object.defineProperty(exports,"axisLeft",{enumerable:!0,get:function(){return e.axisLeft}});
},{"./src/axis":93}],95:[function(require,module,exports) {
"use strict";function n(){for(var n,e=0,t=arguments.length,o={};e<t;++e){if(!(n=arguments[e]+"")||n in o)throw new Error("illegal type: "+n);o[n]=[]}return new r(o)}function r(n){this._=n}function e(n,r){return n.trim().split(/^|\s+/).map(function(n){var e="",t=n.indexOf(".");if(t>=0&&(e=n.slice(t+1),n=n.slice(0,t)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}})}function t(n,r){for(var e,t=0,o=n.length;t<o;++t)if((e=n[t]).name===r)return e.value}function o(n,r,e){for(var t=0,o=n.length;t<o;++t)if(n[t].name===r){n[t]=i,n=n.slice(0,t).concat(n.slice(t+1));break}return null!=e&&n.push({name:r,value:e}),n}Object.defineProperty(exports,"__esModule",{value:!0});var i={value:function(){}};r.prototype=n.prototype={constructor:r,on:function(n,r){var i,l=this._,a=e(n+"",l),f=-1,u=a.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++f<u;)if(i=(n=a[f]).type)l[i]=o(l[i],n.name,r);else if(null==r)for(i in l)l[i]=o(l[i],n.name,null);return this}for(;++f<u;)if((i=(n=a[f]).type)&&(i=t(l[i],n.name)))return i},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new r(n)},call:function(n,r){if((e=arguments.length-2)>0)for(var e,t,o=new Array(e),i=0;i<e;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,e=(t=this._[n]).length;i<e;++i)t[i].value.apply(r,o)},apply:function(n,r,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var t=this._[n],o=0,i=t.length;o<i;++o)t[o].value.apply(r,e)}},exports.default=n;
},{}],65:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./src/dispatch");Object.defineProperty(exports,"dispatch",{enumerable:!0,get:function(){return e(t).default}});
},{"./src/dispatch":95}],314:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=exports.xhtml="http://www.w3.org/1999/xhtml";exports.default={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
},{}],306:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r=e+="",s=r.indexOf(":");return s>=0&&"xmlns"!==(r=e.slice(0,s))&&(e=e.slice(s+1)),t.default.hasOwnProperty(r)?{space:t.default[r],local:e}:e};var r=require("./namespaces"),t=e(r);
},{"./namespaces":314}],303:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===a.xhtml&&t.documentElement.namespaceURI===a.xhtml?t.createElement(e):t.createElementNS(n,e)}}function n(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r=(0,u.default)(e);return(r.local?n:t)(r)};var r=require("./namespace"),u=e(r),a=require("./namespaces");
},{"./namespace":306,"./namespaces":314}],311:[function(require,module,exports) {
"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return null==t?e:function(){return this.querySelector(t)}};
},{}],483:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){"function"!=typeof e&&(e=(0,_.default)(e));for(var r=this._groups,a=r.length,n=new Array(a),u=0;u<a;++u)for(var o,i,l=r[u],d=l.length,s=n[u]=new Array(d),f=0;f<d;++f)(o=l[f])&&(i=e.call(o,o.__data__,f,l))&&("__data__"in o&&(i.__data__=o.__data__),s[f]=i);return new t.Selection(n,this._parents)};var t=require("./index"),r=require("../selector"),_=e(r);
},{"./index":349,"../selector":311}],315:[function(require,module,exports) {
"use strict";function e(){return[]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return null==t?e:function(){return this.querySelectorAll(t)}};
},{}],482:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){"function"!=typeof e&&(e=(0,u.default)(e));for(var r=this._groups,l=r.length,n=[],o=[],s=0;s<l;++s)for(var a,f=r[s],i=f.length,_=0;_<i;++_)(a=f[_])&&(n.push(e.call(a,a.__data__,_,f)),o.push(a));return new t.Selection(n,o)};var t=require("./index"),r=require("../selectorAll"),u=e(r);
},{"./index":349,"../selectorAll":315}],307:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var t=document.documentElement;if(!t.matches){var c=t.webkitMatchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector;e=function(e){return function(){return c.call(this,e)}}}}exports.default=e;
},{}],484:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){"function"!=typeof e&&(e=(0,n.default)(e));for(var t=this._groups,u=t.length,a=new Array(u),o=0;o<u;++o)for(var i,l=t[o],s=l.length,f=a[o]=[],_=0;_<s;++_)(i=l[_])&&e.call(i,i.__data__,_,l)&&f.push(i);return new r.Selection(a,this._parents)};var r=require("./index"),t=require("../matcher"),n=e(t);
},{"./index":349,"../matcher":307}],522:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return new Array(e.length)};
},{}],485:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return new o.Selection(this._enter||this._groups.map(n.default),this._parents)},exports.EnterNode=t;var r=require("./sparse"),n=e(r),o=require("./index");t.prototype={constructor:t,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};
},{"./sparse":522,"./index":349}],487:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r,n,t,o,_){for(var l,i=0,u=r.length,f=_.length;i<f;++i)(l=r[i])?(l.__data__=_[i],t[i]=l):n[i]=new a.EnterNode(e,_[i]);for(;i<u;++i)(l=r[i])&&(o[i]=l)}function n(e,r,n,t,o,_,i){var u,f,c,s={},d=r.length,h=_.length,w=new Array(d);for(u=0;u<d;++u)(f=r[u])&&(w[u]=c=l+i.call(f,f.__data__,u,r),c in s?o[u]=f:s[c]=f);for(u=0;u<h;++u)(f=s[c=l+i.call(e,_[u],u,_)])?(t[u]=f,f.__data__=_[u],s[c]=null):n[u]=new a.EnterNode(e,_[u]);for(u=0;u<d;++u)(f=r[u])&&s[w[u]]===f&&(o[u]=f)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,a){if(!e)return g=new Array(this.size()),d=-1,this.each(function(e){g[++d]=e}),g;var o=a?n:r,l=this._parents,i=this._groups;"function"!=typeof e&&(e=(0,_.default)(e));for(var u=i.length,f=new Array(u),c=new Array(u),s=new Array(u),d=0;d<u;++d){var h=l[d],w=i[d],y=w.length,g=e.call(h,h&&h.__data__,d,l),v=g.length,A=c[d]=new Array(v),p=f[d]=new Array(v);o(h,w,A,p,s[d]=new Array(y),g,a);for(var x,q,E=0,M=0;E<v;++E)if(x=A[E]){for(E>=M&&(M=E+1);!(q=p[M])&&++M<v;);x._next=q||null}}return f=new t.Selection(f,l),f._enter=c,f._exit=s,f};var t=require("./index"),a=require("./enter"),o=require("../constant"),_=e(o),l="$";
},{"./index":349,"./enter":485,"../constant":361}],489:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return new u.Selection(this._exit||this._groups.map(r.default),this._parents)};var t=require("./sparse"),r=e(t),u=require("./index");
},{"./sparse":522,"./index":349}],486:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){for(var t=this._groups,n=r._groups,o=t.length,s=n.length,a=Math.min(o,s),i=new Array(o),u=0;u<a;++u)for(var l,f=t[u],h=n[u],p=f.length,g=i[u]=new Array(p),_=0;_<p;++_)(l=f[_]||h[_])&&(g[_]=l);for(;u<o;++u)i[u]=t[u];return new e.Selection(i,this._parents)};var e=require("./index");
},{"./index":349}],488:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,o=e[t],s=o.length-1,i=o[s];--s>=0;)(n=o[s])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this};
},{}],490:[function(require,module,exports) {
"use strict";function r(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){function n(r,e){return r&&e?t(r.__data__,e.__data__):!r-!e}t||(t=r);for(var a=this._groups,o=a.length,u=new Array(o),_=0;_<o;++_){for(var i,s=a[_],d=s.length,f=u[_]=new Array(d),c=0;c<d;++c)(i=s[c])&&(f[c]=i);f.sort(n)}return new e.Selection(u,this._parents).order()};var e=require("./index");
},{"./index":349}],491:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this};
},{}],492:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e};
},{}],494:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){for(var e=this._groups,r=0,t=e.length;r<t;++r)for(var u=e[r],n=0,o=u.length;n<o;++n){var l=u[n];if(l)return l}return null};
},{}],493:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=0;return this.each(function(){++e}),e};
},{}],496:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return!this.node()};
},{}],495:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var s,a=t[r],l=0,u=a.length;l<u;++l)(s=a[l])&&e.call(s,s.__data__,l,a);return this};
},{}],497:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){return function(){this.removeAttribute(t)}}function n(t){return function(){this.removeAttributeNS(t.space,t.local)}}function u(t,e){return function(){this.setAttribute(t,e)}}function r(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function i(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function o(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,c){var a=(0,l.default)(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((null==c?a.local?n:e:"function"==typeof c?a.local?o:i:a.local?r:u)(a,c))};var c=require("../namespace"),l=t(c);
},{"../namespace":306}],316:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};
},{}],348:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return function(){this.style.removeProperty(e)}}function r(e,t,r){return function(){this.style.setProperty(e,t,r)}}function n(e,t,r){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function u(e,t){return e.style.getPropertyValue(t)||(0,l.default)(e).getComputedStyle(e,null).getPropertyValue(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,o,l){return arguments.length>1?this.each((null==o?t:"function"==typeof o?n:r)(e,o,null==l?"":l)):u(this.node(),e)},exports.styleValue=u;var o=require("../window"),l=e(o);
},{"../window":316}],498:[function(require,module,exports) {
"use strict";function t(t){return function(){delete this[t]}}function e(t,e){return function(){this[t]=e}}function n(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(u,i){return arguments.length>1?this.each((null==i?t:"function"==typeof i?n:e)(u,i)):this.node()[u]};
},{}],499:[function(require,module,exports) {
"use strict";function t(t){return t.trim().split(/^|\s+/)}function n(t){return t.classList||new e(t)}function e(n){this._node=n,this._names=t(n.getAttribute("class")||"")}function i(t,e){for(var i=n(t),s=-1,r=e.length;++s<r;)i.add(e[s])}function s(t,e){for(var i=n(t),s=-1,r=e.length;++s<r;)i.remove(e[s])}function r(t){return function(){i(this,t)}}function o(t){return function(){s(this,t)}}function u(t,n){return function(){(n.apply(this,arguments)?i:s)(this,t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,i){var s=t(e+"");if(arguments.length<2){for(var f=n(this.node()),c=-1,a=s.length;++c<a;)if(!f.contains(s[c]))return!1;return!0}return this.each(("function"==typeof i?u:i?r:o)(s,i))},e.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};
},{}],500:[function(require,module,exports) {
"use strict";function t(){this.textContent=""}function n(t){return function(){this.textContent=t}}function e(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(o){return arguments.length?this.each(null==o?t:("function"==typeof o?e:n)(o)):this.node().textContent};
},{}],501:[function(require,module,exports) {
"use strict";function n(){this.innerHTML=""}function t(n){return function(){this.innerHTML=n}}function e(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i){return arguments.length?this.each(null==i?n:("function"==typeof i?e:t)(i)):this.node().innerHTML};
},{}],502:[function(require,module,exports) {
"use strict";function e(){this.nextSibling&&this.parentNode.appendChild(this)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return this.each(e)};
},{}],503:[function(require,module,exports) {
"use strict";function e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return this.each(e)};
},{}],504:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t="function"==typeof e?e:(0,r.default)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})};var t=require("../creator"),r=e(t);
},{"../creator":303}],507:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(){return null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var n="function"==typeof e?e:(0,u.default)(e),o=null==r?t:"function"==typeof r?r:(0,l.default)(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})};var r=require("../creator"),u=e(r),n=require("../selector"),l=e(n);
},{"../creator":303,"../selector":311}],505:[function(require,module,exports) {
"use strict";function e(){var e=this.parentNode;e&&e.removeChild(this)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return this.each(e)};
},{}],506:[function(require,module,exports) {
"use strict";function e(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function t(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(n){return this.select(n?t:e)};
},{}],508:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return arguments.length?this.property("__data__",e):this.node().__data__};
},{}],352:[function(require,module,exports) {
"use strict";function e(e,n,r){return e=t(e,n,r),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function t(e,t,n){return function(r){var i=u;exports.event=u=r;try{e.call(this,this.__data__,t,n)}finally{exports.event=u=i}}}function n(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function r(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function i(n,r,i){var o=s.hasOwnProperty(n.type)?e:t;return function(e,t,s){var u,a=this.__on,l=o(r,t,s);if(a)for(var p=0,v=a.length;p<v;++p)if((u=a[p]).type===n.type&&u.name===n.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=i),void(u.value=r);this.addEventListener(n.type,l,i),u={type:n.type,name:n.name,value:r,listener:l,capture:i},a?a.push(u):this.__on=[u]}}function o(e,t,n,r){var i=u;e.sourceEvent=u,exports.event=u=e;try{return t.apply(n,r)}finally{exports.event=u=i}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,o){var s,u,a=n(e+""),l=a.length;if(!(arguments.length<2)){for(p=t?i:r,null==o&&(o=!1),s=0;s<l;++s)this.each(p(a[s],t,o));return this}var p=this.node().__on;if(p)for(var v,f=0,c=p.length;f<c;++f)for(s=0,v=p[f];s<l;++s)if((u=a[s]).type===v.type&&u.name===v.name)return v.value},exports.customEvent=o;var s={},u=exports.event=null;if("undefined"!=typeof document){var a=document.documentElement;"onmouseenter"in a||(s={mouseenter:"mouseover",mouseleave:"mouseout"})}
},{}],509:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e,n){var u=(0,r.default)(t),i=u.CustomEvent;"function"==typeof i?i=new i(e,n):(i=u.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function n(t,n){return function(){return e(this,t,n)}}function u(t,n){return function(){return e(this,t,n.apply(this,arguments))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e){return this.each(("function"==typeof e?u:n)(t,e))};var i=require("../window"),r=t(i);
},{"../window":316}],349:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){this._groups=e,this._parents=r}function t(){return new r([[document.documentElement]],fe)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.root=void 0,exports.Selection=r;var u=require("./select"),l=e(u),a=require("./selectAll"),d=e(a),i=require("./filter"),o=e(i),f=require("./data"),s=e(f),n=require("./enter"),q=e(n),c=require("./exit"),p=e(c),m=require("./merge"),x=e(m),y=require("./order"),h=e(y),_=require("./sort"),v=e(_),g=require("./call"),w=e(g),z=require("./nodes"),A=e(z),M=require("./node"),b=e(M),j=require("./size"),E=e(j),O=require("./empty"),P=e(O),S=require("./each"),k=e(S),B=require("./attr"),C=e(B),D=require("./style"),F=e(D),G=require("./property"),H=e(G),I=require("./classed"),J=e(I),K=require("./text"),L=e(K),N=require("./html"),Q=e(N),R=require("./raise"),T=e(R),U=require("./lower"),V=e(U),W=require("./append"),X=e(W),Y=require("./insert"),Z=e(Y),$=require("./remove"),ee=e($),re=require("./clone"),te=e(re),ue=require("./datum"),le=e(ue),ae=require("./on"),de=e(ae),ie=require("./dispatch"),oe=e(ie),fe=exports.root=[null];r.prototype=t.prototype={constructor:r,select:l.default,selectAll:d.default,filter:o.default,data:s.default,enter:q.default,exit:p.default,merge:x.default,order:h.default,sort:v.default,call:w.default,nodes:A.default,node:b.default,size:E.default,empty:P.default,each:k.default,attr:C.default,style:F.default,property:H.default,classed:J.default,text:L.default,html:Q.default,raise:T.default,lower:V.default,append:X.default,insert:Z.default,remove:ee.default,clone:te.default,datum:le.default,on:de.default,dispatch:oe.default},exports.default=t;
},{"./select":483,"./selectAll":482,"./filter":484,"./data":487,"./enter":485,"./exit":489,"./merge":486,"./order":488,"./sort":490,"./call":491,"./nodes":492,"./node":494,"./size":493,"./empty":496,"./each":495,"./attr":497,"./style":348,"./property":498,"./classed":499,"./text":500,"./html":501,"./raise":502,"./lower":503,"./append":504,"./insert":507,"./remove":505,"./clone":506,"./datum":508,"./on":352,"./dispatch":509}],309:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return"string"==typeof t?new e.Selection([[document.querySelector(t)]],[document.documentElement]):new e.Selection([[t]],e.root)};var e=require("./selection/index");
},{"./selection/index":349}],302:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return(0,l.default)((0,r.default)(e).call(document.documentElement))};var t=require("./creator"),r=e(t),u=require("./select"),l=e(u);
},{"./creator":303,"./select":309}],304:[function(require,module,exports) {
"use strict";function t(){return new e}function e(){this._="@"+(++r).toString(36)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=0;e.prototype=t.prototype={constructor:e,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};
},{}],429:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){for(var r,t=e.event;r=t.sourceEvent;)t=r;return t};var e=require("./selection/on");
},{"./selection/on":352}],308:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]};
},{}],305:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var u=(0,r.default)();return u.changedTouches&&(u=u.changedTouches[0]),(0,n.default)(e,u)};var u=require("./sourceEvent"),r=e(u),t=require("./point"),n=e(t);
},{"./sourceEvent":429,"./point":308}],310:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return"string"==typeof t?new e.Selection([document.querySelectorAll(t)],[document.documentElement]):new e.Selection([null==t?[]:t],e.root)};var e=require("./selection/index");
},{"./selection/index":349}],313:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r,u){arguments.length<3&&(u=r,r=(0,t.default)().changedTouches);for(var i,l=0,o=r?r.length:0;l<o;++l)if((i=r[l]).identifier===u)return(0,n.default)(e,i);return null};var r=require("./sourceEvent"),t=e(r),u=require("./point"),n=e(u);
},{"./sourceEvent":429,"./point":308}],312:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){null==r&&(r=(0,t.default)().touches);for(var u=0,o=r?r.length:0,l=new Array(o);u<o;++u)l[u]=(0,n.default)(e,r[u]);return l};var r=require("./sourceEvent"),t=e(r),u=require("./point"),n=e(u);
},{"./sourceEvent":429,"./point":308}],90:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/create");Object.defineProperty(exports,"create",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/creator");Object.defineProperty(exports,"creator",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/local");Object.defineProperty(exports,"local",{enumerable:!0,get:function(){return e(n).default}});var u=require("./src/matcher");Object.defineProperty(exports,"matcher",{enumerable:!0,get:function(){return e(u).default}});var c=require("./src/mouse");Object.defineProperty(exports,"mouse",{enumerable:!0,get:function(){return e(c).default}});var o=require("./src/namespace");Object.defineProperty(exports,"namespace",{enumerable:!0,get:function(){return e(o).default}});var a=require("./src/namespaces");Object.defineProperty(exports,"namespaces",{enumerable:!0,get:function(){return e(a).default}});var i=require("./src/point");Object.defineProperty(exports,"clientPoint",{enumerable:!0,get:function(){return e(i).default}});var s=require("./src/select");Object.defineProperty(exports,"select",{enumerable:!0,get:function(){return e(s).default}});var l=require("./src/selectAll");Object.defineProperty(exports,"selectAll",{enumerable:!0,get:function(){return e(l).default}});var f=require("./src/selection/index");Object.defineProperty(exports,"selection",{enumerable:!0,get:function(){return e(f).default}});var p=require("./src/selector");Object.defineProperty(exports,"selector",{enumerable:!0,get:function(){return e(p).default}});var d=require("./src/selectorAll");Object.defineProperty(exports,"selectorAll",{enumerable:!0,get:function(){return e(d).default}});var b=require("./src/selection/style");Object.defineProperty(exports,"style",{enumerable:!0,get:function(){return b.styleValue}});var m=require("./src/touch");Object.defineProperty(exports,"touch",{enumerable:!0,get:function(){return e(m).default}});var v=require("./src/touches");Object.defineProperty(exports,"touches",{enumerable:!0,get:function(){return e(v).default}});var y=require("./src/window");Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return e(y).default}});var x=require("./src/selection/on");Object.defineProperty(exports,"event",{enumerable:!0,get:function(){return x.event}}),Object.defineProperty(exports,"customEvent",{enumerable:!0,get:function(){return x.customEvent}});
},{"./src/create":302,"./src/creator":303,"./src/local":304,"./src/matcher":307,"./src/mouse":305,"./src/namespace":306,"./src/namespaces":314,"./src/point":308,"./src/select":309,"./src/selectAll":310,"./src/selection/index":349,"./src/selector":311,"./src/selectorAll":315,"./src/selection/style":348,"./src/touch":313,"./src/touches":312,"./src/window":316,"./src/selection/on":352}],382:[function(require,module,exports) {
"use strict";function e(){t.event.stopImmediatePropagation()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.nopropagation=e,exports.default=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()};var t=require("d3-selection");
},{"d3-selection":90}],162:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){var l=e.document.documentElement,o=(0,n.select)(e).on("dragstart.drag",null);t&&(o.on("click.drag",r.default,!0),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in l?o.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.document.documentElement,l=(0,n.select)(e).on("dragstart.drag",r.default,!0);"onselectstart"in t?l.on("selectstart.drag",r.default,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")},exports.yesdrag=t;var n=require("d3-selection"),l=require("./noevent"),r=e(l);
},{"d3-selection":90,"./noevent":382}],384:[function(require,module,exports) {
"use strict";function t(t,i,s,e,h,r,o,n,p,u){this.target=t,this.type=i,this.subject=s,this.identifier=e,this.active=h,this.x=r,this.y=o,this.dx=n,this.dy=p,this._=u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};
},{}],159:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(){return!i.event.button}function n(){return this.parentNode}function o(e){return null==e?{x:i.event.x,y:i.event.y}:e}function r(){return"ontouchstart"in this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function e(e){e.on("mousedown.drag",s).filter(M).on("touchstart.drag",g).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function s(){if(!T&&_.apply(this,arguments)){var e=b("mouse",j.apply(this,arguments),i.mouse,this,arguments);e&&((0,i.select)(i.event.view).on("mousemove.drag",h,!0).on("mouseup.drag",p,!0),(0,c.default)(i.event.view),(0,f.nopropagation)(),x=!1,w=i.event.clientX,q=i.event.clientY,e("start"))}}function h(){if((0,l.default)(),!x){var e=i.event.clientX-w,t=i.event.clientY-q;x=e*e+t*t>D}E.mouse("drag")}function p(){(0,i.select)(i.event.view).on("mousemove.drag mouseup.drag",null),(0,a.yesdrag)(i.event.view,x),(0,l.default)(),E.mouse("end")}function g(){if(_.apply(this,arguments)){var e,t,n=i.event.changedTouches,o=j.apply(this,arguments),r=n.length;for(e=0;e<r;++e)(t=b(n[e].identifier,o,i.touch,this,arguments))&&((0,f.nopropagation)(),t("start"))}}function y(){var e,t,n=i.event.changedTouches,o=n.length;for(e=0;e<o;++e)(t=E[n[e].identifier])&&((0,l.default)(),t("drag"))}function m(){var e,t,n=i.event.changedTouches,o=n.length;for(T&&clearTimeout(T),T=setTimeout(function(){T=null},500),e=0;e<o;++e)(t=E[n[e].identifier])&&((0,f.nopropagation)(),t("end"))}function b(t,n,o,r,u){var a,c,f,l=o(n,t),s=X.copy();if((0,i.customEvent)(new v.default(e,"beforestart",a,t,Y,l[0],l[1],0,0,s),function(){return null!=(i.event.subject=a=k.apply(r,u))&&(c=a.x-l[0]||0,f=a.y-l[1]||0,!0)}))return function d(h){var p,g=l;switch(h){case"start":E[t]=d,p=Y++;break;case"end":delete E[t],--Y;case"drag":l=o(n,t),p=Y}(0,i.customEvent)(new v.default(e,h,a,t,p,l[0]+c,l[1]+f,l[0]-g[0],l[1]-g[1],s),s.apply,s,[h,r,u])}}var w,q,x,T,_=t,j=n,k=o,M=r,E={},X=(0,u.dispatch)("start","drag","end"),Y=0,D=0;return e.filter=function(t){return arguments.length?(_="function"==typeof t?t:(0,d.default)(!!t),e):_},e.container=function(t){return arguments.length?(j="function"==typeof t?t:(0,d.default)(t),e):j},e.subject=function(t){return arguments.length?(k="function"==typeof t?t:(0,d.default)(t),e):k},e.touchable=function(t){return arguments.length?(M="function"==typeof t?t:(0,d.default)(!!t),e):M},e.on=function(){var t=X.on.apply(X,arguments);return t===X?e:t},e.clickDistance=function(t){return arguments.length?(D=(t=+t)*t,e):Math.sqrt(D)},e};var u=require("d3-dispatch"),i=require("d3-selection"),a=require("./nodrag"),c=e(a),f=require("./noevent"),l=e(f),s=require("./constant"),d=e(s),h=require("./event"),v=e(h);
},{"d3-dispatch":65,"d3-selection":90,"./nodrag":162,"./noevent":382,"./constant":361,"./event":384}],73:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/drag");Object.defineProperty(exports,"drag",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/nodrag");Object.defineProperty(exports,"dragDisable",{enumerable:!0,get:function(){return e(t).default}}),Object.defineProperty(exports,"dragEnable",{enumerable:!0,get:function(){return t.yesdrag}});
},{"./src/drag":159,"./src/nodrag":162}],367:[function(require,module,exports) {
"use strict";function t(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e,r){t.prototype=e.prototype=r,r.constructor=t},exports.extend=t;
},{}],123:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(){}function r(e){var t;return e=(e+"").trim().toLowerCase(),(t=k.exec(e))?(t=parseInt(t[1],16),new s(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=x.exec(e))?i(parseInt(t[1],16)):(t=N.exec(e))?new s(t[1],t[2],t[3],1):(t=v.exec(e))?new s(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=M.exec(e))?n(t[1],t[2],t[3],t[4]):(t=q.exec(e))?n(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=E.exec(e))?o(t[1],t[2]/100,t[3]/100,1):(t=$.exec(e))?o(t[1],t[2]/100,t[3]/100,t[4]):R.hasOwnProperty(e)?i(R[e]):"transparent"===e?new s(NaN,NaN,NaN,0):null}function i(e){return new s(e>>16&255,e>>8&255,255&e,1)}function n(e,t,r,i){return i<=0&&(e=t=r=NaN),new s(e,t,r,i)}function a(e){return e instanceof t||(e=r(e)),e?(e=e.rgb(),new s(e.r,e.g,e.b,e.opacity)):new s}function l(e,t,r,i){return 1===arguments.length?a(e):new s(e,t,r,null==i?1:i)}function s(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}function o(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new g(e,t,r,i)}function h(e){if(e instanceof g)return new g(e.h,e.s,e.l,e.opacity);if(e instanceof t||(e=r(e)),!e)return new g;if(e instanceof g)return e;var i=(e=e.rgb()).r/255,n=e.g/255,a=e.b/255,l=Math.min(i,n,a),s=Math.max(i,n,a),o=NaN,h=s-l,u=(s+l)/2;return h?(o=i===s?(n-a)/h+6*(n<a):n===s?(a-i)/h+2:(i-n)/h+4,h/=u<.5?s+l:2-s-l,o*=60):h=u>0&&u<1?0:o,new g(o,h,u,e.opacity)}function u(e,t,r,i){return 1===arguments.length?h(e):new g(e,t,r,null==i?1:i)}function g(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function d(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.brighter=exports.darker=void 0,exports.Color=t,exports.default=r,exports.rgbConvert=a,exports.rgb=l,exports.Rgb=s,exports.hslConvert=h,exports.hsl=u;var c=require("./define"),p=e(c),b=exports.darker=.7,y=exports.brighter=1/b,w="\\s*([+-]?\\d+)\\s*",m="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",f="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",k=/^#([0-9a-f]{3})$/,x=/^#([0-9a-f]{6})$/,N=new RegExp("^rgb\\("+[w,w,w]+"\\)$"),v=new RegExp("^rgb\\("+[f,f,f]+"\\)$"),M=new RegExp("^rgba\\("+[w,w,w,m]+"\\)$"),q=new RegExp("^rgba\\("+[f,f,f,m]+"\\)$"),E=new RegExp("^hsl\\("+[m,f,f]+"\\)$"),$=new RegExp("^hsla\\("+[m,f,f,m]+"\\)$"),R={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};(0,p.default)(t,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),(0,p.default)(s,l,(0,c.extend)(t,{brighter:function(e){return e=null==e?y:Math.pow(y,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?b:Math.pow(b,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),(0,p.default)(g,u,(0,c.extend)(t,{brighter:function(e){return e=null==e?y:Math.pow(y,e),new g(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?b:Math.pow(b,e),new g(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new s(d(e>=240?e-240:e+120,n,i),d(e,n,i),d(e<120?e+240:e-120,n,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));
},{"./define":367}],370:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.deg2rad=Math.PI/180,r=exports.rad2deg=180/Math.PI;
},{}],125:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t instanceof e)return new e(t.l,t.a,t.b,t.opacity);if(t instanceof c){var n=t.h*b.deg2rad;return new e(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof p.Rgb||(t=(0,p.rgbConvert)(t));var i=u(t.r),a=u(t.g),o=u(t.b),s=r((.4124564*i+.3575761*a+.1804375*o)/w),h=r((.2126729*i+.7151522*a+.072175*o)/g);return new e(116*h-16,500*(s-h),200*(h-r((.0193339*i+.119192*a+.9503041*o)/y)),t.opacity)}function i(t,i,r,a){return 1===arguments.length?n(t):new e(t,i,r,null==a?1:a)}function e(t,n,i,e){this.l=+t,this.a=+n,this.b=+i,this.opacity=+e}function r(t){return t>q?Math.pow(t,1/3):t/x+M}function a(t){return t>v?t*t*t:x*(t-M)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function u(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){if(t instanceof c)return new c(t.h,t.c,t.l,t.opacity);t instanceof e||(t=n(t));var i=Math.atan2(t.b,t.a)*b.rad2deg;return new c(i<0?i+360:i,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function h(t,n,i,e){return 1===arguments.length?s(t):new c(t,n,i,null==e?1:e)}function c(t,n,i,e){this.h=+t,this.c=+n,this.l=+i,this.opacity=+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.Lab=e,exports.hcl=h,exports.Hcl=c;var l=require("./define"),f=t(l),p=require("./color"),b=require("./math"),d=18,w=.95047,g=1,y=1.08883,M=4/29,v=6/29,x=3*v*v,q=v*v*v;(0,f.default)(e,i,(0,l.extend)(p.Color,{brighter:function(t){return new e(this.l+d*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new e(this.l-d*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,i=isNaN(this.b)?t:t-this.b/200;return t=g*a(t),n=w*a(n),i=y*a(i),new p.Rgb(o(3.2404542*n-1.5371385*t-.4985314*i),o(-.969266*n+1.8760108*t+.041556*i),o(.0556434*n-.2040259*t+1.0572252*i),this.opacity)}})),(0,f.default)(c,h,(0,l.extend)(p.Color,{brighter:function(t){return new c(this.h,this.c,this.l+d*(null==t?1:t),this.opacity)},darker:function(t){return new c(this.h,this.c,this.l-d*(null==t?1:t),this.opacity)},rgb:function(){return n(this).rgb()}}));
},{"./define":367,"./color":123,"./math":370}],128:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){if(t instanceof i)return new i(t.h,t.s,t.l,t.opacity);t instanceof h.Rgb||(t=(0,h.rgbConvert)(t));var e=t.r/255,r=t.g/255,n=t.b/255,s=(g*n+f*e-p*r)/(g+f-p),o=n-s,u=(d*(r-s)-l*o)/c,b=Math.sqrt(u*u+o*o)/(d*s*(1-s)),w=b?Math.atan2(u,o)*a.rad2deg-120:NaN;return new i(w<0?w+360:w,b,s,t.opacity)}function r(t,r,n,s){return 1===arguments.length?e(t):new i(t,r,n,null==s?1:s)}function i(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r,exports.Cubehelix=i;var n=require("./define"),s=t(n),h=require("./color"),a=require("./math"),o=-.14861,u=1.78277,l=-.29227,c=-.90649,d=1.97294,f=d*c,p=d*u,g=u*l-c*o;(0,s.default)(i,r,(0,n.extend)(h.Color,{brighter:function(t){return t=null==t?h.brighter:Math.pow(h.brighter,t),new i(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?h.darker:Math.pow(h.darker,t),new i(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*a.deg2rad,e=+this.l,r=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),n=Math.sin(t);return new h.Rgb(255*(e+r*(o*i+u*n)),255*(e+r*(l*i+c*n)),255*(e+r*(d*i)),this.opacity)}}));
},{"./define":367,"./color":123,"./math":370}],64:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/color");Object.defineProperty(exports,"color",{enumerable:!0,get:function(){return e(r).default}}),Object.defineProperty(exports,"rgb",{enumerable:!0,get:function(){return r.rgb}}),Object.defineProperty(exports,"hsl",{enumerable:!0,get:function(){return r.hsl}});var t=require("./src/lab");Object.defineProperty(exports,"lab",{enumerable:!0,get:function(){return e(t).default}}),Object.defineProperty(exports,"hcl",{enumerable:!0,get:function(){return t.hcl}});var n=require("./src/cubehelix");Object.defineProperty(exports,"cubehelix",{enumerable:!0,get:function(){return e(n).default}});
},{"./src/color":123,"./src/lab":125,"./src/cubehelix":128}],215:[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){var u=e*e,s=u*e;return((1-3*e+3*u-s)*r+(4-6*u+3*s)*t+(1+3*e+3*u-3*s)*n+s*o)/6}Object.defineProperty(exports,"__esModule",{value:!0}),exports.basis=e,exports.default=function(r){var t=r.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),u=r[o],s=r[o+1],a=o>0?r[o-1]:2*u-s,f=o<t-1?r[o+2]:2*s-u;return e((n-o/t)*t,a,u,s,f)}};
},{}],216:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){var t=r.length;return function(s){var u=Math.floor(((s%=1)<0?++s:s)*t),a=r[(u+t-1)%t],n=r[u%t],o=r[(u+1)%t],i=r[(u+2)%t];return(0,e.basis)((s-u/t)*t,a,n,o,i)}};var e=require("./basis");
},{"./basis":215}],413:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e){return function(n){return t+n*e}}function n(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function r(t,n){var r=n-t;return r?e(t,r>180||r<-180?r-360*Math.round(r/360):r):(0,f.default)(isNaN(t)?n:t)}function u(t){return 1==(t=+t)?o:function(e,r){return r-e?n(e,r,t):(0,f.default)(isNaN(e)?r:e)}}function o(t,n){var r=n-t;return r?e(t,r):(0,f.default)(isNaN(t)?n:t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hue=r,exports.gamma=u,exports.default=o;var a=require("./constant"),f=t(a);
},{"./constant":361}],222:[function(require,module,exports) {
"use strict";function r(r){return r&&r.__esModule?r:{default:r}}function e(r){return function(e){var o,a,u=e.length,n=new Array(u),s=new Array(u),i=new Array(u);for(o=0;o<u;++o)a=(0,t.rgb)(e[o]),n[o]=a.r||0,s[o]=a.g||0,i[o]=a.b||0;return n=r(n),s=r(s),i=r(i),a.opacity=1,function(r){return a.r=n(r),a.g=s(r),a.b=i(r),a+""}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgbBasisClosed=exports.rgbBasis=void 0;var t=require("d3-color"),o=require("./basis"),a=r(o),u=require("./basisClosed"),n=r(u),s=require("./color"),i=r(s);exports.default=function r(e){function o(r,e){var o=a((r=(0,t.rgb)(r)).r,(e=(0,t.rgb)(e)).r),u=a(r.g,e.g),n=a(r.b,e.b),s=(0,i.default)(r.opacity,e.opacity);return function(e){return r.r=o(e),r.g=u(e),r.b=n(e),r.opacity=s(e),r+""}}var a=(0,s.gamma)(e);return o.gamma=r,o}(1);var b=exports.rgbBasis=e(a.default),c=exports.rgbBasisClosed=e(n.default);
},{"d3-color":64,"./basis":215,"./basisClosed":216,"./color":413}],213:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var n,u=r?r.length:0,o=e?Math.min(u,e.length):0,a=new Array(o),f=new Array(u);for(n=0;n<o;++n)a[n]=(0,t.default)(e[n],r[n]);for(;n<u;++n)f[n]=r[n];return function(e){for(n=0;n<o;++n)f[n]=a[n](e);return f}};var r=require("./value"),t=e(r);
},{"./value":214}],219:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var r=new Date;return e=+e,t-=e,function(n){return r.setTime(e+t*n),r}};
},{}],218:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return e=+e,t-=e,function(r){return e+t*r}};
},{}],217:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var u,n={},o={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(u in t)u in e?n[u]=(0,r.default)(e[u],t[u]):o[u]=t[u];return function(e){for(u in n)o[u]=n[u](e);return o}};var t=require("./value"),r=e(t);
},{"./value":214}],223:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function n(e){return function(){return e}}function t(e){return function(n){return e(n)+""}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var o,c,d,f=i.lastIndex=l.lastIndex=0,s=-1,x=[],a=[];for(e+="",r+="";(o=i.exec(e))&&(c=l.exec(r));)(d=c.index)>f&&(d=r.slice(f,d),x[s]?x[s]+=d:x[++s]=d),(o=o[0])===(c=c[0])?x[s]?x[s]+=c:x[++s]=c:(x[++s]=null,a.push({i:s,x:(0,u.default)(o,c)})),f=l.lastIndex;return f<r.length&&(d=r.slice(f),x[s]?x[s]+=d:x[++s]=d),x.length<2?a[0]?t(a[0].x):n(r):(r=a.length,function(e){for(var n,t=0;t<r;++t)x[(n=a[t]).i]=n.x(e);return x.join("")})};var r=require("./number"),u=e(r),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,l=new RegExp(i.source,"g");
},{"./number":218}],214:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var a,n=typeof t;return null==t||"boolean"===n?(0,b.default)(t):("number"===n?l.default:"string"===n?(a=(0,r.color)(t))?(t=a,u.default):q.default:t instanceof r.color?u.default:t instanceof Date?f.default:Array.isArray(t)?o.default:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?c.default:l.default)(e,t)};var r=require("d3-color"),t=require("./rgb"),u=e(t),a=require("./array"),o=e(a),n=require("./date"),f=e(n),i=require("./number"),l=e(i),d=require("./object"),c=e(d),s=require("./string"),q=e(s),y=require("./constant"),b=e(y);
},{"d3-color":64,"./rgb":222,"./array":213,"./date":219,"./number":218,"./object":217,"./string":223,"./constant":361}],220:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return e=+e,t-=e,function(r){return Math.round(e+t*r)}};
},{}],519:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(a,e,r,s,l,n){var o,c,u;return(o=Math.sqrt(a*a+e*e))&&(a/=o,e/=o),(u=a*r+e*s)&&(r-=a*u,s-=e*u),(c=Math.sqrt(r*r+s*s))&&(r/=c,s/=c,u/=c),a*s<e*r&&(a=-a,e=-e,u=-u,o=-o),{translateX:l,translateY:n,rotate:Math.atan2(e,a)*t,skewX:Math.atan(u)*t,scaleX:o,scaleY:c}};var t=180/Math.PI,a=exports.identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};
},{}],458:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return"none"===e?s.identity:(n||(n=document.createElement("DIV"),o=document.documentElement,u=document.defaultView),n.style.transform=e,e=u.getComputedStyle(o.appendChild(n),null).getPropertyValue("transform"),o.removeChild(n),e=e.slice(7,-1).split(","),(0,d.default)(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function r(e){return null==e?s.identity:(l||(l=document.createElementNS("http://www.w3.org/2000/svg","g")),l.setAttribute("transform",e),(e=l.transform.baseVal.consolidate())?(e=e.matrix,(0,d.default)(e.a,e.b,e.c,e.d,e.e,e.f)):s.identity)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseCss=t,exports.parseSvg=r;var n,o,u,l,s=require("./decompose"),d=e(s);
},{"./decompose":519}],292:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,r,n){function u(e){return e.length?e.pop()+" ":""}return function(a,l){var o=[],p=[];return a=e(a),l=e(l),function(e,n,u,a,l,o){if(e!==u||n!==a){var p=l.push("translate(",null,t,null,r);o.push({i:p-4,x:(0,s.default)(e,u)},{i:p-2,x:(0,s.default)(n,a)})}else(u||a)&&l.push("translate("+u+t+a+r)}(a.translateX,a.translateY,l.translateX,l.translateY,o,p),function(e,t,r,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:r.push(u(r)+"rotate(",null,n)-2,x:(0,s.default)(e,t)})):t&&r.push(u(r)+"rotate("+t+n)}(a.rotate,l.rotate,o,p),function(e,t,r,a){e!==t?a.push({i:r.push(u(r)+"skewX(",null,n)-2,x:(0,s.default)(e,t)}):t&&r.push(u(r)+"skewX("+t+n)}(a.skewX,l.skewX,o,p),function(e,t,r,n,a,l){if(e!==r||t!==n){var o=a.push(u(a)+"scale(",null,",",null,")");l.push({i:o-4,x:(0,s.default)(e,r)},{i:o-2,x:(0,s.default)(t,n)})}else 1===r&&1===n||a.push(u(a)+"scale("+r+","+n+")")}(a.scaleX,a.scaleY,l.scaleX,l.scaleY,o,p),a=l=null,function(e){for(var t,r=-1,s=p.length;++r<s;)o[(t=p[r]).i]=t.x(e);return o.join("")}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolateTransformSvg=exports.interpolateTransformCss=void 0;var r=require("../number"),s=e(r),n=require("./parse"),u=exports.interpolateTransformCss=t(n.parseCss,"px, ","px)","deg)"),a=exports.interpolateTransformSvg=t(n.parseSvg,", ",")",")");
},{"../number":218,"./parse":458}],224:[function(require,module,exports) {
"use strict";function t(t){return((t=Math.exp(t))+1/t)/2}function e(t){return((t=Math.exp(t))-1/t)/2}function r(t){return((t=Math.exp(2*t))-1)/(t+1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(M,h){var i,f,s=M[0],c=M[1],l=M[2],p=h[0],x=h[1],v=h[2],d=p-s,g=x-c,q=d*d+g*g;if(q<o)f=Math.log(v/l)/n,i=function(t){return[s+t*d,c+t*g,l*Math.exp(n*t*f)]};else{var _=Math.sqrt(q),b=(v*v-l*l+u*q)/(2*l*a*_),j=(v*v-l*l-u*q)/(2*v*a*_),y=Math.log(Math.sqrt(b*b+1)-b),O=Math.log(Math.sqrt(j*j+1)-j);f=(O-y)/n,i=function(u){var o=u*f,M=t(y),h=l/(a*_)*(M*r(n*o+y)-e(y));return[s+h*d,c+h*g,l*M/t(n*o+y)]}}return i.duration=1e3*f,i};var n=Math.SQRT2,a=2,u=4,o=1e-12;
},{}],229:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return function(t,o){var l=e((t=(0,r.hsl)(t)).h,(o=(0,r.hsl)(o)).h),n=(0,u.default)(t.s,o.s),s=(0,u.default)(t.l,o.l),a=(0,u.default)(t.opacity,o.opacity);return function(e){return t.h=l(e),t.s=n(e),t.l=s(e),t.opacity=a(e),t+""}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hslLong=void 0;var r=require("d3-color"),o=require("./color"),u=e(o);exports.default=t(o.hue);var l=exports.hslLong=t(u.default);
},{"d3-color":64,"./color":413}],226:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){var u=(0,a.default)((e=(0,r.lab)(e)).l,(t=(0,r.lab)(t)).l),l=(0,a.default)(e.a,t.a),o=(0,a.default)(e.b,t.b),c=(0,a.default)(e.opacity,t.opacity);return function(t){return e.l=u(t),e.a=l(t),e.b=o(t),e.opacity=c(t),e+""}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=require("d3-color"),u=require("./color"),a=e(u);
},{"d3-color":64,"./color":413}],227:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return function(t,o){var c=e((t=(0,r.hcl)(t)).h,(o=(0,r.hcl)(o)).h),l=(0,u.default)(t.c,o.c),n=(0,u.default)(t.l,o.l),a=(0,u.default)(t.opacity,o.opacity);return function(e){return t.h=c(e),t.c=l(e),t.l=n(e),t.opacity=a(e),t+""}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hclLong=void 0;var r=require("d3-color"),o=require("./color"),u=e(o);exports.default=t(o.hue);var c=exports.hclLong=t(u.default);
},{"d3-color":64,"./color":413}],225:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return function t(r){function l(t,l){var n=e((t=(0,u.cubehelix)(t)).h,(l=(0,u.cubehelix)(l)).h),i=(0,o.default)(t.s,l.s),a=(0,o.default)(t.l,l.l),c=(0,o.default)(t.opacity,l.opacity);return function(e){return t.h=n(e),t.s=i(e),t.l=a(Math.pow(e,r)),t.opacity=c(e),t+""}}return r=+r,l.gamma=t,l}(1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubehelixLong=void 0;var u=require("d3-color"),r=require("./color"),o=e(r);exports.default=t(r.hue);var l=exports.cubehelixLong=t(o.default);
},{"d3-color":64,"./color":413}],231:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){for(var t=new Array(r),o=0;o<r;++o)t[o]=e(o/(r-1));return t};
},{}],79:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/value");Object.defineProperty(exports,"interpolate",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/array");Object.defineProperty(exports,"interpolateArray",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/basis");Object.defineProperty(exports,"interpolateBasis",{enumerable:!0,get:function(){return e(n).default}});var o=require("./src/basisClosed");Object.defineProperty(exports,"interpolateBasisClosed",{enumerable:!0,get:function(){return e(o).default}});var u=require("./src/date");Object.defineProperty(exports,"interpolateDate",{enumerable:!0,get:function(){return e(u).default}});var i=require("./src/number");Object.defineProperty(exports,"interpolateNumber",{enumerable:!0,get:function(){return e(i).default}});var a=require("./src/object");Object.defineProperty(exports,"interpolateObject",{enumerable:!0,get:function(){return e(a).default}});var l=require("./src/round");Object.defineProperty(exports,"interpolateRound",{enumerable:!0,get:function(){return e(l).default}});var s=require("./src/string");Object.defineProperty(exports,"interpolateString",{enumerable:!0,get:function(){return e(s).default}});var c=require("./src/transform/index");Object.defineProperty(exports,"interpolateTransformCss",{enumerable:!0,get:function(){return c.interpolateTransformCss}}),Object.defineProperty(exports,"interpolateTransformSvg",{enumerable:!0,get:function(){return c.interpolateTransformSvg}});var p=require("./src/zoom");Object.defineProperty(exports,"interpolateZoom",{enumerable:!0,get:function(){return e(p).default}});var f=require("./src/rgb");Object.defineProperty(exports,"interpolateRgb",{enumerable:!0,get:function(){return e(f).default}}),Object.defineProperty(exports,"interpolateRgbBasis",{enumerable:!0,get:function(){return f.rgbBasis}}),Object.defineProperty(exports,"interpolateRgbBasisClosed",{enumerable:!0,get:function(){return f.rgbBasisClosed}});var b=require("./src/hsl");Object.defineProperty(exports,"interpolateHsl",{enumerable:!0,get:function(){return e(b).default}}),Object.defineProperty(exports,"interpolateHslLong",{enumerable:!0,get:function(){return b.hslLong}});var d=require("./src/lab");Object.defineProperty(exports,"interpolateLab",{enumerable:!0,get:function(){return e(d).default}});var g=require("./src/hcl");Object.defineProperty(exports,"interpolateHcl",{enumerable:!0,get:function(){return e(g).default}}),Object.defineProperty(exports,"interpolateHclLong",{enumerable:!0,get:function(){return g.hclLong}});var m=require("./src/cubehelix");Object.defineProperty(exports,"interpolateCubehelix",{enumerable:!0,get:function(){return e(m).default}}),Object.defineProperty(exports,"interpolateCubehelixLong",{enumerable:!0,get:function(){return m.cubehelixLong}});var x=require("./src/quantize");Object.defineProperty(exports,"quantize",{enumerable:!0,get:function(){return e(x).default}});
},{"./src/value":214,"./src/array":213,"./src/basis":215,"./src/basisClosed":216,"./src/date":219,"./src/number":218,"./src/object":217,"./src/round":220,"./src/string":223,"./src/transform/index":292,"./src/zoom":224,"./src/rgb":222,"./src/hsl":229,"./src/lab":226,"./src/hcl":227,"./src/cubehelix":225,"./src/quantize":231}],233:[function(require,module,exports) {
"use strict";function t(){return h||(v(n),h=y.now()+x)}function n(){h=0}function e(){this._call=this._time=this._next=null}function o(t,n,o){var i=new e;return i.restart(t,n,o),i}function i(){t(),++f;for(var n,e=u;e;)(n=h-e._time)>=0&&e._call.call(null,n),e=e._next;--f}function r(){h=(w=y.now())+x,f=_=0;try{i()}finally{f=0,c(),h=0}}function l(){var t=y.now(),n=t-w;n>p&&(x-=n,w=t)}function c(){for(var t,n,e=u,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:u=n);a=t,s(o)}function s(t){if(!f){_&&(_=clearTimeout(_));t-h>24?(t<1/0&&(_=setTimeout(r,t-y.now()-x)),m&&(m=clearInterval(m))):(m||(w=y.now(),m=setInterval(l,p)),f=1,v(r))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.now=t,exports.Timer=e,exports.timer=o,exports.timerFlush=i;var u,a,f=0,_=0,m=0,p=1e3,w=0,h=0,x=0,y="object"==typeof performance&&performance.now?performance:Date,v="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};e.prototype=o.prototype={constructor:e,restart:function(n,e,o){if("function"!=typeof n)throw new TypeError("callback is not a function");o=(null==o?t():+o)+(null==e?0:+e),this._next||a===this||(a?a._next=this:u=this,a=this),this._call=n,this._time=o,s()},stop:function(){this._call&&(this._call=null,this._time=1/0,s())}};
},{}],234:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,t,u){var n=new e.Timer;return t=null==t?0:+t,n.restart(function(e){n.stop(),r(e+t)},t,u),n};var e=require("./timer");
},{"./timer":233}],235:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,t,n){var u=new e.Timer,s=t;return null==t?(u.restart(r,t,n),u):(t=+t,n=null==n?(0,e.now)():+n,u.restart(function e(a){a+=s,u.restart(e,s+=t,n),r(a)},t,n),u)};var e=require("./timer");
},{"./timer":233}],84:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/timer");Object.defineProperty(exports,"now",{enumerable:!0,get:function(){return r.now}}),Object.defineProperty(exports,"timer",{enumerable:!0,get:function(){return r.timer}}),Object.defineProperty(exports,"timerFlush",{enumerable:!0,get:function(){return r.timerFlush}});var t=require("./src/timeout");Object.defineProperty(exports,"timeout",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/interval");Object.defineProperty(exports,"interval",{enumerable:!0,get:function(){return e(n).default}});
},{"./src/timer":233,"./src/timeout":234,"./src/interval":235}],430:[function(require,module,exports) {
"use strict";function t(t,e){var a=r(t,e);if(a.state>u)throw new Error("too late; already scheduled");return a}function e(t,e){var a=r(t,e);if(a.state>d)throw new Error("too late; already started");return a}function r(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function a(t,e,r){function a(f){var c,m,E,D;if(r.state!==l)return i();for(c in u)if((D=u[c]).name===r.name){if(D.state===p)return(0,o.timeout)(a);D.state===_?(D.state=x,D.timer.stop(),D.on.call("interrupt",t,t.__data__,D.index,D.group),delete u[c]):+c<e&&(D.state=x,D.timer.stop(),delete u[c])}if((0,o.timeout)(function(){r.state===p&&(r.state=_,r.timer.restart(n,r.delay,r.time),n(f))}),r.state=d,r.on.call("start",t,t.__data__,r.index,r.group),r.state===d){for(r.state=p,s=new Array(E=r.tween.length),c=0,m=-1;c<E;++c)(D=r.tween[c].value.call(t,t.__data__,r.index,r.group))&&(s[++m]=D);s.length=m+1}}function n(e){for(var a=e<r.duration?r.ease.call(null,e/r.duration):(r.timer.restart(i),r.state=f,1),n=-1,o=s.length;++n<o;)s[n].call(null,a);r.state===f&&(r.on.call("end",t,t.__data__,r.index,r.group),i())}function i(){r.state=x,r.timer.stop(),delete u[e];for(var a in u)return;delete t.__transition}var s,u=t.__transition;u[e]=r,r.timer=(0,o.timer)(function(t){r.state=l,r.timer.restart(a,r.delay,r.time),r.delay<=t&&a(t-r.delay)},0,r.time)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENDED=exports.ENDING=exports.RUNNING=exports.STARTED=exports.STARTING=exports.SCHEDULED=exports.CREATED=void 0,exports.default=function(t,e,r,n,o,l){var d=t.__transition;if(d){if(r in d)return}else t.__transition={};a(t,r,{name:e,index:n,group:o,on:i,tween:s,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:u})},exports.init=t,exports.set=e,exports.get=r;var n=require("d3-dispatch"),o=require("d3-timer"),i=(0,n.dispatch)("start","end","interrupt"),s=[],u=exports.CREATED=0,l=exports.SCHEDULED=1,d=exports.STARTING=2,p=exports.STARTED=3,_=exports.RUNNING=4,f=exports.ENDING=5,x=exports.ENDED=6;
},{"d3-dispatch":65,"d3-timer":84}],289:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,r){var n,i,a,s=t.__transition,l=!0;if(s){r=null==r?null:r+"";for(a in s)(n=s[a]).name===r?(i=n.state>e.STARTING&&n.state<e.ENDING,n.state=e.ENDED,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete s[a]):l=!1;l&&delete t.__transition}};var e=require("./transition/schedule");
},{"./transition/schedule":430}],463:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return this.each(function(){(0,r.default)(this,e)})};var t=require("../interrupt"),r=e(t);
},{"../interrupt":289}],481:[function(require,module,exports) {
"use strict";function e(e,t){var n,i;return function(){var u=(0,r.set)(this,e),a=u.tween;if(a!==n)for(var f=0,l=(i=n=a).length;f<l;++f)if(i[f].name===t){(i=i.slice()).splice(f,1);break}u.tween=i}}function t(e,t,n){var i,u;if("function"!=typeof n)throw new Error;return function(){var a=(0,r.set)(this,e),f=a.tween;if(f!==i){u=(i=f).slice();for(var l={name:t,value:n},o=0,s=u.length;o<s;++o)if(u[o].name===t){u[o]=l;break}o===s&&u.push(l)}a.tween=u}}function n(e,t,n){var i=e._id;return e.each(function(){var e=(0,r.set)(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return(0,r.get)(e,i).value[t]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(n,i){var u=this._id;if(n+="",arguments.length<2){for(var a,f=(0,r.get)(this.node(),u).tween,l=0,o=f.length;l<o;++l)if((a=f[l]).name===n)return a.value;return null}return this.each((null==i?e:t)(u,n,i))},exports.tweenValue=n;var r=require("./schedule");
},{"./schedule":430}],520:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,o){var n;return("number"==typeof o?r.interpolateNumber:o instanceof e.color?r.interpolateRgb:(n=(0,e.color)(o))?(o=n,r.interpolateRgb):r.interpolateString)(t,o)};var e=require("d3-color"),r=require("d3-interpolate");
},{"d3-color":64,"d3-interpolate":79}],464:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){return function(){this.removeAttribute(t)}}function r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function n(t,e,r){var n,u;return function(){var i=this.getAttribute(t);return i===r?null:i===n?u:u=e(n=i,r)}}function u(t,e,r){var n,u;return function(){var i=this.getAttributeNS(t.space,t.local);return i===r?null:i===n?u:u=e(n=i,r)}}function i(t,e,r){var n,u,i;return function(){var l,o=r(this);if(null!=o)return(l=this.getAttribute(t))===o?null:l===n&&o===u?i:i=e(n=l,u=o);this.removeAttribute(t)}}function l(t,e,r){var n,u,i;return function(){var l,o=r(this);if(null!=o)return(l=this.getAttributeNS(t.space,t.local))===o?null:l===n&&o===u?i:i=e(n=l,u=o);this.removeAttributeNS(t.space,t.local)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,s){var v=(0,a.namespace)(t),h="transform"===v?o.interpolateTransformSvg:f.default;return this.attrTween(t,"function"==typeof s?(v.local?l:i)(v,h,(0,c.tweenValue)(this,"attr."+t,s)):null==s?(v.local?r:e)(v):(v.local?u:n)(v,h,s+""))};var o=require("d3-interpolate"),a=require("d3-selection"),c=require("./tween"),s=require("./interpolate"),f=t(s);
},{"d3-interpolate":79,"d3-selection":90,"./tween":481,"./interpolate":520}],466:[function(require,module,exports) {
"use strict";function t(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function e(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,u){var i="attr."+r;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==u)return this.tween(i,null);if("function"!=typeof u)throw new Error;var a=(0,n.namespace)(r);return this.tween(i,(a.local?t:e)(a,u))};var n=require("d3-selection");
},{"d3-selection":90}],468:[function(require,module,exports) {
"use strict";function t(t,e){return function(){(0,i.init)(this,t).delay=+e.apply(this,arguments)}}function e(t,e){return e=+e,function(){(0,i.init)(this,t).delay=e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?t:e)(r,n)):(0,i.get)(this.node(),r).delay};var i=require("./schedule");
},{"./schedule":430}],467:[function(require,module,exports) {
"use strict";function t(t,e){return function(){(0,n.set)(this,t).duration=+e.apply(this,arguments)}}function e(t,e){return e=+e,function(){(0,n.set)(this,t).duration=e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i){var r=this._id;return arguments.length?this.each(("function"==typeof i?t:e)(r,i)):(0,n.get)(this.node(),r).duration};var n=require("./schedule");
},{"./schedule":430}],470:[function(require,module,exports) {
"use strict";function e(e,r){if("function"!=typeof r)throw new Error;return function(){(0,t.set)(this,e).ease=r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){var n=this._id;return arguments.length?this.each(e(n,r)):(0,t.get)(this.node(),n).ease};var t=require("./schedule");
},{"./schedule":430}],473:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){"function"!=typeof t&&(t=(0,e.matcher)(t));for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a)for(var o,u=n[a],_=u.length,h=s[a]=[],l=0;l<_;++l)(o=u[l])&&t.call(o,o.__data__,l,u)&&h.push(o);return new r.Transition(s,this._parents,this._name,this._id)};var e=require("d3-selection"),r=require("./index");
},{"d3-selection":90,"./index":300}],480:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,n=t.length,s=i.length,o=Math.min(n,s),a=new Array(n),h=0;h<o;++h)for(var u,_=t[h],d=i[h],f=_.length,l=a[h]=new Array(f),p=0;p<f;++p)(u=_[p]||d[p])&&(l[p]=u);for(;h<n;++h)a[h]=t[h];return new r.Transition(a,this._parents,this._name,this._id)};var r=require("./index");
},{"./index":300}],469:[function(require,module,exports) {
"use strict";function e(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function t(t,r,i){var o,s,u=e(r)?n.init:n.set;return function(){var e=u(this,t),n=e.on;n!==o&&(s=(o=n).copy()).on(r,i),e.on=s}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var i=this._id;return arguments.length<2?(0,n.get)(this.node(),i).on.on(e):this.each(t(i,e,r))};var n=require("./schedule");
},{"./schedule":430}],476:[function(require,module,exports) {
"use strict";function e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return this.on("end.remove",e(this._id))};
},{}],471:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var n=this._name,i=this._id;"function"!=typeof e&&(e=(0,t.selector)(e));for(var u=this._groups,s=u.length,o=new Array(s),d=0;d<s;++d)for(var l,f,c=u[d],h=c.length,p=o[d]=new Array(h),v=0;v<h;++v)(l=c[v])&&(f=e.call(l,l.__data__,v,c))&&("__data__"in l&&(f.__data__=l.__data__),p[v]=f,(0,a.default)(p[v],n,i,v,p,(0,_.get)(l,i)));return new r.Transition(o,this._parents,n,i)};var t=require("d3-selection"),r=require("./index"),_=require("./schedule"),a=e(_);
},{"d3-selection":90,"./index":300,"./schedule":430}],474:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var i=this._name,l=this._id;"function"!=typeof e&&(e=(0,r.selectorAll)(e));for(var o=this._groups,s=o.length,a=[],f=[],d=0;d<s;++d)for(var _,c=o[d],h=c.length,p=0;p<h;++p)if(_=c[p]){for(var v,g=e.call(_,_.__data__,p,c),q=(0,u.get)(_,l),x=0,y=g.length;x<y;++x)(v=g[x])&&(0,n.default)(v,i,l,x,g,q);a.push(g),f.push(_)}return new t.Transition(a,f,i,l)};var r=require("d3-selection"),t=require("./index"),u=require("./schedule"),n=e(u);
},{"d3-selection":90,"./index":300,"./schedule":430}],472:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return new t(this._groups,this._parents)};var e=require("d3-selection"),t=e.selection.prototype.constructor;
},{"d3-selection":90}],478:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){var r,n,u;return function(){var s=(0,i.style)(this,e),l=(this.style.removeProperty(e),(0,i.style)(this,e));return s===l?null:s===r&&l===n?u:u=t(r=s,n=l)}}function r(e){return function(){this.style.removeProperty(e)}}function n(e,t,r){var n,u;return function(){var s=(0,i.style)(this,e);return s===r?null:s===n?u:u=t(n=s,r)}}function u(e,t,r){var n,u,s;return function(){var l=(0,i.style)(this,e),o=r(this);return null==o&&(this.style.removeProperty(e),o=(0,i.style)(this,e)),l===o?null:l===n&&o===u?s:s=t(n=l,u=o)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,i,o){var f="transform"==(e+="")?s.interpolateTransformCss:a.default;return null==i?this.styleTween(e,t(e,f)).on("end.style."+e,r(e)):this.styleTween(e,"function"==typeof i?u(e,f,(0,l.tweenValue)(this,"style."+e,i)):n(e,f,i+""),o)};var s=require("d3-interpolate"),i=require("d3-selection"),l=require("./tween"),o=require("./interpolate"),a=e(o);
},{"d3-interpolate":79,"d3-selection":90,"./tween":481,"./interpolate":520}],475:[function(require,module,exports) {
"use strict";function e(e,t,n){function r(){var r=this,u=t.apply(r,arguments);return u&&function(t){r.style.setProperty(e,u(t),n)}}return r._value=t,r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,n,r){var u="style."+(t+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==n)return this.tween(u,null);if("function"!=typeof n)throw new Error;return this.tween(u,e(t,n,null==r?"":r))};
},{}],479:[function(require,module,exports) {
"use strict";function t(t){return function(){this.textContent=t}}function e(t){return function(){var e=t(this);this.textContent=null==e?"":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(u){return this.tween("text","function"==typeof u?e((0,n.tweenValue)(this,"text",u)):t(null==u?"":u+""))};var n=require("./tween");
},{"./tween":481}],477:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){for(var e=this._name,n=this._id,a=(0,t.newId)(),u=this._groups,s=u.length,d=0;d<s;++d)for(var o,l=u[d],f=l.length,_=0;_<f;++_)if(o=l[_]){var h=(0,r.get)(o,n);(0,i.default)(o,e,a,_,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new t.Transition(u,this._parents,e,a)};var t=require("./index"),r=require("./schedule"),i=e(r);
},{"./index":300,"./schedule":430}],300:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,r,u){this._groups=e,this._parents=t,this._name=r,this._id=u}function r(e){return(0,i.selection)().transition(e)}function u(){return++H}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transition=t,exports.default=r,exports.newId=u;var i=require("d3-selection"),l=require("./attr"),n=e(l),a=require("./attrTween"),o=e(a),s=require("./delay"),d=e(s),f=require("./duration"),c=e(f),q=require("./ease"),p=e(q),y=require("./filter"),_=e(y),m=require("./merge"),w=e(m),h=require("./on"),x=e(h),T=require("./remove"),v=e(T),g=require("./select"),z=e(g),A=require("./selectAll"),M=e(A),b=require("./selection"),j=e(b),I=require("./style"),O=e(I),P=require("./styleTween"),k=e(P),B=require("./text"),C=e(B),D=require("./transition"),E=e(D),F=require("./tween"),G=e(F),H=0,J=i.selection.prototype;t.prototype=r.prototype={constructor:t,select:z.default,selectAll:M.default,filter:_.default,merge:w.default,selection:j.default,transition:E.default,call:J.call,nodes:J.nodes,node:J.node,size:J.size,empty:J.empty,each:J.each,on:x.default,attr:n.default,attrTween:o.default,style:O.default,styleTween:k.default,text:C.default,remove:v.default,tween:G.default,delay:d.default,duration:c.default,ease:p.default};
},{"d3-selection":90,"./attr":464,"./attrTween":466,"./delay":468,"./duration":467,"./ease":470,"./filter":473,"./merge":480,"./on":469,"./remove":476,"./select":471,"./selectAll":474,"./selection":472,"./style":478,"./styleTween":475,"./text":479,"./transition":477,"./tween":481}],131:[function(require,module,exports) {
"use strict";function e(e){return+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linear=e;
},{}],136:[function(require,module,exports) {
"use strict";function t(t){return t*t}function e(t){return t*(2-t)}function u(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.quadIn=t,exports.quadOut=e,exports.quadInOut=u;
},{}],133:[function(require,module,exports) {
"use strict";function t(t){return t*t*t}function e(t){return--t*t*t+1}function u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubicIn=t,exports.cubicOut=e,exports.cubicInOut=u;
},{}],135:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=3,n=exports.polyIn=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(t),e=exports.polyOut=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(t),o=exports.polyInOut=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(t);
},{}],140:[function(require,module,exports) {
"use strict";function t(t){return 1-Math.cos(t*s)}function n(t){return Math.sin(t*s)}function e(t){return(1-Math.cos(r*t))/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinIn=t,exports.sinOut=n,exports.sinInOut=e;var r=Math.PI,s=r/2;
},{}],138:[function(require,module,exports) {
"use strict";function t(t){return Math.pow(2,10*t-10)}function e(t){return 1-Math.pow(2,-10*t)}function o(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.expIn=t,exports.expOut=e,exports.expInOut=o;
},{}],139:[function(require,module,exports) {
"use strict";function t(t){return 1-Math.sqrt(1-t*t)}function r(t){return Math.sqrt(1- --t*t)}function e(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.circleIn=t,exports.circleOut=r,exports.circleInOut=e;
},{}],137:[function(require,module,exports) {
"use strict";function e(e){return 1-t(1-e)}function t(e){return(e=+e)<r?x*e*e:e<o?x*(e-=u)*e+c:e<i?x*(e-=s)*e+p:x*(e-=b)*e+f}function n(e){return((e*=2)<=1?1-t(1-e):t(e-1)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bounceIn=e,exports.bounceOut=t,exports.bounceInOut=n;var r=4/11,u=6/11,o=8/11,c=.75,s=9/11,i=10/11,p=.9375,b=21/22,f=63/64,x=1/r/r;
},{}],143:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=1.70158,r=exports.backIn=function t(r){function e(t){return t*t*((r+1)*t-r)}return r=+r,e.overshoot=t,e}(t),e=exports.backOut=function t(r){function e(t){return--t*t*((r+1)*t+r)+1}return r=+r,e.overshoot=t,e}(t),n=exports.backInOut=function t(r){function e(t){return((t*=2)<1?t*t*((r+1)*t-r):(t-=2)*t*((r+1)*t+r)+2)/2}return r=+r,e.overshoot=t,e}(t);
},{}],141:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=2*Math.PI,n=1,r=.3,e=exports.elasticIn=function n(r,e){function a(t){return r*Math.pow(2,10*--t)*Math.sin((u-t)/e)}var u=Math.asin(1/(r=Math.max(1,r)))*(e/=t);return a.amplitude=function(r){return n(r,e*t)},a.period=function(t){return n(r,t)},a}(n,r),a=exports.elasticOut=function n(r,e){function a(t){return 1-r*Math.pow(2,-10*(t=+t))*Math.sin((t+u)/e)}var u=Math.asin(1/(r=Math.max(1,r)))*(e/=t);return a.amplitude=function(r){return n(r,e*t)},a.period=function(t){return n(r,t)},a}(n,r),u=exports.elasticInOut=function n(r,e){function a(t){return((t=2*t-1)<0?r*Math.pow(2,10*t)*Math.sin((u-t)/e):2-r*Math.pow(2,-10*t)*Math.sin((u+t)/e))/2}var u=Math.asin(1/(r=Math.max(1,r)))*(e/=t);return a.amplitude=function(r){return n(r,e*t)},a.period=function(t){return n(r,t)},a}(n,r);
},{}],69:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/linear");Object.defineProperty(exports,"easeLinear",{enumerable:!0,get:function(){return e.linear}});var t=require("./src/quad");Object.defineProperty(exports,"easeQuad",{enumerable:!0,get:function(){return t.quadInOut}}),Object.defineProperty(exports,"easeQuadIn",{enumerable:!0,get:function(){return t.quadIn}}),Object.defineProperty(exports,"easeQuadOut",{enumerable:!0,get:function(){return t.quadOut}}),Object.defineProperty(exports,"easeQuadInOut",{enumerable:!0,get:function(){return t.quadInOut}});var r=require("./src/cubic");Object.defineProperty(exports,"easeCubic",{enumerable:!0,get:function(){return r.cubicInOut}}),Object.defineProperty(exports,"easeCubicIn",{enumerable:!0,get:function(){return r.cubicIn}}),Object.defineProperty(exports,"easeCubicOut",{enumerable:!0,get:function(){return r.cubicOut}}),Object.defineProperty(exports,"easeCubicInOut",{enumerable:!0,get:function(){return r.cubicInOut}});var n=require("./src/poly");Object.defineProperty(exports,"easePoly",{enumerable:!0,get:function(){return n.polyInOut}}),Object.defineProperty(exports,"easePolyIn",{enumerable:!0,get:function(){return n.polyIn}}),Object.defineProperty(exports,"easePolyOut",{enumerable:!0,get:function(){return n.polyOut}}),Object.defineProperty(exports,"easePolyInOut",{enumerable:!0,get:function(){return n.polyInOut}});var u=require("./src/sin");Object.defineProperty(exports,"easeSin",{enumerable:!0,get:function(){return u.sinInOut}}),Object.defineProperty(exports,"easeSinIn",{enumerable:!0,get:function(){return u.sinIn}}),Object.defineProperty(exports,"easeSinOut",{enumerable:!0,get:function(){return u.sinOut}}),Object.defineProperty(exports,"easeSinInOut",{enumerable:!0,get:function(){return u.sinInOut}});var c=require("./src/exp");Object.defineProperty(exports,"easeExp",{enumerable:!0,get:function(){return c.expInOut}}),Object.defineProperty(exports,"easeExpIn",{enumerable:!0,get:function(){return c.expIn}}),Object.defineProperty(exports,"easeExpOut",{enumerable:!0,get:function(){return c.expOut}}),Object.defineProperty(exports,"easeExpInOut",{enumerable:!0,get:function(){return c.expInOut}});var o=require("./src/circle");Object.defineProperty(exports,"easeCircle",{enumerable:!0,get:function(){return o.circleInOut}}),Object.defineProperty(exports,"easeCircleIn",{enumerable:!0,get:function(){return o.circleIn}}),Object.defineProperty(exports,"easeCircleOut",{enumerable:!0,get:function(){return o.circleOut}}),Object.defineProperty(exports,"easeCircleInOut",{enumerable:!0,get:function(){return o.circleInOut}});var i=require("./src/bounce");Object.defineProperty(exports,"easeBounce",{enumerable:!0,get:function(){return i.bounceOut}}),Object.defineProperty(exports,"easeBounceIn",{enumerable:!0,get:function(){return i.bounceIn}}),Object.defineProperty(exports,"easeBounceOut",{enumerable:!0,get:function(){return i.bounceOut}}),Object.defineProperty(exports,"easeBounceInOut",{enumerable:!0,get:function(){return i.bounceInOut}});var a=require("./src/back");Object.defineProperty(exports,"easeBack",{enumerable:!0,get:function(){return a.backInOut}}),Object.defineProperty(exports,"easeBackIn",{enumerable:!0,get:function(){return a.backIn}}),Object.defineProperty(exports,"easeBackOut",{enumerable:!0,get:function(){return a.backOut}}),Object.defineProperty(exports,"easeBackInOut",{enumerable:!0,get:function(){return a.backInOut}});var s=require("./src/elastic");Object.defineProperty(exports,"easeElastic",{enumerable:!0,get:function(){return s.elasticOut}}),Object.defineProperty(exports,"easeElasticIn",{enumerable:!0,get:function(){return s.elasticIn}}),Object.defineProperty(exports,"easeElasticOut",{enumerable:!0,get:function(){return s.elasticOut}}),Object.defineProperty(exports,"easeElasticInOut",{enumerable:!0,get:function(){return s.elasticInOut}});
},{"./src/linear":131,"./src/quad":136,"./src/cubic":133,"./src/poly":135,"./src/sin":140,"./src/exp":138,"./src/circle":139,"./src/bounce":137,"./src/back":143,"./src/elastic":141}],465:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){for(var n;!(n=e.__transition)||!(n=n[r]);)if(!(e=e.parentNode))return o.time=(0,a.now)(),o;return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t,u;e instanceof n.Transition?(t=e._id,e=e._name):(t=(0,n.newId)(),(u=o).time=(0,a.now)(),e=null==e?null:e+"");for(var s=this._groups,l=s.length,d=0;d<l;++d)for(var f,_=s[d],c=_.length,p=0;p<c;++p)(f=_[p])&&(0,i.default)(f,e,t,p,_,u||r(f,t));return new n.Transition(s,this._parents,e,t)};var n=require("../transition/index"),t=require("../transition/schedule"),i=e(t),u=require("d3-ease"),a=require("d3-timer"),o={time:null,delay:0,duration:250,ease:u.easeCubicInOut};
},{"../transition/index":300,"../transition/schedule":430,"d3-ease":69,"d3-timer":84}],301:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("d3-selection"),r=require("./interrupt"),i=e(r),n=require("./transition"),u=e(n);t.selection.prototype.interrupt=i.default,t.selection.prototype.transition=u.default;
},{"d3-selection":90,"./interrupt":463,"./transition":465}],288:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,i){var u,l,s=t.__transition;if(s){i=null==i?null:i+"";for(l in s)if((u=s[l]).state>n.SCHEDULED&&u.name===i)return new e.Transition([[t]],r,i,+l)}return null};var e=require("./transition/index"),n=require("./transition/schedule"),r=[null];
},{"./transition/index":300,"./transition/schedule":430}],87:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.interrupt=exports.active=exports.transition=void 0;var r=require("./src/transition/index");Object.defineProperty(exports,"transition",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/active");Object.defineProperty(exports,"active",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/interrupt");Object.defineProperty(exports,"interrupt",{enumerable:!0,get:function(){return e(n).default}}),require("./src/selection/index");
},{"./src/selection/index":301,"./src/transition/index":300,"./src/active":288,"./src/interrupt":289}],356:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,s){this.target=e,this.type=t,this.selection=s};
},{}],91:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){return{type:t}}function n(){return!p.event.button}function r(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function s(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function a(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function u(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function i(){return l(z)}function o(){return l(q)}function l(t){function u(n){var r=n.property("__brush",y).selectAll(".overlay").data([e("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",E.overlay).merge(r).each(function(){var t=s(this).extent;(0,p.select)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),n.selectAll(".selection").data([e("selection")]).enter().append("rect").attr("class","selection").attr("cursor",E.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var a=n.selectAll(".handle").data(t.handles,function(t){return t.type});a.exit().remove(),a.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return E[t.type]}),n.each(i).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",v)}function i(){var t=(0,p.select)(this),e=s(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-G/2:e[0][0]-G/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-G/2:e[0][1]-G/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+G:G}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+G:G})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function o(t,e){return t.__brush.emitter||new l(t,e)}function l(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function v(){function e(){var t=(0,p.mouse)(Y);!$||P||X||(Math.abs(t[0]-et[0])>Math.abs(t[1]-et[1])?X=!0:P=!0),et=t,O=!0,(0,g.default)(),n()}function n(){var t;switch(G=et[0]-tt[0],N=et[1]-tt[1],F){case _:case x:H&&(G=Math.max(R-c,Math.min(W-y,G)),f=c+G,m=y+G),I&&(N=Math.max(U-v,Math.min(Z-C,N)),b=v+N,D=C+N);break;case M:H<0?(G=Math.max(R-c,Math.min(W-c,G)),f=c+G,m=y):H>0&&(G=Math.max(R-y,Math.min(W-y,G)),f=c,m=y+G),I<0?(N=Math.max(U-v,Math.min(Z-v,N)),b=v+N,D=C):I>0&&(N=Math.max(U-C,Math.min(Z-C,N)),b=v,D=C+N);break;case k:H&&(f=Math.max(R,Math.min(W,c-G*H)),m=Math.max(R,Math.min(W,y+G*H))),I&&(b=Math.max(U,Math.min(Z,v-N*I)),D=Math.max(U,Math.min(Z,C+N*I)))}m<f&&(H*=-1,t=c,c=y,y=t,t=f,f=m,m=t,B in K&&st.attr("cursor",E[B=K[B]])),D<b&&(I*=-1,t=v,v=C,C=t,t=b,b=D,D=t,B in S&&st.attr("cursor",E[B=S[B]])),J.selection&&(Q=J.selection),P&&(f=Q[0][0],m=Q[1][0]),X&&(b=Q[0][1],D=Q[1][1]),Q[0][0]===f&&Q[0][1]===b&&Q[1][0]===m&&Q[1][1]===D||(J.selection=[[f,b],[m,D]],i.call(Y),nt.brush())}function r(){if((0,w.nopropagation)(),p.event.touches){if(p.event.touches.length)return;A&&clearTimeout(A),A=setTimeout(function(){A=null},500),rt.on("touchmove.brush touchend.brush touchcancel.brush",null)}else(0,h.dragEnable)(p.event.view,O),at.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);rt.attr("pointer-events","all"),st.attr("cursor",E.overlay),J.selection&&(Q=J.selection),a(Q)&&(J.selection=null,i.call(Y)),nt.end()}function u(){switch(p.event.keyCode){case 16:$=H&&I;break;case 18:F===M&&(H&&(y=m-G*H,c=f+G*H),I&&(C=D-N*I,v=b+N*I),F=k,n());break;case 32:F!==M&&F!==k||(H<0?y=m-G:H>0&&(c=f-G),I<0?C=D-N:I>0&&(v=b-N),F=_,st.attr("cursor",E.selection),n());break;default:return}(0,g.default)()}function l(){switch(p.event.keyCode){case 16:$&&(P=X=$=!1,n());break;case 18:F===k&&(H<0?y=m:H>0&&(c=f),I<0?C=D:I>0&&(v=b),F=M,n());break;case 32:F===_&&(p.event.altKey?(H&&(y=m-G*H,c=f+G*H),I&&(C=D-N*I,v=b+N*I),F=k):(H<0?y=m:H>0&&(c=f),I<0?C=D:I>0&&(v=b),F=M),st.attr("cursor",E[B]),n());break;default:return}(0,g.default)()}if(p.event.touches){if(p.event.changedTouches.length<p.event.touches.length)return(0,g.default)()}else if(A)return;if(j.apply(this,arguments)){var c,f,v,b,y,m,C,D,G,N,O,P,X,Y=this,B=p.event.target.__data__.type,F="selection"===(p.event.metaKey?B="overlay":B)?x:p.event.altKey?k:M,H=t===q?null:T[B],I=t===z?null:V[B],J=s(Y),L=J.extent,Q=J.selection,R=L[0][0],U=L[0][1],W=L[1][0],Z=L[1][1],$=H&&I&&p.event.shiftKey,tt=(0,p.mouse)(Y),et=tt,nt=o(Y,arguments).beforestart();"overlay"===B?J.selection=Q=[[c=t===q?R:tt[0],v=t===z?U:tt[1]],[y=t===q?W:c,C=t===z?Z:v]]:(c=Q[0][0],v=Q[0][1],y=Q[1][0],C=Q[1][1]),f=c,b=v,m=y,D=C;var rt=(0,p.select)(Y).attr("pointer-events","none"),st=rt.selectAll(".overlay").attr("cursor",E[B]);if(p.event.touches)rt.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",r,!0);else{var at=(0,p.select)(p.event.view).on("keydown.brush",u,!0).on("keyup.brush",l,!0).on("mousemove.brush",e,!0).on("mouseup.brush",r,!0);(0,h.dragDisable)(p.event.view)}(0,w.nopropagation)(),(0,d.interrupt)(Y),i.call(Y),nt.start()}}function y(){var e=this.__brush||{selection:null};return e.extent=C.apply(this,arguments),e.dim=t,e}var A,C=r,j=n,D=(0,c.dispatch)(u,"start","brush","end"),G=6;return u.move=function(e,n){e.selection?e.on("start.brush",function(){o(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){o(this,arguments).end()}).tween("brush",function(){function e(t){s.selection=1===t&&a(c)?null:h(t),i.call(r),u.brush()}var r=this,s=r.__brush,u=o(r,arguments),l=s.selection,c=t.input("function"==typeof n?n.apply(this,arguments):n,s.extent),h=(0,f.interpolate)(l,c);return l&&c?e:e(1)}):e.each(function(){var e=arguments,r=this.__brush,s=t.input("function"==typeof n?n.apply(this,e):n,r.extent),u=o(this,e).beforestart();(0,d.interrupt)(this),r.selection=null==s||a(s)?null:s,i.call(this),u.start().brush().end()})},l.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){(0,p.customEvent)(new m.default(u,e,t.output(this.state.selection)),D.apply,D,[e,this.that,this.args])}},u.extent=function(t){return arguments.length?(C="function"==typeof t?t:(0,b.default)([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),u):C},u.filter=function(t){return arguments.length?(j="function"==typeof t?t:(0,b.default)(!!t),u):j},u.handleSize=function(t){return arguments.length?(G=+t,u):G},u.on=function(){var t=D.on.apply(D,arguments);return t===D?u:t},u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.brushSelection=u,exports.brushX=i,exports.brushY=o,exports.default=function(){return l(A)};var c=require("d3-dispatch"),h=require("d3-drag"),f=require("d3-interpolate"),p=require("d3-selection"),d=require("d3-transition"),v=require("./constant"),b=t(v),y=require("./event"),m=t(y),w=require("./noevent"),g=t(w),x={name:"drag"},_={name:"space"},M={name:"handle"},k={name:"center"},z={name:"x",handles:["e","w"].map(e),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},q={name:"y",handles:["n","s"].map(e),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},A={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(e),input:function(t){return t},output:function(t){return t}},E={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},K={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},S={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},T={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},V={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};
},{"d3-dispatch":65,"d3-drag":73,"d3-interpolate":79,"d3-selection":90,"d3-transition":87,"./constant":361,"./event":356,"./noevent":382}],63:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/brush");Object.defineProperty(exports,"brush",{enumerable:!0,get:function(){return e(r).default}}),Object.defineProperty(exports,"brushX",{enumerable:!0,get:function(){return r.brushX}}),Object.defineProperty(exports,"brushY",{enumerable:!0,get:function(){return r.brushY}}),Object.defineProperty(exports,"brushSelection",{enumerable:!0,get:function(){return r.brushSelection}});
},{"./src/brush":91}],358:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=exports.cos=Math.cos,e=exports.sin=Math.sin,s=exports.pi=Math.PI,o=exports.halfPi=s/2,r=exports.tau=2*s,a=exports.max=Math.max;
},{}],94:[function(require,module,exports) {
"use strict";function r(r){return function(e,n){return r(e.source.value+e.target.value,n.source.value+n.target.value)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function u(r){var u,s,f,c,g,i,v=r.length,d=[],h=(0,e.range)(v),p=[],x=[],A=x.groups=new Array(v),y=new Array(v*v);for(u=0,g=-1;++g<v;){for(s=0,i=-1;++i<v;)s+=r[g][i];d.push(s),p.push((0,e.range)(v)),u+=s}for(a&&h.sort(function(r,e){return a(d[r],d[e])}),o&&p.forEach(function(e,n){e.sort(function(e,u){return o(r[n][e],r[n][u])})}),c=(u=(0,n.max)(0,n.tau-t*v)/u)?t:n.tau/v,s=0,g=-1;++g<v;){for(f=s,i=-1;++i<v;){var _=h[g],b=p[_][i],m=r[_][b],q=s,w=s+=m*u;y[b*v+_]={index:_,subindex:b,startAngle:q,endAngle:w,value:m}}A[_]={index:_,startAngle:f,endAngle:s,value:d[_]},s+=c}for(g=-1;++g<v;)for(i=g-1;++i<v;){var j=y[i*v+g],C=y[g*v+i];(j.value||C.value)&&x.push(j.value<C.value?{source:C,target:j}:{source:j,target:C})}return l?x.sort(l):x}var t=0,a=null,o=null,l=null;return u.padAngle=function(r){return arguments.length?(t=(0,n.max)(0,r),u):t},u.sortGroups=function(r){return arguments.length?(a=r,u):a},u.sortSubgroups=function(r){return arguments.length?(o=r,u):o},u.sortChords=function(e){return arguments.length?(null==e?l=null:(l=r(e))._=e,u):l&&l._},u};var e=require("d3-array"),n=require("./math");
},{"d3-array":66,"./math":358}],173:[function(require,module,exports) {
"use strict";function t(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new t}Object.defineProperty(exports,"__esModule",{value:!0});var s=Math.PI,h=2*s,_=1e-6,n=h-_;t.prototype=i.prototype={constructor:t,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,h){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+h)},bezierCurveTo:function(t,i,s,h,_,n){this._+="C"+ +t+","+ +i+","+ +s+","+ +h+","+(this._x1=+_)+","+(this._y1=+n)},arcTo:function(t,i,h,n,e){t=+t,i=+i,h=+h,n=+n,e=+e;var r=this._x1,o=this._y1,a=h-t,u=n-i,c=r-t,x=o-i,y=c*c+x*x;if(e<0)throw new Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(y>_)if(Math.abs(x*a-u*c)>_&&e){var f=h-r,M=n-o,l=a*a+u*u,v=f*f+M*M,p=Math.sqrt(l),b=Math.sqrt(y),d=e*Math.tan((s-Math.acos((l+y-v)/(2*p*b)))/2),w=d/b,T=d/p;Math.abs(w-1)>_&&(this._+="L"+(t+w*c)+","+(i+w*x)),this._+="A"+e+","+e+",0,0,"+ +(x*f>c*M)+","+(this._x1=t+T*a)+","+(this._y1=i+T*u)}else this._+="L"+(this._x1=t)+","+(this._y1=i);else;},arc:function(t,i,e,r,o,a){t=+t,i=+i;var u=(e=+e)*Math.cos(r),c=e*Math.sin(r),x=t+u,y=i+c,f=1^a,M=a?r-o:o-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+x+","+y:(Math.abs(this._x1-x)>_||Math.abs(this._y1-y)>_)&&(this._+="L"+x+","+y),e&&(M<0&&(M=M%h+h),M>n?this._+="A"+e+","+e+",0,1,"+f+","+(t-u)+","+(i-c)+"A"+e+","+e+",0,1,"+f+","+(this._x1=x)+","+(this._y1=y):M>_&&(this._+="A"+e+","+e+",0,"+ +(M>=s)+","+f+","+(this._x1=t+e*Math.cos(o))+","+(this._y1=i+e*Math.sin(o))))},rect:function(t,i,s,h){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +h+"h"+-s+"Z"},toString:function(){return this._}},exports.default=i;
},{}],75:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./src/path");Object.defineProperty(exports,"path",{enumerable:!0,get:function(){return e(t).default}});
},{"./src/path":173}],92:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function n(t){return t.source}function e(t){return t.target}function r(t){return t.radius}function u(t){return t.startAngle}function l(t){return t.endAngle}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function t(){var t,n=i.slice.call(arguments),e=a.apply(this,n),r=s.apply(this,n),u=+p.apply(this,(n[0]=e,n)),l=h.apply(this,n)-c.halfPi,o=d.apply(this,n)-c.halfPi,g=u*(0,c.cos)(l),v=u*(0,c.sin)(l),q=+p.apply(this,(n[0]=r,n)),P=h.apply(this,n)-c.halfPi,A=d.apply(this,n)-c.halfPi;if(y||(y=t=(0,f.path)()),y.moveTo(g,v),y.arc(0,0,u,l,o),l===P&&o===A||(y.quadraticCurveTo(0,0,q*(0,c.cos)(P),q*(0,c.sin)(P)),y.arc(0,0,q,P,A)),y.quadraticCurveTo(0,0,g,v),y.closePath(),t)return y=null,t+""||null}var a=n,s=e,p=r,h=u,d=l,y=null;return t.radius=function(n){return arguments.length?(p="function"==typeof n?n:(0,o.default)(+n),t):p},t.startAngle=function(n){return arguments.length?(h="function"==typeof n?n:(0,o.default)(+n),t):h},t.endAngle=function(n){return arguments.length?(d="function"==typeof n?n:(0,o.default)(+n),t):d},t.source=function(n){return arguments.length?(a=n,t):a},t.target=function(n){return arguments.length?(s=n,t):s},t.context=function(n){return arguments.length?(y=null==n?null:n,t):y},t};var i=require("./array"),a=require("./constant"),o=t(a),c=require("./math"),f=require("d3-path");
},{"./array":360,"./constant":361,"./math":358,"d3-path":75}],62:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/chord");Object.defineProperty(exports,"chord",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/ribbon");Object.defineProperty(exports,"ribbon",{enumerable:!0,get:function(){return e(t).default}});
},{"./src/chord":94,"./src/ribbon":92}],164:[function(require,module,exports) {
"use strict";function t(){}function r(r,e){var i=new t;if(r instanceof t)r.each(function(t,r){i.set(r,t)});else if(Array.isArray(r)){var n,s=-1,o=r.length;if(null==e)for(;++s<o;)i.set(s,r[s]);else for(;++s<o;)i.set(e(n=r[s],s,r),n)}else if(r)for(var u in r)i.set(u,r[u]);return i}Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.prefix="$";t.prototype=r.prototype={constructor:t,has:function(t){return e+t in this},get:function(t){return this[e+t]},set:function(t,r){return this[e+t]=r,this},remove:function(t){var r=e+t;return r in this&&delete this[r]},clear:function(){for(var t in this)t[0]===e&&delete this[t]},keys:function(){var t=[];for(var r in this)r[0]===e&&t.push(r.slice(1));return t},values:function(){var t=[];for(var r in this)r[0]===e&&t.push(this[r]);return t},entries:function(){var t=[];for(var r in this)r[0]===e&&t.push({key:r.slice(1),value:this[r]});return t},size:function(){var t=0;for(var r in this)r[0]===e&&++t;return t},empty:function(){for(var t in this)if(t[0]===e)return!1;return!0},each:function(t){for(var r in this)r[0]===e&&t(this[r],r.slice(1),this)}},exports.default=r;
},{}],156:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function t(){return{}}function e(n,t,e){n[t]=e}function u(){return(0,f.default)()}function r(n,t,e){n.set(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function n(t,e,u,r){if(e>=s.length)return null!=i&&t.sort(i),null!=l?l(t):t;for(var o,c,a,h=-1,p=t.length,d=s[e++],g=(0,f.default)(),v=u();++h<p;)(a=g.get(o=d(c=t[h])+""))?a.push(c):g.set(o,[c]);return g.each(function(t,o){r(v,o,n(t,e,u,r))}),v}function o(n,t){if(++t>s.length)return n;var e,u=a[t-1];return null!=l&&t>=s.length?e=n.entries():(e=[],n.each(function(n,u){e.push({key:u,values:o(n,t)})})),null!=u?e.sort(function(n,t){return u(n.key,t.key)}):e}var i,l,c,s=[],a=[];return c={object:function(u){return n(u,0,t,e)},map:function(t){return n(t,0,u,r)},entries:function(t){return o(n(t,0,u,r),0)},key:function(n){return s.push(n),c},sortKeys:function(n){return a[s.length-1]=n,c},sortValues:function(n){return i=n,c},rollup:function(n){return l=n,c}}};var o=require("./map"),f=n(o);
},{"./map":164}],119:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(){}function r(e,r){var o=new t;if(e instanceof t)e.each(function(e){o.add(e)});else if(e){var a=-1,n=e.length;if(null==r)for(;++a<n;)o.add(e[a]);else for(;++a<n;)o.add(r(e[a],a,e))}return o}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./map"),a=e(o),n=a.default.prototype;t.prototype=r.prototype={constructor:t,has:n.has,add:function(e){return e+="",this[o.prefix+e]=e,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each},exports.default=r;
},{"./map":164}],124:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r=[];for(var t in e)r.push(t);return r};
},{}],121:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r=[];for(var t in e)r.push(e[t]);return r};
},{}],122:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r=[];for(var t in e)r.push({key:t,value:e[t]});return r};
},{}],67:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/nest");Object.defineProperty(exports,"nest",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/set");Object.defineProperty(exports,"set",{enumerable:!0,get:function(){return e(t).default}});var u=require("./src/map");Object.defineProperty(exports,"map",{enumerable:!0,get:function(){return e(u).default}});var n=require("./src/keys");Object.defineProperty(exports,"keys",{enumerable:!0,get:function(){return e(n).default}});var s=require("./src/values");Object.defineProperty(exports,"values",{enumerable:!0,get:function(){return e(s).default}});var a=require("./src/entries");Object.defineProperty(exports,"entries",{enumerable:!0,get:function(){return e(a).default}});
},{"./src/nest":156,"./src/set":119,"./src/map":164,"./src/keys":124,"./src/values":121,"./src/entries":122}],163:[function(require,module,exports) {
"use strict";function n(n){return new Function("d","return {"+n.map(function(n,r){return JSON.stringify(n)+": d["+r+"]"}).join(",")+"}")}function r(r,t){var e=n(r);return function(n,u){return t(e(n),u,r)}}function t(n){var r=Object.create(null),t=[];return n.forEach(function(n){for(var e in n)e in r||t.push(r[e]=e)}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(a){function f(n,r){function t(){if(h)return u;if(v)return v=!1,e;var r,t,a=s;if(n.charCodeAt(a)===o){for(;s++<l&&n.charCodeAt(s)!==o||n.charCodeAt(++s)===o;);return(r=s)>=l?h=!0:(t=n.charCodeAt(s++))===c?v=!0:t===i&&(v=!0,n.charCodeAt(s)===c&&++s),n.slice(a+1,r-1).replace(/""/g,'"')}for(;s<l;){if((t=n.charCodeAt(r=s++))===c)v=!0;else if(t===i)v=!0,n.charCodeAt(s)===c&&++s;else if(t!==d)continue;return n.slice(a,r)}return h=!0,n.slice(a,l)}var a,f=[],l=n.length,s=0,p=0,h=l<=0,v=!1;for(n.charCodeAt(l-1)===c&&--l,n.charCodeAt(l-1)===i&&--l;(a=t())!==u;){for(var A=[];a!==e&&a!==u;)A.push(a),a=t();r&&null==(A=r(A,p++))||f.push(A)}return f}function l(n){return n.map(s).join(a)}function s(n){return null==n?"":p.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}var p=new RegExp('["'+a+"\n\r]"),d=a.charCodeAt(0);return{parse:function(t,e){var u,o,c=f(t,function(t,c){if(u)return u(t,c-1);o=t,u=e?r(t,e):n(t)});return c.columns=o||[],c},parseRows:f,format:function(n,r){return null==r&&(r=t(n)),[r.map(s).join(a)].concat(n.map(function(n){return r.map(function(r){return s(n[r])}).join(a)})).join("\n")},formatRows:function(n){return n.map(l).join("\n")}}};var e={},u={},o=34,c=10,i=13;
},{}],161:[function(require,module,exports) {
"use strict";function s(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.csvFormatRows=exports.csvFormat=exports.csvParseRows=exports.csvParse=void 0;var e=require("./dsv"),r=s(e),o=(0,r.default)(","),t=exports.csvParse=o.parse,a=exports.csvParseRows=o.parseRows,p=exports.csvFormat=o.format,v=exports.csvFormatRows=o.formatRows;
},{"./dsv":163}],165:[function(require,module,exports) {
"use strict";function s(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.tsvFormatRows=exports.tsvFormat=exports.tsvParseRows=exports.tsvParse=void 0;var t=require("./dsv"),e=s(t),r=(0,e.default)("\t"),o=exports.tsvParse=r.parse,a=exports.tsvParseRows=r.parseRows,p=exports.tsvFormat=r.format,v=exports.tsvFormatRows=r.formatRows;
},{"./dsv":163}],74:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/dsv");Object.defineProperty(exports,"dsvFormat",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/csv");Object.defineProperty(exports,"csvParse",{enumerable:!0,get:function(){return t.csvParse}}),Object.defineProperty(exports,"csvParseRows",{enumerable:!0,get:function(){return t.csvParseRows}}),Object.defineProperty(exports,"csvFormat",{enumerable:!0,get:function(){return t.csvFormat}}),Object.defineProperty(exports,"csvFormatRows",{enumerable:!0,get:function(){return t.csvFormatRows}});var s=require("./src/tsv");Object.defineProperty(exports,"tsvParse",{enumerable:!0,get:function(){return s.tsvParse}}),Object.defineProperty(exports,"tsvParseRows",{enumerable:!0,get:function(){return s.tsvParseRows}}),Object.defineProperty(exports,"tsvFormat",{enumerable:!0,get:function(){return s.tsvFormat}}),Object.defineProperty(exports,"tsvFormatRows",{enumerable:!0,get:function(){return s.tsvFormatRows}});
},{"./src/dsv":163,"./src/csv":161,"./src/tsv":165}],167:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(n,t){function e(){var e,u,i=r.length,l=0,o=0;for(e=0;e<i;++e)l+=(u=r[e]).x,o+=u.y;for(l=l/i-n,o=o/i-t,e=0;e<i;++e)(u=r[e]).x-=l,u.y-=o}var r;return null==n&&(n=0),null==t&&(t=0),e.initialize=function(n){r=n},e.x=function(t){return arguments.length?(n=+t,e):n},e.y=function(n){return arguments.length?(t=+n,e):t},e};
},{}],387:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return 1e-6*(Math.random()-.5)};
},{}],400:[function(require,module,exports) {
"use strict";function r(r,t,l,e){if(isNaN(t)||isNaN(l))return r;var n,a,i,o,s,u,_,h,c,f=r._root,y={data:e},x=r._x0,d=r._y0,N=r._x1,v=r._y1;if(!f)return r._root=y,r;for(;f.length;)if((u=t>=(a=(x+N)/2))?x=a:N=a,(_=l>=(i=(d+v)/2))?d=i:v=i,n=f,!(f=f[h=_<<1|u]))return n[h]=y,r;if(o=+r._x.call(null,f.data),s=+r._y.call(null,f.data),t===o&&l===s)return y.next=f,n?n[h]=y:r._root=y,r;do{n=n?n[h]=new Array(4):r._root=new Array(4),(u=t>=(a=(x+N)/2))?x=a:N=a,(_=l>=(i=(d+v)/2))?d=i:v=i}while((h=_<<1|u)==(c=(s>=i)<<1|o>=a));return n[c]=f,n[h]=y,r}function t(t){var l,e,n,a,i=t.length,o=new Array(i),s=new Array(i),u=1/0,_=1/0,h=-1/0,c=-1/0;for(e=0;e<i;++e)isNaN(n=+this._x.call(null,l=t[e]))||isNaN(a=+this._y.call(null,l))||(o[e]=n,s[e]=a,n<u&&(u=n),n>h&&(h=n),a<_&&(_=a),a>c&&(c=a));for(h<u&&(u=this._x0,h=this._x1),c<_&&(_=this._y0,c=this._y1),this.cover(u,_).cover(h,c),e=0;e<i;++e)r(this,o[e],s[e],t[e]);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){var l=+this._x.call(null,t),e=+this._y.call(null,t);return r(this.cover(l,e),l,e,t)},exports.addAll=t;
},{}],399:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,h=this._y1;if(isNaN(r))s=(r=Math.floor(t))+1,h=(i=Math.floor(e))+1;else{if(!(r>t||t>s||i>e||e>h))return this;var o,a,_=s-r,l=this._root;switch(a=(e<(i+h)/2)<<1|t<(r+s)/2){case 0:do{o=new Array(4),o[a]=l,l=o}while(_*=2,s=r+_,h=i+_,t>s||e>h);break;case 1:do{o=new Array(4),o[a]=l,l=o}while(_*=2,r=s-_,h=i+_,r>t||e>h);break;case 2:do{o=new Array(4),o[a]=l,l=o}while(_*=2,s=r+_,i=h-_,t>s||i>e);break;case 3:do{o=new Array(4),o[a]=l,l=o}while(_*=2,r=s-_,i=h-_,r>t||i>e)}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=h,this};
},{}],410:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e};
},{}],402:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};
},{}],513:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e,s,i,o){this.node=t,this.x0=e,this.y0=s,this.x1=i,this.y1=o};
},{}],404:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,a){var u,n,r,s,d,h,i,f=this._x0,o=this._y0,_=this._x1,p=this._y1,x=[],c=this._root;for(c&&x.push(new l.default(c,f,o,_,p)),null==a?a=1/0:(f=e-a,o=t-a,_=e+a,p=t+a,a*=a);h=x.pop();)if(!(!(c=h.node)||(n=h.x0)>_||(r=h.y0)>p||(s=h.x1)<f||(d=h.y1)<o))if(c.length){var v=(n+s)/2,y=(r+d)/2;x.push(new l.default(c[3],v,y,s,d),new l.default(c[2],n,y,v,d),new l.default(c[1],v,r,s,y),new l.default(c[0],n,r,v,y)),(i=(t>=y)<<1|e>=v)&&(h=x[x.length-1],x[x.length-1]=x[x.length-1-i],x[x.length-1-i]=h)}else{var g=e-+this._x.call(null,c.data),w=t-+this._y.call(null,c.data),q=g*g+w*w;if(q<a){var M=Math.sqrt(a=q);f=e-M,o=t-M,_=e+M,p=t+M,u=c.data}}return u};var t=require("./quad"),l=e(t);
},{"./quad":513}],401:[function(require,module,exports) {
"use strict";function t(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){if(isNaN(h=+this._x.call(null,t))||isNaN(n=+this._y.call(null,t)))return this;var e,i,r,s,h,n,l,o,u,f,a,x,_=this._root,d=this._x0,c=this._y0,v=this._x1,g=this._y1;if(!_)return this;if(_.length)for(;;){if((u=h>=(l=(d+v)/2))?d=l:v=l,(f=n>=(o=(c+g)/2))?c=o:g=o,e=_,!(_=_[a=f<<1|u]))return this;if(!_.length)break;(e[a+1&3]||e[a+2&3]||e[a+3&3])&&(i=e,x=a)}for(;_.data!==t;)if(r=_,!(_=_.next))return this;return(s=_.next)&&delete _.next,r?(s?r.next=s:delete r.next,this):e?(s?e[a]=s:delete e[a],(_=e[0]||e[1]||e[2]||e[3])&&_===(e[3]||e[2]||e[1]||e[0])&&!_.length&&(i?i[x]=_:this._root=_),this):(this._root=s,this)},exports.removeAll=t;
},{}],407:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return this._root};
},{}],408:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e};
},{}],403:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t,s,r,n,a,d,f=[],h=this._root;for(h&&f.push(new u.default(h,this._x0,this._y0,this._x1,this._y1));t=f.pop();)if(!e(h=t.node,r=t.x0,n=t.y0,a=t.x1,d=t.y1)&&h.length){var i=(r+a)/2,o=(n+d)/2;(s=h[3])&&f.push(new u.default(s,i,o,a,d)),(s=h[2])&&f.push(new u.default(s,r,o,i,d)),(s=h[1])&&f.push(new u.default(s,i,n,a,o)),(s=h[0])&&f.push(new u.default(s,r,n,i,o))}return this};var t=require("./quad"),u=e(t);
},{"./quad":513}],409:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t,r=[],s=[];for(this._root&&r.push(new u.default(this._root,this._x0,this._y0,this._x1,this._y1));t=r.pop();){var o=t.node;if(o.length){var n,h=t.x0,a=t.y0,d=t.x1,f=t.y1,i=(h+d)/2,p=(a+f)/2;(n=o[0])&&r.push(new u.default(n,h,a,i,p)),(n=o[1])&&r.push(new u.default(n,i,a,d,p)),(n=o[2])&&r.push(new u.default(n,h,p,i,f)),(n=o[3])&&r.push(new u.default(n,i,p,d,f))}s.push(t)}for(;t=s.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this};var t=require("./quad"),u=e(t);
},{"./quad":513}],405:[function(require,module,exports) {
"use strict";function t(t){return t[0]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultX=t,exports.default=function(t){return arguments.length?(this._x=t,this):this._x};
},{}],406:[function(require,module,exports) {
"use strict";function t(t){return t[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultY=t,exports.default=function(t){return arguments.length?(this._y=t,this):this._y};
},{}],204:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,u){var a=new r(null==t?w.defaultX:t,null==u?M.defaultY:u,NaN,NaN,NaN,NaN);return null==e?a:a.addAll(e)}function r(e,t,r,u,a,i){this._x=e,this._y=t,this._x0=r,this._y0=u,this._x1=a,this._y1=i,this._root=void 0}function u(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var a=require("./add"),i=e(a),o=require("./cover"),d=e(o),l=require("./data"),n=e(l),f=require("./extent"),s=e(f),_=require("./find"),h=e(_),v=require("./remove"),x=e(v),y=require("./root"),c=e(y),q=require("./size"),p=e(q),A=require("./visit"),N=e(A),g=require("./visitAfter"),m=e(g),w=require("./x"),z=e(w),M=require("./y"),b=e(M),j=t.prototype=r.prototype;j.copy=function(){var e,t,a=new r(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return a;if(!i.length)return a._root=u(i),a;for(e=[{source:i,target:a._root=new Array(4)}];i=e.pop();)for(var o=0;o<4;++o)(t=i.source[o])&&(t.length?e.push({source:t,target:i.target[o]=new Array(4)}):i.target[o]=u(t));return a},j.add=i.default,j.addAll=a.addAll,j.cover=d.default,j.data=n.default,j.extent=s.default,j.find=h.default,j.remove=x.default,j.removeAll=v.removeAll,j.root=c.default,j.size=p.default,j.visit=N.default,j.visitAfter=m.default,j.x=z.default,j.y=b.default;
},{"./add":400,"./cover":399,"./data":410,"./extent":402,"./find":404,"./remove":401,"./root":407,"./size":408,"./visit":403,"./visitAfter":409,"./x":405,"./y":406}],77:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/quadtree");Object.defineProperty(exports,"quadtree",{enumerable:!0,get:function(){return e(r).default}});
},{"./src/quadtree":204}],168:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.x+t.vx}function e(t){return t.y+t.vy}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){function n(){function t(t,r,e,n,i){var u=t.data,a=t.r,d=y+a;if(!u)return r>x+d||n<x-d||e>s+d||i<s-d;if(u.index>o.index){var v=x-u.x-u.vx,c=s-u.y-u.vy,h=v*v+c*c;h<d*d&&(0===v&&(v=(0,f.default)(),h+=v*v),0===c&&(c=(0,f.default)(),h+=c*c),h=(d-(h=Math.sqrt(h)))/h*l,o.vx+=(v*=h)*(d=(a*=a)/(g+a)),o.vy+=(c*=h)*d,u.vx-=v*(d=1-d),u.vy-=c*d)}}for(var n,i,o,x,s,y,g,h=d.length,q=0;q<c;++q)for(i=(0,a.quadtree)(d,r,e).visitAfter(u),n=0;n<h;++n)o=d[n],y=v[o.index],g=y*y,x=o.x+o.vx,s=o.y+o.vy,i.visit(t)}function u(t){if(t.data)return t.r=v[t.data.index];for(var r=t.r=0;r<4;++r)t[r]&&t[r].r>t.r&&(t.r=t[r].r)}function o(){if(d){var r,e,n=d.length;for(v=new Array(n),r=0;r<n;++r)e=d[r],v[e.index]=+t(e,r,d)}}var d,v,l=1,c=1;return"function"!=typeof t&&(t=(0,i.default)(null==t?1:+t)),n.initialize=function(t){d=t,o()},n.iterations=function(t){return arguments.length?(c=+t,n):c},n.strength=function(t){return arguments.length?(l=+t,n):l},n.radius=function(r){return arguments.length?(t="function"==typeof r?r:(0,i.default)(+r),o(),n):t},n};var n=require("./constant"),i=t(n),u=require("./jiggle"),f=t(u),a=require("d3-quadtree");
},{"./constant":361,"./jiggle":387,"d3-quadtree":77}],166:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return e.index}function n(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){function r(t){for(var n=0,r=e.length;n<p;++n)for(var i,u,f,a,c,g,s,v=0;v<r;++v)u=(i=e[v]).source,a=(f=i.target).x+f.vx-u.x-u.vx||(0,o.default)(),c=f.y+f.vy-u.y-u.vy||(0,o.default)(),a*=g=((g=Math.sqrt(a*a+c*c))-d[v])/g*t*l[v],c*=g,f.vx-=a*(s=x[v]),f.vy-=c*s,u.vx+=a*(s=1-s),u.vy+=c*s}function u(){if(g){var t,r,i=g.length,u=e.length,o=(0,f.map)(g,v);for(t=0,s=new Array(i);t<u;++t)(r=e[t]).index=t,"object"!=typeof r.source&&(r.source=n(o,r.source)),"object"!=typeof r.target&&(r.target=n(o,r.target)),s[r.source.index]=(s[r.source.index]||0)+1,s[r.target.index]=(s[r.target.index]||0)+1;for(t=0,x=new Array(u);t<u;++t)r=e[t],x[t]=s[r.source.index]/(s[r.source.index]+s[r.target.index]);l=new Array(u),a(),d=new Array(u),c()}}function a(){if(g)for(var t=0,n=e.length;t<n;++t)l[t]=+y(e[t],t,e)}function c(){if(g)for(var t=0,n=e.length;t<n;++t)d[t]=+h(e[t],t,e)}var l,d,g,s,x,v=t,y=function(e){return 1/Math.min(s[e.source.index],s[e.target.index])},h=(0,i.default)(30),p=1;return null==e&&(e=[]),r.initialize=function(e){g=e,u()},r.links=function(t){return arguments.length?(e=t,u(),r):e},r.id=function(e){return arguments.length?(v=e,r):v},r.iterations=function(e){return arguments.length?(p=+e,r):p},r.strength=function(e){return arguments.length?(y="function"==typeof e?e:(0,i.default)(+e),a(),r):y},r.distance=function(e){return arguments.length?(h="function"==typeof e?e:(0,i.default)(+e),c(),r):h},r};var r=require("./constant"),i=e(r),u=require("./jiggle"),o=e(u),f=require("d3-collection");
},{"./constant":361,"./jiggle":387,"d3-collection":67}],170:[function(require,module,exports) {
"use strict";function n(n){return n.x}function t(n){return n.y}Object.defineProperty(exports,"__esModule",{value:!0}),exports.x=n,exports.y=t,exports.default=function(n){function t(){a(),g.call("tick",f),h<s&&(d.stop(),g.call("end",f))}function a(){var t,e,r=n.length;for(h+=(v-h)*x,p.each(function(n){n(h)}),t=0;t<r;++t)null==(e=n[t]).fx?e.x+=e.vx*=y:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=y:(e.y=e.fy,e.vy=0)}function c(){for(var t,e=0,r=n.length;e<r;++e){if(t=n[e],t.index=e,isNaN(t.x)||isNaN(t.y)){var i=u*Math.sqrt(e),a=e*o;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function l(t){return t.initialize&&t.initialize(n),t}var f,h=1,s=.001,x=1-Math.pow(s,1/300),v=0,y=.6,p=(0,r.map)(),d=(0,i.timer)(t),g=(0,e.dispatch)("tick","end");return null==n&&(n=[]),c(),f={tick:a,restart:function(){return d.restart(t),f},stop:function(){return d.stop(),f},nodes:function(t){return arguments.length?(n=t,c(),p.each(l),f):n},alpha:function(n){return arguments.length?(h=+n,f):h},alphaMin:function(n){return arguments.length?(s=+n,f):s},alphaDecay:function(n){return arguments.length?(x=+n,f):+x},alphaTarget:function(n){return arguments.length?(v=+n,f):v},velocityDecay:function(n){return arguments.length?(y=1-n,f):1-y},force:function(n,t){return arguments.length>1?(null==t?p.remove(n):p.set(n,l(t)),f):p.get(n)},find:function(t,e,r){var i,u,o,a,c,l=0,f=n.length;for(null==r?r=1/0:r*=r,l=0;l<f;++l)(o=(i=t-(a=n[l]).x)*i+(u=e-a.y)*u)<r&&(c=a,r=o);return c},on:function(n,t){return arguments.length>1?(g.on(n,t),f):g.on(n)}}};var e=require("d3-dispatch"),r=require("d3-collection"),i=require("d3-timer"),u=10,o=Math.PI*(3-Math.sqrt(5));
},{"d3-dispatch":65,"d3-collection":67,"d3-timer":84}],169:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function t(t){var e,n=l.length,r=(0,u.quadtree)(l,i.x,i.y).visitAfter(a);for(o=t,e=0;e<n;++e)d=l[e],r.visit(f)}function e(){if(l){var t,e,n=l.length;for(s=new Array(n),t=0;t<n;++t)e=l[t],s[e.index]=+v(e,t,l)}}function a(t){var e,n,a,r,u,i=0,f=0;if(t.length){for(a=r=u=0;u<4;++u)(e=t[u])&&(n=Math.abs(e.value))&&(i+=e.value,f+=n,a+=n*e.x,r+=n*e.y);t.x=a/f,t.y=r/f}else{(e=t).x=e.data.x,e.y=e.data.y;do{i+=s[e.data.index]}while(e=e.next)}t.value=i}function f(t,e,n,a){if(!t.value)return!0;var u=t.x-d.x,i=t.y-d.y,f=a-e,l=u*u+i*i;if(f*f/c<l)return l<x&&(0===u&&(u=(0,r.default)(),l+=u*u),0===i&&(i=(0,r.default)(),l+=i*i),l<h&&(l=Math.sqrt(h*l)),d.vx+=u*t.value*o/l,d.vy+=i*t.value*o/l),!0;if(!(t.length||l>=x)){(t.data!==d||t.next)&&(0===u&&(u=(0,r.default)(),l+=u*u),0===i&&(i=(0,r.default)(),l+=i*i),l<h&&(l=Math.sqrt(h*l)));do{t.data!==d&&(f=s[t.data.index]*o/l,d.vx+=u*f,d.vy+=i*f)}while(t=t.next)}}var l,d,o,s,v=(0,n.default)(-30),h=1,x=1/0,c=.81;return t.initialize=function(t){l=t,e()},t.strength=function(a){return arguments.length?(v="function"==typeof a?a:(0,n.default)(+a),e(),t):v},t.distanceMin=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t.distanceMax=function(e){return arguments.length?(x=e*e,t):Math.sqrt(x)},t.theta=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t};var e=require("./constant"),n=t(e),a=require("./jiggle"),r=t(a),u=require("d3-quadtree"),i=require("./simulation");
},{"./constant":361,"./jiggle":387,"d3-quadtree":77,"./simulation":170}],171:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,n,r){function u(t){for(var e=0,u=o.length;e<u;++e){var f=o[e],a=f.x-n||1e-6,c=f.y-r||1e-6,s=Math.sqrt(a*a+c*c),d=(l[e]-s)*i[e]*t/s;f.vx+=a*d,f.vy+=c*d}}function f(){if(o){var n,e=o.length;for(i=new Array(e),l=new Array(e),n=0;n<e;++n)l[n]=+t(o[n],n,o),i[n]=isNaN(l[n])?0:+a(o[n],n,o)}}var o,i,l,a=(0,e.default)(.1);return"function"!=typeof t&&(t=(0,e.default)(+t)),null==n&&(n=0),null==r&&(r=0),u.initialize=function(t){o=t,f()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:(0,e.default)(+t),f(),u):a},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:(0,e.default)(+n),f(),u):t},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(t){return arguments.length?(r=+t,u):r},u};var n=require("./constant"),e=t(n);
},{"./constant":361}],172:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){function n(t){for(var n,e=0,r=u.length;e<r;++e)(n=u[e]).vx+=(o[e]-n.x)*f[e]*t}function r(){if(u){var n,e=u.length;for(f=new Array(e),o=new Array(e),n=0;n<e;++n)f[n]=isNaN(o[n]=+t(u[n],n,u))?0:+i(u[n],n,u)}}var u,f,o,i=(0,e.default)(.1);return"function"!=typeof t&&(t=(0,e.default)(null==t?0:+t)),n.initialize=function(t){u=t,r()},n.strength=function(t){return arguments.length?(i="function"==typeof t?t:(0,e.default)(+t),r(),n):i},n.x=function(u){return arguments.length?(t="function"==typeof u?u:(0,e.default)(+u),r(),n):t},n};var n=require("./constant"),e=t(n);
},{"./constant":361}],174:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){function n(t){for(var n,e=0,r=u.length;e<r;++e)(n=u[e]).vy+=(o[e]-n.y)*f[e]*t}function r(){if(u){var n,e=u.length;for(f=new Array(e),o=new Array(e),n=0;n<e;++n)f[n]=isNaN(o[n]=+t(u[n],n,u))?0:+i(u[n],n,u)}}var u,f,o,i=(0,e.default)(.1);return"function"!=typeof t&&(t=(0,e.default)(null==t?0:+t)),n.initialize=function(t){u=t,r()},n.strength=function(t){return arguments.length?(i="function"==typeof t?t:(0,e.default)(+t),r(),n):i},n.y=function(u){return arguments.length?(t="function"==typeof u?u:(0,e.default)(+u),r(),n):t},n};var n=require("./constant"),e=t(n);
},{"./constant":361}],70:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/center");Object.defineProperty(exports,"forceCenter",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/collide");Object.defineProperty(exports,"forceCollide",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/link");Object.defineProperty(exports,"forceLink",{enumerable:!0,get:function(){return e(n).default}});var u=require("./src/manyBody");Object.defineProperty(exports,"forceManyBody",{enumerable:!0,get:function(){return e(u).default}});var o=require("./src/radial");Object.defineProperty(exports,"forceRadial",{enumerable:!0,get:function(){return e(o).default}});var c=require("./src/simulation");Object.defineProperty(exports,"forceSimulation",{enumerable:!0,get:function(){return e(c).default}});var i=require("./src/x");Object.defineProperty(exports,"forceX",{enumerable:!0,get:function(){return e(i).default}});var f=require("./src/y");Object.defineProperty(exports,"forceY",{enumerable:!0,get:function(){return e(f).default}});
},{"./src/center":167,"./src/collide":168,"./src/link":166,"./src/manyBody":169,"./src/radial":171,"./src/simulation":170,"./src/x":172,"./src/y":174}],510:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]};
},{}],368:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return(e=(0,r.default)(Math.abs(e)))?e[1]:NaN};var t=require("./formatDecimal"),r=e(t);
},{"./formatDecimal":510}],374:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return function(r,n){for(var u=r.length,s=[],o=0,i=e[0],a=0;u>0&&i>0&&(a+i+1>n&&(i=Math.max(1,n-a)),s.push(r.substring(u-=i,u+i)),!((a+=i+1)>n));)i=e[o=(o+1)%e.length];return s.reverse().join(t)}};
},{}],372:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}};
},{}],511:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){e:for(var t,s=(e=e.toPrecision(r)).length,a=1,c=-1;a<s;++a)switch(e[a]){case".":c=t=a;break;case"0":0===c&&(c=a),t=a;break;case"e":break e;default:c>0&&(c=0)}return c>0?e.slice(0,c)+e.slice(t+1):e};
},{}],371:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.prefixExponent=void 0,exports.default=function(e,r){var o=(0,t.default)(e,r);if(!o)return e+"";var a=o[0],i=o[1],u=i-(exports.prefixExponent=n=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,f=a.length;return u===f?a:u>f?a+new Array(u-f+1).join("0"):u>0?a.slice(0,u)+"."+a.slice(u):"0."+new Array(1-u).join("0")+(0,t.default)(e,Math.max(0,r+u-1))[0]};var r=require("./formatDecimal"),t=e(r),n=exports.prefixExponent=void 0;
},{"./formatDecimal":510}],512:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var n=(0,t.default)(e,r);if(!n)return e+"";var u=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+u:u.length>a+1?u.slice(0,a+1)+"."+u.slice(a+1):u+new Array(a-u.length+2).join("0")};var r=require("./formatDecimal"),t=e(r);
},{"./formatDecimal":510}],369:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./formatDefault"),n=t(r),e=require("./formatPrefixAuto"),u=t(e),o=require("./formatRounded"),i=t(o);exports.default={"":n.default,"%":function(t,r){return(100*t).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return(0,i.default)(100*t,r)},r:i.default,s:u.default,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};
},{"./formatDefault":511,"./formatPrefixAuto":371,"./formatRounded":512}],130:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function i(t){return new e(t)}function e(t){if(!(i=o.exec(t)))throw new Error("invalid format: "+t);var i,e=i[1]||" ",s=i[2]||">",h=i[3]||"-",n=i[4]||"",l=!!i[5],a=i[6]&&+i[6],u=!!i[7],p=i[8]&&+i[8].slice(1),c=i[9]||"";"n"===c?(u=!0,c="g"):r.default[c]||(c=""),(l||"0"===e&&"="===s)&&(l=!0,e="0",s="="),this.fill=e,this.align=s,this.sign=h,this.symbol=n,this.zero=l,this.width=a,this.comma=u,this.precision=p,this.type=c}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var s=require("./formatTypes"),r=t(s),o=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;i.prototype=e.prototype,e.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};
},{"./formatTypes":369}],127:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){function t(e){function t(e){var t,u,f,s=b,d=v;if("c"===y)d=q(e)+d,e="";else{var h=(e=+e)<0;if(e=q(Math.abs(e),x),h&&0==+e&&(h=!1),s=(h?"("===i?i:"-":"-"===i||"("===i?"":i)+s,d=("s"===y?m[8+c.prefixExponent/3]:"")+d+(h&&"("===i?")":""),k)for(t=-1,u=e.length;++t<u;)if(48>(f=e.charCodeAt(t))||f>57){d=(46===f?o+e.slice(t+1):e.slice(t))+d,e=e.slice(0,t);break}}M&&!p&&(e=a(e,1/0));var w=s.length+e.length+d.length,P=w<g?new Array(g-w+1).join(r):"";switch(M&&p&&(e=a(P+e,P.length?g-d.length:1/0),P=""),n){case"<":e=s+e+d+P;break;case"=":e=s+P+e+d;break;case"^":e=P.slice(0,w=P.length>>1)+s+e+d+P.slice(w);break;default:e=P+s+e+d}return l(e)}var r=(e=(0,f.default)(e)).fill,n=e.align,i=e.sign,h=e.symbol,p=e.zero,g=e.width,M=e.comma,x=e.precision,y=e.type,b="$"===h?u[0]:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===h?u[1]:/[%p]/.test(y)?d:"",q=s.default[y],k=!y||/[defgprs%]/.test(y);return x=null==x?y?6:12:/[gprs]/.test(y)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),t.toString=function(){return e+""},t}var a=e.grouping&&e.thousands?(0,n.default)(e.grouping,e.thousands):h.default,u=e.currency,o=e.decimal,l=e.numerals?(0,i.default)(e.numerals):h.default,d=e.percent||"%";return{format:t,formatPrefix:function(e,a){var n=t((e=(0,f.default)(e),e.type="f",e)),u=3*Math.max(-8,Math.min(8,Math.floor((0,r.default)(a)/3))),i=Math.pow(10,-u),o=m[8+u/3];return function(e){return n(i*e)+o}}}};var t=require("./exponent"),r=e(t),a=require("./formatGroup"),n=e(a),u=require("./formatNumerals"),i=e(u),o=require("./formatSpecifier"),f=e(o),l=require("./formatTypes"),s=e(l),c=require("./formatPrefixAuto"),d=require("./identity"),h=e(d),m=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];
},{"./exponent":368,"./formatGroup":374,"./formatNumerals":372,"./formatSpecifier":130,"./formatTypes":369,"./formatPrefixAuto":371,"./identity":363}],134:[function(require,module,exports) {
"use strict";function r(r){return r&&r.__esModule?r:{default:r}}function e(r){return t=(0,f.default)(r),exports.format=a=t.format,exports.formatPrefix=u=t.formatPrefix,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatPrefix=exports.format=void 0,exports.default=e;var t,o=require("./locale"),f=r(o),a=exports.format=void 0,u=exports.formatPrefix=void 0;e({decimal:".",thousands:",",grouping:[3],currency:["$",""]});
},{"./locale":127}],132:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return Math.max(0,-(0,r.default)(Math.abs(e)))};var t=require("./exponent"),r=e(t);
},{"./exponent":368}],129:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,a.default)(t)/3)))-(0,a.default)(Math.abs(e)))};var t=require("./exponent"),a=e(t);
},{"./exponent":368}],126:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,u.default)(t)-(0,u.default)(e))+1};var t=require("./exponent"),u=e(t);
},{"./exponent":368}],68:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/defaultLocale");Object.defineProperty(exports,"formatDefaultLocale",{enumerable:!0,get:function(){return e(r).default}}),Object.defineProperty(exports,"format",{enumerable:!0,get:function(){return r.format}}),Object.defineProperty(exports,"formatPrefix",{enumerable:!0,get:function(){return r.formatPrefix}});var t=require("./src/locale");Object.defineProperty(exports,"formatLocale",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/formatSpecifier");Object.defineProperty(exports,"formatSpecifier",{enumerable:!0,get:function(){return e(n).default}});var o=require("./src/precisionFixed");Object.defineProperty(exports,"precisionFixed",{enumerable:!0,get:function(){return e(o).default}});var i=require("./src/precisionPrefix");Object.defineProperty(exports,"precisionPrefix",{enumerable:!0,get:function(){return e(i).default}});var u=require("./src/precisionRound");Object.defineProperty(exports,"precisionRound",{enumerable:!0,get:function(){return e(u).default}});
},{"./src/defaultLocale":134,"./src/locale":127,"./src/formatSpecifier":130,"./src/precisionFixed":132,"./src/precisionPrefix":129,"./src/precisionRound":126}],375:[function(require,module,exports) {
"use strict";function t(){this.reset()}function s(t,s,e){var i=t.s=s+e,n=i-s,r=i-n;t.t=s-r+(e-n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return new t},t.prototype={constructor:t,reset:function(){this.s=this.t=0},add:function(t){s(e,t,this.t),s(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new t;
},{}],378:[function(require,module,exports) {
"use strict";function t(t){return t>1?0:t<-1?a:Math.acos(t)}function e(t){return t>1?p:t<-1?-p:Math.asin(t)}function s(t){return(t=q(t/2))*t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=t,exports.asin=e,exports.haversin=s;var r=exports.epsilon=1e-6,o=exports.epsilon2=1e-12,a=exports.pi=Math.PI,p=exports.halfPi=a/2,n=exports.quarterPi=a/4,x=exports.tau=2*a,i=exports.degrees=180/a,h=exports.radians=a/180,M=exports.abs=Math.abs,u=exports.atan=Math.atan,c=exports.atan2=Math.atan2,l=exports.cos=Math.cos,f=exports.ceil=Math.ceil,g=exports.exp=Math.exp,d=exports.floor=Math.floor,P=exports.log=Math.log,b=exports.pow=Math.pow,q=exports.sin=Math.sin,v=exports.sign=Math.sign||function(t){return t>0?1:t<0?-1:0},w=exports.sqrt=Math.sqrt,_=exports.tan=Math.tan;
},{}],377:[function(require,module,exports) {
"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],158:[function(require,module,exports) {
"use strict";function n(n,t){n&&r.hasOwnProperty(n.type)&&r[n.type](n,t)}function t(n,t,o){var e,r=-1,i=n.length-o;for(t.lineStart();++r<i;)e=n[r],t.point(e[0],e[1],e[2]);t.lineEnd()}function o(n,o){var e=-1,r=n.length;for(o.polygonStart();++e<r;)t(n[e],o,1);o.polygonEnd()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,o){t&&e.hasOwnProperty(t.type)?e[t.type](t,o):n(t,o)};var e={Feature:function(t,o){n(t.geometry,o)},FeatureCollection:function(t,o){for(var e=t.features,r=-1,i=e.length;++r<i;)n(e[r].geometry,o)}},r={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var o=n.coordinates,e=-1,r=o.length;++e<r;)n=o[e],t.point(n[0],n[1],n[2])},LineString:function(n,o){t(n.coordinates,o,0)},MultiLineString:function(n,o){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)t(e[r],o,0)},Polygon:function(n,t){o(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)o(e[r],t)},GeometryCollection:function(t,o){for(var e=t.geometries,r=-1,i=e.length;++r<i;)n(e[r],o)}};
},{}],147:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(){v.point=a}function n(){r(i,u)}function a(e,t){v.point=r,i=e,u=t,e*=p.radians,t*=p.radians,o=e,d=(0,p.cos)(t=t/2+p.quarterPi),s=(0,p.sin)(t)}function r(e,t){e*=p.radians,t=(t*=p.radians)/2+p.quarterPi;var n=e-o,a=n>=0?1:-1,r=a*n,i=(0,p.cos)(t),u=(0,p.sin)(t),l=s*u,f=d*i+l*(0,p.cos)(r),c=l*a*(0,p.sin)(r);x.add((0,p.atan2)(c,f)),o=e,d=i,s=u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.areaStream=exports.areaRingSum=void 0,exports.default=function(e){return h.reset(),(0,q.default)(e,v),2*h};var i,u,o,d,s,l=require("./adder"),f=e(l),p=require("./math"),c=require("./noop"),S=e(c),m=require("./stream"),q=e(m),x=exports.areaRingSum=(0,f.default)(),h=(0,f.default)(),v=exports.areaStream={point:S.default,lineStart:S.default,lineEnd:S.default,polygonStart:function(){x.reset(),v.lineStart=t,v.lineEnd=n},polygonEnd:function(){var e=+x;h.add(e<0?p.tau+e:e),this.lineStart=this.lineEnd=this.point=S.default},sphere:function(){h.add(p.tau)}};
},{"./adder":375,"./math":378,"./noop":377,"./stream":158}],379:[function(require,module,exports) {
"use strict";function r(r){return[(0,c.atan2)(r[1],r[0]),(0,c.asin)(r[2])]}function e(r){var e=r[0],t=r[1],n=(0,c.cos)(t);return[n*(0,c.cos)(e),n*(0,c.sin)(e),(0,c.sin)(t)]}function t(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function n(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function s(r,e){r[0]+=e[0],r[1]+=e[1],r[2]+=e[2]}function a(r,e){return[r[0]*e,r[1]*e,r[2]*e]}function o(r){var e=(0,c.sqrt)(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=e,r[1]/=e,r[2]/=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.spherical=r,exports.cartesian=e,exports.cartesianDot=t,exports.cartesianCross=n,exports.cartesianAddInPlace=s,exports.cartesianScale=a,exports.cartesianNormalizeInPlace=o;var c=require("./math");
},{"./math":378}],146:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function n(e,n){v.push(E=[c=e,p=e]),n<d&&(d=n),n>S&&(S=n)}function r(e,n){var r=(0,_.cartesian)([e*x.radians,n*x.radians]);if(h){var a=(0,_.cartesianCross)(h,r),t=[a[1],-a[0],0],i=(0,_.cartesianCross)(t,a);(0,_.cartesianNormalizeInPlace)(i),i=(0,_.spherical)(i);var o,u=e-g,s=u>0?1:-1,f=i[0]*x.degrees*s,m=(0,x.abs)(u)>180;m^(s*g<f&&f<s*e)?(o=i[1]*x.degrees)>S&&(S=o):(f=(f+360)%360-180,m^(s*g<f&&f<s*e)?(o=-i[1]*x.degrees)<d&&(d=o):(n<d&&(d=n),n>S&&(S=n))),m?e<g?l(c,e)>l(c,p)&&(p=e):l(e,p)>l(c,p)&&(c=e):p>=c?(e<c&&(c=e),e>p&&(p=e)):e>g?l(c,e)>l(c,p)&&(p=e):l(e,p)>l(c,p)&&(c=e)}else v.push(E=[c=e,p=e]);n<d&&(d=n),n>S&&(S=n),h=r,g=e}function a(){j.point=r}function t(){E[0]=c,E[1]=p,j.point=n,h=null}function i(e,n){if(h){var a=e-g;P.add((0,x.abs)(a)>180?a+(a>0?360:-360):a)}else m=e,N=n;b.areaStream.point(e,n),r(e,n)}function o(){b.areaStream.lineStart()}function u(){i(m,N),b.areaStream.lineEnd(),(0,x.abs)(P)>x.epsilon&&(c=-(p=180)),E[0]=c,E[1]=p,h=null}function l(e,n){return(n-=e)<0?n+360:n}function s(e,n){return e[0]-n[0]}function f(e,n){return e[0]<=e[1]?e[0]<=n&&n<=e[1]:n<e[0]||e[1]<n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var n,r,a,t,i,o,u;if(S=p=-(c=d=1/0),v=[],(0,M.default)(e,j),r=v.length){for(v.sort(s),n=1,i=[a=v[0]];n<r;++n)f(a,(t=v[n])[0])||f(a,t[1])?(l(a[0],t[1])>l(a[0],a[1])&&(a[1]=t[1]),l(t[0],a[1])>l(a[0],a[1])&&(a[0]=t[0])):i.push(a=t);for(o=-1/0,n=0,a=i[r=i.length-1];n<=r;a=t,++n)t=i[n],(u=l(a[1],t[0]))>o&&(o=u,c=t[0],p=a[1])}return v=E=null,c===1/0||d===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,d],[p,S]]};var c,d,p,S,g,m,N,h,v,E,q=require("./adder"),y=e(q),b=require("./area"),_=require("./cartesian"),x=require("./math"),C=require("./stream"),M=e(C),P=(0,y.default)(),j={point:n,lineStart:a,lineEnd:t,polygonStart:function(){j.point=i,j.lineStart=o,j.lineEnd=u,P.reset(),b.areaStream.polygonStart()},polygonEnd:function(){b.areaStream.polygonEnd(),j.point=n,j.lineStart=a,j.lineEnd=t,b.areaRingSum<0?(c=-(p=180),d=-(S=90)):P>x.epsilon?S=90:P<-x.epsilon&&(d=-90),E[0]=c,E[1]=p}};
},{"./adder":375,"./area":147,"./cartesian":379,"./math":378,"./stream":158}],148:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function i(n,i){n*=j.radians,i*=j.radians;var t=(0,j.cos)(i);s(t*(0,j.cos)(n),t*(0,j.sin)(n),(0,j.sin)(i))}function s(n,i,s){p+=(n-p)/++f,v+=(i-v)/f,q+=(s-q)/f}function t(){z.point=a}function a(n,i){n*=j.radians,i*=j.radians;var t=(0,j.cos)(i);x=t*(0,j.cos)(n),M=t*(0,j.sin)(n),b=(0,j.sin)(i),z.point=o,s(x,M,b)}function o(n,i){n*=j.radians,i*=j.radians;var t=(0,j.cos)(i),a=t*(0,j.cos)(n),o=t*(0,j.sin)(n),r=(0,j.sin)(i),e=(0,j.atan2)((0,j.sqrt)((e=M*r-b*o)*e+(e=b*a-x*r)*e+(e=x*o-M*a)*e),x*a+M*o+b*r);l+=e,g+=e*(x+(x=a)),E+=e*(M+(M=o)),N+=e*(b+(b=r)),s(x,M,b)}function r(){z.point=i}function e(){z.point=c}function u(){d(h,m),z.point=i}function c(n,i){h=n,m=i,n*=j.radians,i*=j.radians,z.point=d;var t=(0,j.cos)(i);x=t*(0,j.cos)(n),M=t*(0,j.sin)(n),b=(0,j.sin)(i),s(x,M,b)}function d(n,i){n*=j.radians,i*=j.radians;var t=(0,j.cos)(i),a=t*(0,j.cos)(n),o=t*(0,j.sin)(n),r=(0,j.sin)(i),e=M*r-b*o,u=b*a-x*r,c=x*o-M*a,d=(0,j.sqrt)(e*e+u*u+c*c),f=(0,j.asin)(d),p=d&&-f/d;S+=p*e,_+=p*u,y+=p*c,l+=f,g+=f*(x+(x=a)),E+=f*(M+(M=o)),N+=f*(b+(b=r)),s(x,M,b)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(n){f=l=p=v=q=g=E=N=S=_=y=0,(0,w.default)(n,z);var i=S,s=_,t=y,a=i*i+s*s+t*t;return a<j.epsilon2&&(i=g,s=E,t=N,l<j.epsilon&&(i=p,s=v,t=q),(a=i*i+s*s+t*t)<j.epsilon2)?[NaN,NaN]:[(0,j.atan2)(s,i)*j.degrees,(0,j.asin)(t/(0,j.sqrt)(a))*j.degrees]};var f,l,p,v,q,g,E,N,S,_,y,h,m,x,M,b,j=require("./math"),O=require("./noop"),P=n(O),k=require("./stream"),w=n(k),z={sphere:P.default,point:i,lineStart:t,lineEnd:r,polygonStart:function(){z.lineStart=e,z.lineEnd=u},polygonEnd:function(){z.lineStart=t,z.lineEnd=r}};
},{"./math":378,"./noop":377,"./stream":158}],385:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){function r(r,n){return r=e(r,n),t(r[0],r[1])}return e.invert&&t.invert&&(r.invert=function(r,n){return(r=t.invert(r,n))&&e.invert(r[0],r[1])}),r};
},{}],160:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function r(n,r){return[n>o.pi?n-o.tau:n<-o.pi?n+o.tau:n,r]}function e(n,e,t){return(n%=o.tau)?e||t?(0,s.default)(i(n),a(e,t)):i(n):e||t?a(e,t):r}function t(n){return function(r,e){return r+=n,[r>o.pi?r-o.tau:r<-o.pi?r+o.tau:r,e]}}function i(n){var r=t(n);return r.invert=t(-n),r}function a(n,r){function e(n,r){var e=(0,o.cos)(r),s=(0,o.cos)(n)*e,c=(0,o.sin)(n)*e,d=(0,o.sin)(r),f=d*t+s*i;return[(0,o.atan2)(c*a-f*u,s*t-d*i),(0,o.asin)(f*a+c*u)]}var t=(0,o.cos)(n),i=(0,o.sin)(n),a=(0,o.cos)(r),u=(0,o.sin)(r);return e.invert=function(n,r){var e=(0,o.cos)(r),s=(0,o.cos)(n)*e,c=(0,o.sin)(n)*e,d=(0,o.sin)(r),f=d*a-c*u;return[(0,o.atan2)(c*a+d*u,s*t+f*i),(0,o.asin)(f*t-s*i)]},e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateRadians=e,exports.default=function(n){function r(r){return r=n(r[0]*o.radians,r[1]*o.radians),r[0]*=o.degrees,r[1]*=o.degrees,r}return n=e(n[0]*o.radians,n[1]*o.radians,n.length>2?n[2]*o.radians:0),r.invert=function(r){return r=n.invert(r[0]*o.radians,r[1]*o.radians),r[0]*=o.degrees,r[1]*=o.degrees,r},r};var u=require("./compose"),s=n(u),o=require("./math");r.invert=r;
},{"./compose":385,"./math":378}],152:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,a,i,o,s){if(a){var c=(0,u.cos)(t),l=(0,u.sin)(t),f=i*a;null==o?(o=t+i*u.tau,s=t-f/2):(o=n(c,o),s=n(c,s),(i>0?o<s:o>s)&&(o+=i*u.tau));for(var d,p=o;i>0?p>s:p<s;p-=f)d=(0,r.spherical)([c,-l*(0,u.cos)(p),-l*(0,u.sin)(p)]),e.point(d[0],d[1])}}function n(e,t){(t=(0,r.cartesian)(t))[0]-=e,(0,r.cartesianNormalizeInPlace)(t);var n=(0,u.acos)(-t[1]);return((-t[2]<0?-n:n)+u.tau-u.epsilon)%u.tau}Object.defineProperty(exports,"__esModule",{value:!0}),exports.circleStream=t,exports.default=function(){function e(){var e=a.apply(this,arguments),i=s.apply(this,arguments)*u.radians,f=c.apply(this,arguments)*u.radians;return n=[],r=(0,o.rotateRadians)(-e[0]*u.radians,-e[1]*u.radians,0).invert,t(l,i,f,1),e={type:"Polygon",coordinates:[n]},n=r=null,e}var n,r,a=(0,i.default)([0,0]),s=(0,i.default)(90),c=(0,i.default)(6),l={point:function(e,t){n.push(e=r(e,t)),e[0]*=u.degrees,e[1]*=u.degrees}};return e.center=function(t){return arguments.length?(a="function"==typeof t?t:(0,i.default)([+t[0],+t[1]]),e):a},e.radius=function(t){return arguments.length?(s="function"==typeof t?t:(0,i.default)(+t),e):s},e.precision=function(t){return arguments.length?(c="function"==typeof t?t:(0,i.default)(+t),e):c},e};var r=require("./cartesian"),a=require("./constant"),i=e(a),u=require("./math"),o=require("./rotation");
},{"./cartesian":379,"./constant":361,"./math":378,"./rotation":160}],444:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e,n=[];return{point:function(n,t){e.push([n,t])},lineStart:function(){n.push(e=[])},lineEnd:t.default,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}};var n=require("../noop"),t=e(n);
},{"../noop":377}],428:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,t){return(0,e.abs)(r[0]-t[0])<e.epsilon&&(0,e.abs)(r[1]-t[1])<e.epsilon};var e=require("./math");
},{"./math":378}],455:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function n(e,n,t,i){this.x=e,this.z=n,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function t(e){if(n=e.length){for(var n,t,i=0,l=e[0];++i<n;)l.n=t=e[i],t.p=l,l=t;l.n=t=e[0],t.p=l}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,i,o,r,f){var u,s,h=[],p=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,i,o=e[0],r=e[t];if((0,l.default)(o,r)){for(f.lineStart(),u=0;u<t;++u)f.point((o=e[u])[0],o[1]);f.lineEnd()}else h.push(i=new n(o,e,null,!0)),p.push(i.o=new n(o,null,i,!1)),h.push(i=new n(r,e,null,!1)),p.push(i.o=new n(r,null,i,!0))}}),h.length){for(p.sort(i),t(h),t(p),u=0,s=p.length;u<s;++u)p[u].e=o=!o;for(var a,v,d=h[0];;){for(var c=d,x=!0;c.v;)if((c=c.n)===d)return;a=c.z,f.lineStart();do{if(c.v=c.o.v=!0,c.e){if(x)for(u=0,s=a.length;u<s;++u)f.point((v=a[u])[0],v[1]);else r(c.x,c.n.x,1,f);c=c.n}else{if(x)for(a=c.p.z,u=a.length-1;u>=0;--u)f.point((v=a[u])[0],v[1]);else r(c.x,c.p.x,-1,f);c=c.p}a=(c=c.o).z,x=!x}while(!c.v);f.lineEnd()}}};var i=require("../pointEqual"),l=e(i);
},{"../pointEqual":428}],381:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var a=r[0],n=r[1],o=[(0,i.sin)(a),-(0,i.cos)(a),0],c=0,u=0;t.reset();for(var l=0,d=e.length;l<d;++l)if(v=(f=e[l]).length)for(var f,v,p=f[v-1],q=p[0],P=p[1]/2+i.quarterPi,_=(0,i.sin)(P),h=(0,i.cos)(P),m=0;m<v;++m,q=x,_=C,h=I,p=g){var g=f[m],x=g[0],z=g[1]/2+i.quarterPi,C=(0,i.sin)(z),I=(0,i.cos)(z),M=x-q,N=M>=0?1:-1,b=N*M,j=b>i.pi,y=_*C;if(t.add((0,i.atan2)(y*N*(0,i.sin)(b),h*I+y*(0,i.cos)(b))),c+=j?M+N*i.tau:M,j^q>=a^x>=a){var O=(0,s.cartesianCross)((0,s.cartesian)(p),(0,s.cartesian)(g));(0,s.cartesianNormalizeInPlace)(O);var k=(0,s.cartesianCross)(o,O);(0,s.cartesianNormalizeInPlace)(k);var w=(j^M>=0?-1:1)*(0,i.asin)(k[2]);(n>w||n===w&&(O[0]||O[1]))&&(u+=j^M>=0?1:-1)}}return(c<-i.epsilon||c<i.epsilon&&t<-i.epsilon)^1&u};var r=require("./adder"),a=e(r),s=require("./cartesian"),i=require("./math"),t=(0,a.default)();
},{"./adder":375,"./cartesian":379,"./math":378}],446:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function t(n){return n.length>1}function e(n,t){return((n=n.x)[0]<0?n[1]-u.halfPi-u.epsilon:u.halfPi-n[1])-((t=t.x)[0]<0?t[1]-u.halfPi-u.epsilon:u.halfPi-t[1])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(n,i,o,u){return function(a){function c(t,e){n(t,e)&&a.point(t,e)}function d(n,t){P.point(n,t)}function s(){j.point=d,P.lineStart()}function h(){j.point=c,P.lineEnd()}function g(n,t){v.push([n,t]),_.point(n,t)}function S(){_.lineStart(),v=[]}function y(){g(v[0][0],v[0][1]),_.lineEnd();var n,e,i,l,o=_.clean(),r=x.result(),u=r.length;if(v.pop(),E.push(v),v=null,u)if(1&o){if(i=r[0],(e=i.length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart(),n=0;n<e;++n)a.point((l=i[n])[0],l[1]);a.lineEnd()}}else u>1&&2&o&&r.push(r.pop().concat(r.shift())),q.push(r.filter(t))}var E,q,v,P=i(a),x=(0,l.default)(),_=i(x),b=!1,j={point:c,lineStart:s,lineEnd:h,polygonStart:function(){j.point=g,j.lineStart=S,j.lineEnd=y,q=[],E=[]},polygonEnd:function(){j.point=c,j.lineStart=s,j.lineEnd=h,q=(0,p.merge)(q);var n=(0,f.default)(E,u);q.length?(b||(a.polygonStart(),b=!0),(0,r.default)(q,e,n,o,a)):n&&(b||(a.polygonStart(),b=!0),a.lineStart(),o(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),q=E=null},sphere:function(){a.polygonStart(),a.lineStart(),o(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return j}};var i=require("./buffer"),l=n(i),o=require("./rejoin"),r=n(o),u=require("../math"),a=require("../polygonContains"),f=n(a),p=require("d3-array");
},{"./buffer":444,"./rejoin":455,"../math":378,"../polygonContains":381,"d3-array":66}],254:[function(require,module,exports) {
"use strict";function i(i){return i&&i.__esModule?i:{default:i}}function n(i){var n,e=NaN,p=NaN,o=NaN;return{lineStart:function(){i.lineStart(),n=1},point:function(l,r){var s=l>0?a.pi:-a.pi,u=(0,a.abs)(l-e);(0,a.abs)(u-a.pi)<a.epsilon?(i.point(e,p=(p+r)/2>0?a.halfPi:-a.halfPi),i.point(o,p),i.lineEnd(),i.lineStart(),i.point(s,p),i.point(l,p),n=0):o!==s&&u>=a.pi&&((0,a.abs)(e-o)<a.epsilon&&(e-=o*a.epsilon),(0,a.abs)(l-s)<a.epsilon&&(l-=s*a.epsilon),p=t(e,p,l,r),i.point(o,p),i.lineEnd(),i.lineStart(),i.point(s,p),n=0),i.point(e=l,p=r),o=s},lineEnd:function(){i.lineEnd(),e=p=NaN},clean:function(){return 2-n}}}function t(i,n,t,e){var p,o,l=(0,a.sin)(i-t);return(0,a.abs)(l)>a.epsilon?(0,a.atan)(((0,a.sin)(n)*(o=(0,a.cos)(e))*(0,a.sin)(t)-(0,a.sin)(e)*(p=(0,a.cos)(n))*(0,a.sin)(i))/(p*o*l)):(n+e)/2}function e(i,n,t,e){var p;if(null==i)p=t*a.halfPi,e.point(-a.pi,p),e.point(0,p),e.point(a.pi,p),e.point(a.pi,0),e.point(a.pi,-p),e.point(0,-p),e.point(-a.pi,-p),e.point(-a.pi,0),e.point(-a.pi,p);else if((0,a.abs)(i[0]-n[0])>a.epsilon){var o=i[0]<n[0]?a.pi:-a.pi;p=t*o/2,e.point(-o,p),e.point(0,p),e.point(o,p)}else e.point(n[0],n[1])}Object.defineProperty(exports,"__esModule",{value:!0});var p=require("./index"),o=i(p),a=require("../math");exports.default=(0,o.default)(function(){return!0},n,e,[-a.pi,-a.halfPi]);
},{"./index":446,"../math":378}],259:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){function a(e,n){return(0,r.cos)(e)*(0,r.cos)(n)>o}function c(e,i,a){var t=(0,n.cartesian)(e),c=(0,n.cartesian)(i),s=[1,0,0],l=(0,n.cartesianCross)(t,c),u=(0,n.cartesianDot)(l,l),p=l[0],f=u-p*p;if(!f)return!a&&e;var d=o*u/f,v=-o*p/f,S=(0,n.cartesianCross)(s,l),q=(0,n.cartesianScale)(s,d),E=(0,n.cartesianScale)(l,v);(0,n.cartesianAddInPlace)(q,E);var b=S,D=(0,n.cartesianDot)(q,b),P=(0,n.cartesianDot)(b,b),_=D*D-P*((0,n.cartesianDot)(q,q)-1);if(!(_<0)){var h=(0,r.sqrt)(_),x=(0,n.cartesianScale)(b,(-D-h)/P);if((0,n.cartesianAddInPlace)(x,q),x=(0,n.spherical)(x),!a)return x;var A,I=e[0],m=i[0],C=e[1],M=i[1];m<I&&(A=I,I=m,m=A);var j=m-I,y=(0,r.abs)(j-r.pi)<r.epsilon,O=y||j<r.epsilon;if(!y&&M<C&&(A=C,C=M,M=A),O?y?C+M>0^x[1]<((0,r.abs)(x[0]-I)<r.epsilon?C:M):C<=x[1]&&x[1]<=M:j>r.pi^(I<=x[0]&&x[0]<=m)){var g=(0,n.cartesianScale)(b,(-D+h)/P);return(0,n.cartesianAddInPlace)(g,q),[x,(0,n.spherical)(g)]}}}function l(n,i){var a=p?e:r.pi-e,t=0;return n<-a?t|=1:n>a&&(t|=2),i<-a?t|=4:i>a&&(t|=8),t}var o=(0,r.cos)(e),u=6*r.radians,p=o>0,f=(0,r.abs)(o)>r.epsilon;return(0,s.default)(a,function(e){var n,i,s,o,u;return{lineStart:function(){o=s=!1,u=1},point:function(d,v){var S,q=[d,v],E=a(d,v),b=p?E?0:l(d,v):E?l(d+(d<0?r.pi:-r.pi),v):0;if(!n&&(o=s=E)&&e.lineStart(),E!==s&&(!(S=c(n,q))||(0,t.default)(n,S)||(0,t.default)(q,S))&&(q[0]+=r.epsilon,q[1]+=r.epsilon,E=a(q[0],q[1])),E!==s)u=0,E?(e.lineStart(),S=c(q,n),e.point(S[0],S[1])):(S=c(n,q),e.point(S[0],S[1]),e.lineEnd()),n=S;else if(f&&n&&p^E){var D;b&i||!(D=c(q,n,!0))||(u=0,p?(e.lineStart(),e.point(D[0][0],D[0][1]),e.point(D[1][0],D[1][1]),e.lineEnd()):(e.point(D[1][0],D[1][1]),e.lineEnd(),e.lineStart(),e.point(D[0][0],D[0][1])))}!E||n&&(0,t.default)(n,q)||e.point(q[0],q[1]),n=q,s=E,i=b},lineEnd:function(){s&&e.lineEnd(),n=null},clean:function(){return u|(o&&s)<<1}}},function(n,r,a,t){(0,i.circleStream)(t,e,u,a,n,r)},p?[0,-e]:[-r.pi,e-r.pi])};var n=require("../cartesian"),i=require("../circle"),r=require("../math"),a=require("../pointEqual"),t=e(a),c=require("./index"),s=e(c);
},{"../cartesian":379,"../circle":152,"../math":378,"../pointEqual":428,"./index":446}],445:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r,f,i,t,u){var n,s=e[0],l=e[1],o=0,a=1,c=r[0]-s,d=r[1]-l;if(n=f-s,c||!(n>0)){if(n/=c,c<0){if(n<o)return;n<a&&(a=n)}else if(c>0){if(n>a)return;n>o&&(o=n)}if(n=t-s,c||!(n<0)){if(n/=c,c<0){if(n>a)return;n>o&&(o=n)}else if(c>0){if(n<o)return;n<a&&(a=n)}if(n=i-l,d||!(n>0)){if(n/=d,d<0){if(n<o)return;n<a&&(a=n)}else if(d>0){if(n>a)return;n>o&&(o=n)}if(n=u-l,d||!(n<0)){if(n/=d,d<0){if(n>a)return;n>o&&(o=n)}else if(d>0){if(n<o)return;n<a&&(a=n)}return o>0&&(e[0]=s+o*c,e[1]=l+o*d),a<1&&(r[0]=s+a*c,r[1]=l+a*d),!0}}}}};
},{}],253:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function t(n,t,i,o){function a(e,r){return n<=e&&e<=i&&t<=r&&r<=o}function c(e,r,u,a){var l=0,f=0;if(null==e||(l=d(e,u))!==(f=d(r,u))||m(e,r)<0^u>0)do{a.point(0===l||3===l?n:i,l>1?o:t)}while((l=(l+u+4)%4)!==f);else a.point(r[0],r[1])}function d(r,o){return(0,e.abs)(r[0]-n)<e.epsilon?o>0?0:3:(0,e.abs)(r[0]-i)<e.epsilon?o>0?2:1:(0,e.abs)(r[1]-t)<e.epsilon?o>0?1:0:o>0?3:2}function h(n,t){return m(n.x,t.x)}function m(n,t){var e=d(n,1),i=d(t,1);return e!==i?e-i:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(e){function d(n,t){a(n,t)&&N.point(n,t)}function m(e,r){var l=a(e,r);if(M&&g.push([e,r]),_)x=e,S=r,y=l,_=!1,l&&(N.lineStart(),N.point(e,r));else if(l&&q)N.point(e,r);else{var f=[E=Math.max(s,Math.min(p,E)),b=Math.max(s,Math.min(p,b))],c=[e=Math.max(s,Math.min(p,e)),r=Math.max(s,Math.min(p,r))];(0,u.default)(f,c,n,t,i,o)?(q||(N.lineStart(),N.point(f[0],f[1])),N.point(c[0],c[1]),l||N.lineEnd(),j=!1):l&&(N.lineStart(),N.point(e,r),j=!1)}E=e,b=r,q=l}var v,M,g,x,S,y,E,b,q,_,j,N=e,w=(0,r.default)(),O={point:d,lineStart:function(){O.point=m,M&&M.push(g=[]),_=!0,q=!1,E=b=NaN},lineEnd:function(){v&&(m(x,S),y&&q&&w.rejoin(),v.push(w.result())),O.point=d,q&&N.lineEnd()},polygonStart:function(){N=w,v=[],M=[],j=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,i=M.length;e<i;++e)for(var r,u,a=M[e],l=1,f=a.length,p=a[0],s=p[0],c=p[1];l<f;++l)r=s,u=c,s=(p=a[l])[0],c=p[1],u<=o?c>o&&(s-r)*(o-u)>(c-u)*(n-r)&&++t:c<=o&&(s-r)*(o-u)<(c-u)*(n-r)&&--t;return t}(),i=j&&t,r=(v=(0,f.merge)(v)).length;(i||r)&&(e.polygonStart(),i&&(e.lineStart(),c(null,null,1,e),e.lineEnd()),r&&(0,l.default)(v,h,t,c,e),e.polygonEnd()),N=e,v=M=g=null}};return O}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../math"),i=require("./buffer"),r=n(i),o=require("./line"),u=n(o),a=require("./rejoin"),l=n(a),f=require("d3-array"),p=1e9,s=-p;
},{"../math":378,"./buffer":444,"./line":445,"./rejoin":455,"d3-array":66}],251:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e,t,n,u=0,l=0,o=960,a=500;return n={stream:function(n){return e&&t===n?e:e=(0,r.default)(u,l,o,a)(t=n)},extent:function(r){return arguments.length?(u=+r[0][0],l=+r[0][1],o=+r[1][0],a=+r[1][1],e=t=null,n):[[u,l],[o,a]]}}};var t=require("./rectangle"),r=e(t);
},{"./rectangle":253}],155:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function n(){_.point=a,_.lineEnd=t}function t(){_.point=_.lineEnd=c.default}function a(e,n){e*=l.radians,n*=l.radians,i=e,u=(0,l.sin)(n),d=(0,l.cos)(n),_.point=r}function r(e,n){e*=l.radians,n*=l.radians;var t=(0,l.sin)(n),a=(0,l.cos)(n),r=(0,l.abs)(e-i),o=(0,l.cos)(r),s=a*(0,l.sin)(r),f=d*t-u*a*o,c=u*t+d*a*o;E.add((0,l.atan2)((0,l.sqrt)(s*s+f*f),c)),i=e,u=t,d=a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return E.reset(),(0,q.default)(e,_),+E};var i,u,d,o=require("./adder"),s=e(o),l=require("./math"),f=require("./noop"),c=e(f),p=require("./stream"),q=e(p),E=(0,s.default)(),_={sphere:c.default,point:c.default,lineStart:n,lineEnd:c.default,polygonStart:c.default,polygonEnd:c.default};
},{"./adder":375,"./math":378,"./noop":377,"./stream":158}],150:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return u[0]=e,u[1]=t,(0,r.default)(n)};var t=require("./length"),r=e(t),u=[null,null],n={type:"LineString",coordinates:u};
},{"./length":155}],153:[function(require,module,exports) {
"use strict";function r(r){return r&&r.__esModule?r:{default:r}}function n(r,n){return!(!r||!p.hasOwnProperty(r.type))&&p[r.type](r,n)}function t(r,n){return 0===(0,l.default)(r,n)}function e(r,n){var t=(0,l.default)(r[0],r[1]);return(0,l.default)(r[0],n)+(0,l.default)(n,r[1])<=t+s.epsilon}function o(r,n){return!!(0,a.default)(r.map(u),i(n))}function u(r){return(r=r.map(i)).pop(),r}function i(r){return[r[0]*s.radians,r[1]*s.radians]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,t){return(r&&d.hasOwnProperty(r.type)?d[r.type]:n)(r,t)};var f=require("./polygonContains"),a=r(f),c=require("./distance"),l=r(c),s=require("./math"),d={Feature:function(r,t){return n(r.geometry,t)},FeatureCollection:function(r,t){for(var e=r.features,o=-1,u=e.length;++o<u;)if(n(e[o].geometry,t))return!0;return!1}},p={Sphere:function(){return!0},Point:function(r,n){return t(r.coordinates,n)},MultiPoint:function(r,n){for(var e=r.coordinates,o=-1,u=e.length;++o<u;)if(t(e[o],n))return!0;return!1},LineString:function(r,n){return e(r.coordinates,n)},MultiLineString:function(r,n){for(var t=r.coordinates,o=-1,u=t.length;++o<u;)if(e(t[o],n))return!0;return!1},Polygon:function(r,n){return o(r.coordinates,n)},MultiPolygon:function(r,n){for(var t=r.coordinates,e=-1,u=t.length;++e<u;)if(o(t[e],n))return!0;return!1},GeometryCollection:function(r,t){for(var e=r.geometries,o=-1,u=e.length;++o<u;)if(n(e[o],t))return!0;return!1}};
},{"./polygonContains":381,"./distance":150,"./math":378}],151:[function(require,module,exports) {
"use strict";function n(n,e,t){var r=(0,i.range)(n,e-o.epsilon,t).concat(e);return function(n){return r.map(function(e){return[n,e]})}}function e(n,e,t){var r=(0,i.range)(n,e-o.epsilon,t).concat(e);return function(n){return r.map(function(e){return[e,n]})}}function t(){function t(){return{type:"MultiLineString",coordinates:r()}}function r(){return(0,i.range)((0,o.ceil)(s/j)*j,a,j).map(h).concat((0,i.range)((0,o.ceil)(g/y)*y,f,y).map(m)).concat((0,i.range)((0,o.ceil)(c/d)*d,u,d).filter(function(n){return(0,o.abs)(n%j)>o.epsilon}).map(M)).concat((0,i.range)((0,o.ceil)(p/v)*v,l,v).filter(function(n){return(0,o.abs)(n%y)>o.epsilon}).map(x))}var u,c,a,s,l,p,f,g,M,x,h,m,d=10,v=d,j=90,y=360,b=2.5;return t.lines=function(){return r().map(function(n){return{type:"LineString",coordinates:n}})},t.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(m(f).slice(1),h(a).reverse().slice(1),m(g).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.extentMajor(n).extentMinor(n):t.extentMinor()},t.extentMajor=function(n){return arguments.length?(s=+n[0][0],a=+n[1][0],g=+n[0][1],f=+n[1][1],s>a&&(n=s,s=a,a=n),g>f&&(n=g,g=f,f=n),t.precision(b)):[[s,g],[a,f]]},t.extentMinor=function(n){return arguments.length?(c=+n[0][0],u=+n[1][0],p=+n[0][1],l=+n[1][1],c>u&&(n=c,c=u,u=n),p>l&&(n=p,p=l,l=n),t.precision(b)):[[c,p],[u,l]]},t.step=function(n){return arguments.length?t.stepMajor(n).stepMinor(n):t.stepMinor()},t.stepMajor=function(n){return arguments.length?(j=+n[0],y=+n[1],t):[j,y]},t.stepMinor=function(n){return arguments.length?(d=+n[0],v=+n[1],t):[d,v]},t.precision=function(r){return arguments.length?(b=+r,M=n(p,l,90),x=e(c,u,b),h=n(g,f,90),m=e(s,a,b),t):b},t.extentMajor([[-180,-90+o.epsilon],[180,90-o.epsilon]]).extentMinor([[-180,-80-o.epsilon],[180,80+o.epsilon]])}function r(){return t()()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.graticule10=r;var i=require("d3-array"),o=require("./math");
},{"d3-array":66,"./math":378}],154:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(s,r){var n=s[0]*e.radians,a=s[1]*e.radians,i=r[0]*e.radians,t=r[1]*e.radians,d=(0,e.cos)(a),o=(0,e.sin)(a),u=(0,e.cos)(t),c=(0,e.sin)(t),v=d*(0,e.cos)(n),f=d*(0,e.sin)(n),g=u*(0,e.cos)(i),h=u*(0,e.sin)(i),l=2*(0,e.asin)((0,e.sqrt)((0,e.haversin)(t-a)+d*u*(0,e.haversin)(i-n))),p=(0,e.sin)(l),q=l?function(s){var r=(0,e.sin)(s*=l)/p,n=(0,e.sin)(l-s)/p,a=n*v+r*g,i=n*f+r*h,t=n*o+r*c;return[(0,e.atan2)(i,a)*e.degrees,(0,e.atan2)(t,(0,e.sqrt)(a*a+i*i))*e.degrees]}:function(){return[n*e.degrees,a*e.degrees]};return q.distance=l,q};var e=require("./math");
},{"./math":378}],449:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(){_.point=n}function n(e,t){_.point=u,i=d=e,o=a=t}function u(e,t){S.add(a*e-d*t),d=e,a=t}function r(){u(i,o)}Object.defineProperty(exports,"__esModule",{value:!0});var i,o,d,a,l=require("../adder"),f=e(l),c=require("../math"),p=require("../noop"),s=e(p),E=(0,f.default)(),S=(0,f.default)(),_={point:s.default,lineStart:s.default,lineEnd:s.default,polygonStart:function(){_.lineStart=t,_.lineEnd=r},polygonEnd:function(){_.lineStart=_.lineEnd=_.point=s.default,E.add((0,c.abs)(S)),S.reset()},result:function(){var e=E/2;return E.reset(),e}};exports.default=_;
},{"../adder":375,"../math":378,"../noop":377}],450:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){e<r&&(r=e),e>l&&(l=e),t<o&&(o=t),t>a&&(a=t)}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../noop"),u=e(n),r=1/0,o=r,l=-r,a=l,d={point:t,lineStart:u.default,lineEnd:u.default,polygonStart:u.default,polygonEnd:u.default,result:function(){var e=[[r,o],[l,a]];return l=a=-(o=r=1/0),e}};exports.default=d;
},{"../noop":377}],451:[function(require,module,exports) {
"use strict";function n(n,t){v+=n,E+=t,++N}function t(){b.point=i}function i(t,i){b.point=o,n(p=t,s=i)}function o(t,i){var o=t-p,e=i-s,r=(0,d.sqrt)(o*o+e*e);S+=r*(p+t)/2,q+=r*(s+i)/2,y+=r,n(p=t,s=i)}function e(){b.point=n}function r(){b.point=c}function u(){f(a,l)}function c(t,i){b.point=f,n(a=p=t,l=s=i)}function f(t,i){var o=t-p,e=i-s,r=(0,d.sqrt)(o*o+e*e);S+=r*(p+t)/2,q+=r*(s+i)/2,y+=r,g+=(r=s*t-p*i)*(p+t),x+=r*(s+i),_+=3*r,n(p=t,s=i)}Object.defineProperty(exports,"__esModule",{value:!0});var a,l,p,s,d=require("../math"),v=0,E=0,N=0,S=0,q=0,y=0,g=0,x=0,_=0,b={point:n,lineStart:t,lineEnd:e,polygonStart:function(){b.lineStart=r,b.lineEnd=u},polygonEnd:function(){b.point=n,b.lineStart=t,b.lineEnd=e},result:function(){var n=_?[g/_,x/_]:y?[S/y,q/y]:N?[v/N,E/N]:[NaN,NaN];return v=E=N=S=q=y=g=x=_=0,n}};exports.default=b;
},{"../math":378}],452:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function i(t){this._context=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../math"),n=require("../noop"),o=t(n);i.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,i){switch(this._point){case 0:this._context.moveTo(t,i),this._point=1;break;case 1:this._context.lineTo(t,i);break;default:this._context.moveTo(t+this._radius,i),this._context.arc(t,i,this._radius,0,e.tau)}},result:o.default};
},{"../math":378,"../noop":377}],454:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e){q.point=n,o=i=t,r=l=e}function n(t,e){i-=t,l-=e,s.add((0,a.sqrt)(i*i+l*l)),i=t,l=e}Object.defineProperty(exports,"__esModule",{value:!0});var u,o,r,i,l,d=require("../adder"),f=t(d),a=require("../math"),c=require("../noop"),p=t(c),s=(0,f.default)(),q={point:p.default,lineStart:function(){q.point=e},lineEnd:function(){u&&n(o,r),q.point=p.default},polygonStart:function(){u=!0},polygonEnd:function(){u=null},result:function(){var t=+s;return s.reset(),t}};exports.default=q;
},{"../adder":375,"../math":378,"../noop":377}],453:[function(require,module,exports) {
"use strict";function t(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};
},{}],257:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){function n(e){return e&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),(0,r.default)(e,i(o))),o.result()}var i,o,a=4.5;return n.area=function(e){return(0,r.default)(e,i(l.default)),l.default.result()},n.measure=function(e){return(0,r.default)(e,i(q.default)),q.default.result()},n.bounds=function(e){return(0,r.default)(e,i(f.default)),f.default.result()},n.centroid=function(e){return(0,r.default)(e,i(d.default)),d.default.result()},n.projection=function(t){return arguments.length?(i=null==t?(e=null,u.default):(e=t).stream,n):e},n.context=function(e){return arguments.length?(o=null==e?(t=null,new x.default):new c.default(t=e),"function"!=typeof a&&o.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(o.pointRadius(+e),+e),n):a},n.projection(e).context(t)};var t=require("../identity"),u=e(t),n=require("../stream"),r=e(n),i=require("./area"),l=e(i),o=require("./bounds"),f=e(o),a=require("./centroid"),d=e(a),s=require("./context"),c=e(s),p=require("./measure"),q=e(p),y=require("./string"),x=e(y);
},{"../identity":363,"../stream":158,"./area":449,"./bounds":450,"./centroid":451,"./context":452,"./measure":454,"./string":453}],157:[function(require,module,exports) {
"use strict";function t(t){return function(r){var e=new n;for(var o in t)e[o]=t[o];return e.stream=r,e}}function n(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(n){return{stream:t(n)}},exports.transformer=t,n.prototype={constructor:n,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
},{}],448:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),(0,i.default)(n,t.stream(c.default)),e(c.default.result()),null!=r&&t.clipExtent(r),t}function n(t,n,r){return e(t,function(e){var r=n[1][0]-n[0][0],u=n[1][1]-n[0][1],a=Math.min(r/(e[1][0]-e[0][0]),u/(e[1][1]-e[0][1])),l=+n[0][0]+(r-a*(e[1][0]+e[0][0]))/2,i=+n[0][1]+(u-a*(e[1][1]+e[0][1]))/2;t.scale(150*a).translate([l,i])},r)}function r(t,e,r){return n(t,[[0,0],e],r)}function u(t,n,r){return e(t,function(e){var r=+n,u=r/(e[1][0]-e[0][0]),a=(r-u*(e[1][0]+e[0][0]))/2,l=-u*e[0][1];t.scale(150*u).translate([a,l])},r)}function a(t,n,r){return e(t,function(e){var r=+n,u=r/(e[1][1]-e[0][1]),a=-u*e[0][0],l=(r-u*(e[1][1]+e[0][1]))/2;t.scale(150*u).translate([a,l])},r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fitExtent=n,exports.fitSize=r,exports.fitWidth=u,exports.fitHeight=a;var l=require("../stream"),i=t(l),s=require("../path/bounds"),c=t(s);
},{"../stream":158,"../path/bounds":450}],456:[function(require,module,exports) {
"use strict";function n(n){return(0,r.transformer)({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function t(n,t){function r(i,e,u,s,c,f,p,l,d,v,E,S,b,y){var g=p-i,m=l-e,q=g*g+m*m;if(q>4*t&&b--){var h=s+v,x=c+E,N=f+S,_=(0,o.sqrt)(h*h+x*x+N*N),j=(0,o.asin)(N/=_),M=(0,o.abs)((0,o.abs)(N)-1)<o.epsilon||(0,o.abs)(u-d)<o.epsilon?(u+d)/2:(0,o.atan2)(x,h),O=n(M,j),P=O[0],k=O[1],w=P-i,z=k-e,A=m*w-g*z;(A*A/q>t||(0,o.abs)((g*w+m*z)/q-.5)>.3||s*v+c*E+f*S<a)&&(r(i,e,u,s,c,f,P,k,M,h/=_,x/=_,N,b,y),y.point(P,k),r(P,k,M,h,x,N,p,l,d,v,E,S,b,y))}}return function(t){function o(i,o){i=n(i,o),t.point(i[0],i[1])}function a(){g=NaN,N.point=u,t.lineStart()}function u(o,a){var u=(0,i.cartesian)([o,a]),s=n(o,a);r(g,m,y,q,h,x,g=s[0],m=s[1],y=o,q=u[0],h=u[1],x=u[2],e,t),t.point(g,m)}function s(){N.point=o,t.lineEnd()}function c(){a(),N.point=f,N.lineEnd=p}function f(n,t){u(l=n,t),d=g,v=m,E=q,S=h,b=x,N.point=u}function p(){r(g,m,y,q,h,x,d,v,l,E,S,b,e,t),N.lineEnd=s,s()}var l,d,v,E,S,b,y,g,m,q,h,x,N={point:o,lineStart:a,lineEnd:s,polygonStart:function(){t.polygonStart(),N.lineStart=c},polygonEnd:function(){t.polygonEnd(),N.lineStart=a}};return N}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i,o){return+o?t(i,o):n(i)};var i=require("../cartesian"),o=require("../math"),r=require("../transform"),e=16,a=(0,o.cos)(30*o.radians);
},{"../cartesian":379,"../math":378,"../transform":157}],268:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return(0,q.transformer)({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function n(e){return r(function(){return e})()}function r(e){function n(e){return e=v(e[0]*g.radians,e[1]*g.radians),[e[0]*H+c,d-e[1]*H]}function r(e,t){return e=o(e,t),[e[0]*H+c,d-e[1]*H]}function i(){v=(0,s.default)(q=(0,h.rotateRadians)(O,P,R),o);var e=o(b,A);return c=S-e[0]*H,d=W+e[1]*H,a()}function a(){return j=z=null,n}var o,c,d,q,v,y,E,M,j,z,H=150,S=480,W=250,b=0,A=0,O=0,P=0,R=0,k=null,w=u.default,B=null,C=p.default,D=.5,F=(0,x.default)(r,D);return n.stream=function(e){return j&&z===e?j:j=_(t(q)(w(F(C(z=e)))))},n.preclip=function(e){return arguments.length?(w=e,k=void 0,a()):w},n.postclip=function(e){return arguments.length?(C=e,B=y=E=M=null,a()):C},n.clipAngle=function(e){return arguments.length?(w=+e?(0,l.default)(k=e*g.radians):(k=null,u.default),a()):k*g.degrees},n.clipExtent=function(e){return arguments.length?(C=null==e?(B=y=E=M=null,p.default):(0,f.default)(B=+e[0][0],y=+e[0][1],E=+e[1][0],M=+e[1][1]),a()):null==B?null:[[B,y],[E,M]]},n.scale=function(e){return arguments.length?(H=+e,i()):H},n.translate=function(e){return arguments.length?(S=+e[0],W=+e[1],i()):[S,W]},n.center=function(e){return arguments.length?(b=e[0]%360*g.radians,A=e[1]%360*g.radians,i()):[b*g.degrees,A*g.degrees]},n.rotate=function(e){return arguments.length?(O=e[0]%360*g.radians,P=e[1]%360*g.radians,R=e.length>2?e[2]%360*g.radians:0,i()):[O*g.degrees,P*g.degrees,R*g.degrees]},n.precision=function(e){return arguments.length?(F=(0,x.default)(r,D=e*e),a()):(0,g.sqrt)(D)},n.fitExtent=function(e,t){return(0,m.fitExtent)(n,e,t)},n.fitSize=function(e,t){return(0,m.fitSize)(n,e,t)},n.fitWidth=function(e,t){return(0,m.fitWidth)(n,e,t)},n.fitHeight=function(e,t){return(0,m.fitHeight)(n,e,t)},function(){return o=e.apply(this,arguments),n.invert=o.invert&&function(e){return(e=v.invert((e[0]-c)/H,(d-e[1])/H))&&[e[0]*g.degrees,e[1]*g.degrees]},i()}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.projectionMutator=r;var i=require("../clip/antimeridian"),u=e(i),a=require("../clip/circle"),l=e(a),o=require("../clip/rectangle"),f=e(o),c=require("../compose"),s=e(c),d=require("../identity"),p=e(d),g=require("../math"),h=require("../rotation"),q=require("../transform"),m=require("./fit"),v=require("./resample"),x=e(v),_=(0,q.transformer)({point:function(e,t){this.stream.point(e*g.radians,t*g.radians)}});
},{"../clip/antimeridian":254,"../clip/circle":259,"../clip/rectangle":253,"../compose":385,"../identity":363,"../math":378,"../rotation":160,"../transform":157,"./fit":448,"./resample":456}],447:[function(require,module,exports) {
"use strict";function e(e){var n=0,i=r.pi/3,o=(0,t.projectionMutator)(e),a=o(n,i);return a.parallels=function(e){return arguments.length?o(n=e[0]*r.radians,i=e[1]*r.radians):[n*r.degrees,i*r.degrees]},a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.conicProjection=e;var r=require("../math"),t=require("./index");
},{"../math":378,"./index":268}],457:[function(require,module,exports) {
"use strict";function r(r){function n(r,n){return[r*t,(0,e.sin)(n)/t]}var t=(0,e.cos)(r);return n.invert=function(r,n){return[r/t,(0,e.asin)(n*t)]},n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cylindricalEqualAreaRaw=r;var e=require("../math");
},{"../math":378}],261:[function(require,module,exports) {
"use strict";function r(r,n){function a(r,n){var i=(0,e.sqrt)(s-2*c*(0,e.sin)(n))/c;return[i*(0,e.sin)(r*=c),u-i*(0,e.cos)(r)]}var t=(0,e.sin)(r),c=(t+(0,e.sin)(n))/2;if((0,e.abs)(c)<e.epsilon)return(0,i.cylindricalEqualAreaRaw)(r);var s=1+t*(2*c-t),u=(0,e.sqrt)(s)/c;return a.invert=function(r,n){var i=u-n;return[(0,e.atan2)(r,(0,e.abs)(i))/c*(0,e.sign)(i),(0,e.asin)((s-(r*r+i*i)*c*c)/(2*c))]},a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.conicEqualAreaRaw=r,exports.default=function(){return(0,n.conicProjection)(r).scale(155.424).center([0,33.6442])};var e=require("../math"),n=require("./conic"),i=require("./cylindricalEqualArea");
},{"../math":378,"./conic":447,"./cylindricalEqualArea":457}],272:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return(0,r.default)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var t=require("./conicEqualArea"),r=e(t);
},{"./conicEqualArea":261}],256:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function n(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function t(t){var n=t[0],e=t[1];return p=null,s.point(n,e),p||(c.point(n,e),p)||(f.point(n,e),p)}function r(){return a=u=null,t}var a,u,s,c,f,p,v=(0,i.default)(),d=(0,o.default)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=(0,o.default)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(t,n){p=[t,n]}};return t.invert=function(t){var n=v.scale(),e=v.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?d:i>=.166&&i<.234&&r>=-.214&&r<-.115?h:v).invert(t)},t.stream=function(t){return a&&u===t?a:a=n([v.stream(u=t),d.stream(t),h.stream(t)])},t.precision=function(t){return arguments.length?(v.precision(t),d.precision(t),h.precision(t),r()):v.precision()},t.scale=function(n){return arguments.length?(v.scale(n),d.scale(.35*n),h.scale(n),t.translate(v.translate())):v.scale()},t.translate=function(t){if(!arguments.length)return v.translate();var n=v.scale(),i=+t[0],a=+t[1];return s=v.translate(t).clipExtent([[i-.455*n,a-.238*n],[i+.455*n,a+.238*n]]).stream(g),c=d.translate([i-.307*n,a+.201*n]).clipExtent([[i-.425*n+e.epsilon,a+.12*n+e.epsilon],[i-.214*n-e.epsilon,a+.234*n-e.epsilon]]).stream(g),f=h.translate([i-.205*n,a+.212*n]).clipExtent([[i-.214*n+e.epsilon,a+.166*n+e.epsilon],[i-.115*n-e.epsilon,a+.234*n-e.epsilon]]).stream(g),r()},t.fitExtent=function(n,e){return(0,l.fitExtent)(t,n,e)},t.fitSize=function(n,e){return(0,l.fitSize)(t,n,e)},t.fitWidth=function(n,e){return(0,l.fitWidth)(t,n,e)},t.fitHeight=function(n,e){return(0,l.fitHeight)(t,n,e)},t.scale(1070)};var e=require("../math"),r=require("./albers"),i=t(r),a=require("./conicEqualArea"),o=t(a),l=require("./fit");
},{"../math":378,"./albers":272,"./conicEqualArea":261,"./fit":448}],443:[function(require,module,exports) {
"use strict";function r(r){return function(t,e){var s=(0,n.cos)(t),u=(0,n.cos)(e),a=r(s*u);return[a*u*(0,n.sin)(t),a*(0,n.sin)(e)]}}function t(r){return function(t,e){var s=(0,n.sqrt)(t*t+e*e),u=r(s),a=(0,n.sin)(u),i=(0,n.cos)(u);return[(0,n.atan2)(t*a,s*i),(0,n.asin)(s&&e*a/s)]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.azimuthalRaw=r,exports.azimuthalInvert=t;var n=require("../math");
},{"../math":378}],255:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.azimuthalEqualAreaRaw=void 0,exports.default=function(){return(0,u.default)(i).scale(124.75).clipAngle(179.999)};var t=require("../math"),r=require("./azimuthal"),a=require("./index"),u=e(a),i=exports.azimuthalEqualAreaRaw=(0,r.azimuthalRaw)(function(e){return(0,t.sqrt)(2/(1+e))});i.invert=(0,r.azimuthalInvert)(function(e){return 2*(0,t.asin)(e/2)});
},{"../math":378,"./azimuthal":443,"./index":268}],260:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.azimuthalEquidistantRaw=void 0,exports.default=function(){return(0,a.default)(i).scale(79.4188).clipAngle(179.999)};var t=require("../math"),u=require("./azimuthal"),r=require("./index"),a=e(r),i=exports.azimuthalEquidistantRaw=(0,u.azimuthalRaw)(function(e){return(e=(0,t.acos)(e))&&e/(0,t.sin)(e)});i.invert=(0,u.azimuthalInvert)(function(e){return e});
},{"../math":378,"./azimuthal":443,"./index":268}],265:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e){return[t,(0,r.log)((0,r.tan)((r.halfPi+e)/2))]}function n(t){function n(){var n=r.pi*s(),i=c((0,a.default)(c.rotate()).invert([0,0]));return x(null==p?[[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]]:t===e?[[Math.max(i[0]-n,p),u],[Math.min(i[0]+n,l),o]]:[[p,Math.max(i[1]-n,u)],[l,Math.min(i[1]+n,o)]])}var u,l,o,c=(0,i.default)(t),f=c.center,s=c.scale,h=c.translate,x=c.clipExtent,p=null;return c.scale=function(t){return arguments.length?(s(t),n()):s()},c.translate=function(t){return arguments.length?(h(t),n()):h()},c.center=function(t){return arguments.length?(f(t),n()):f()},c.clipExtent=function(t){return arguments.length?(null==t?p=u=l=o=null:(p=+t[0][0],u=+t[0][1],l=+t[1][0],o=+t[1][1]),n()):null==p?null:[[p,u],[l,o]]},n()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mercatorRaw=e,exports.default=function(){return n(e).scale(961/r.tau)},exports.mercatorProjection=n;var r=require("../math"),u=require("../rotation"),a=t(u),l=require("./index"),i=t(l);e.invert=function(t,e){return[t,2*(0,r.atan)((0,r.exp)(e))-r.halfPi]};
},{"../math":378,"../rotation":160,"./index":268}],258:[function(require,module,exports) {
"use strict";function r(r){return(0,n.tan)((n.halfPi+r)/2)}function e(e,o){function a(e,o){c>0?o<-n.halfPi+n.epsilon&&(o=-n.halfPi+n.epsilon):o>n.halfPi-n.epsilon&&(o=n.halfPi-n.epsilon);var i=c/(0,n.pow)(r(o),s);return[i*(0,n.sin)(s*e),c-i*(0,n.cos)(s*e)]}var t=(0,n.cos)(e),s=e===o?(0,n.sin)(e):(0,n.log)(t/(0,n.cos)(o))/(0,n.log)(r(o)/r(e)),c=t*(0,n.pow)(r(e),s)/s;return s?(a.invert=function(r,e){var o=c-e,i=(0,n.sign)(s)*(0,n.sqrt)(r*r+o*o);return[(0,n.atan2)(r,(0,n.abs)(o))/s*(0,n.sign)(o),2*(0,n.atan)((0,n.pow)(c/i,1/s))-n.halfPi]},a):i.mercatorRaw}Object.defineProperty(exports,"__esModule",{value:!0}),exports.conicConformalRaw=e,exports.default=function(){return(0,o.conicProjection)(e).scale(109.5).parallels([30,30])};var n=require("../math"),o=require("./conic"),i=require("./mercator");
},{"../math":378,"./conic":447,"./mercator":265}],264:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){return[e,r]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.equirectangularRaw=r,exports.default=function(){return(0,u.default)(r).scale(152.63)};var t=require("./index"),u=e(t);r.invert=r;
},{"./index":268}],262:[function(require,module,exports) {
"use strict";function e(e,n){function i(e,n){var t=a-n,i=u*e;return[t*(0,r.sin)(i),a-t*(0,r.cos)(i)]}var c=(0,r.cos)(e),u=e===n?(0,r.sin)(e):(c-(0,r.cos)(n))/(n-e),a=c/u+e;return(0,r.abs)(u)<r.epsilon?t.equirectangularRaw:(i.invert=function(e,n){var t=a-n;return[(0,r.atan2)(e,(0,r.abs)(t))/u*(0,r.sign)(t),a-(0,r.sign)(u)*(0,r.sqrt)(e*e+t*t)]},i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.conicEquidistantRaw=e,exports.default=function(){return(0,n.conicProjection)(e).scale(131.154).center([0,13.9389])};var r=require("../math"),n=require("./conic"),t=require("./equirectangular");
},{"../math":378,"./conic":447,"./equirectangular":264}],263:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){var n=(0,t.cos)(r),u=(0,t.cos)(e)*n;return[n*(0,t.sin)(e)/u,(0,t.sin)(r)/u]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.gnomonicRaw=r,exports.default=function(){return(0,i.default)(r).scale(144.049).clipAngle(60)};var t=require("../math"),n=require("./azimuthal"),u=require("./index"),i=e(u);r.invert=(0,n.azimuthalInvert)(t.atan);
},{"../math":378,"./azimuthal":443,"./index":268}],267:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function n(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?i.default:(0,l.transformer)({point:function(u,i){this.stream.point(u*t+e,i*n+r)}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function t(){return o=c=null,a}var e,u,l,o,c,a,s=1,d=0,h=0,g=1,p=1,x=i.default,m=null,q=i.default;return a={stream:function(t){return o&&c===t?o:o=x(q(c=t))},postclip:function(n){return arguments.length?(q=n,m=e=u=l=null,t()):q},clipExtent:function(n){return arguments.length?(q=null==n?(m=e=u=l=null,i.default):(0,r.default)(m=+n[0][0],e=+n[0][1],u=+n[1][0],l=+n[1][1]),t()):null==m?null:[[m,e],[u,l]]},scale:function(e){return arguments.length?(x=n((s=+e)*g,s*p,d,h),t()):s},translate:function(e){return arguments.length?(x=n(s*g,s*p,d=+e[0],h=+e[1]),t()):[d,h]},reflectX:function(e){return arguments.length?(x=n(s*(g=e?-1:1),s*p,d,h),t()):g<0},reflectY:function(e){return arguments.length?(x=n(s*g,s*(p=e?-1:1),d,h),t()):p<0},fitExtent:function(t,n){return(0,f.fitExtent)(a,t,n)},fitSize:function(t,n){return(0,f.fitSize)(a,t,n)},fitWidth:function(t,n){return(0,f.fitWidth)(a,t,n)},fitHeight:function(t,n){return(0,f.fitHeight)(a,t,n)}}};var e=require("../clip/rectangle"),r=t(e),u=require("../identity"),i=t(u),l=require("../transform"),f=require("./fit");
},{"../clip/rectangle":253,"../identity":363,"../transform":157,"./fit":448}],266:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){var t=r*r,u=t*t;return[e*(.8707-.131979*t+u*(u*(.003971*t-.001529*u)-.013791)),r*(1.007226+t*(.015085+u*(.028874*t-.044475-.005916*u)))]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.naturalEarth1Raw=r,exports.default=function(){return(0,u.default)(r).scale(175.295)};var t=require("./index"),u=e(t),n=require("../math");r.invert=function(e,r){var t,u=r,a=25;do{var i=u*u,o=i*i;u-=t=(u*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-r)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while((0,n.abs)(t)>n.epsilon&&--a>0);return[e/(.8707+(i=u*u)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),u]};
},{"./index":268,"../math":378}],270:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){return[(0,t.cos)(r)*(0,t.sin)(e),(0,t.sin)(r)]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.orthographicRaw=r,exports.default=function(){return(0,u.default)(r).scale(249.5).clipAngle(90+t.epsilon)};var t=require("../math"),i=require("./azimuthal"),n=require("./index"),u=e(n);r.invert=(0,i.azimuthalInvert)(t.asin);
},{"../math":378,"./azimuthal":443,"./index":268}],269:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){var n=(0,t.cos)(r),u=1+(0,t.cos)(e)*n;return[n*(0,t.sin)(e)/u,(0,t.sin)(r)/u]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.stereographicRaw=r,exports.default=function(){return(0,i.default)(r).scale(250).clipAngle(142)};var t=require("../math"),n=require("./azimuthal"),u=require("./index"),i=e(u);r.invert=(0,n.azimuthalInvert)(function(e){return 2*(0,t.atan)(e)});
},{"../math":378,"./azimuthal":443,"./index":268}],271:[function(require,module,exports) {
"use strict";function e(e,t){return[(0,r.log)((0,r.tan)((r.halfPi+t)/2)),-e]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transverseMercatorRaw=e,exports.default=function(){var r=(0,t.mercatorProjection)(e),n=r.center,a=r.rotate;return r.center=function(e){return arguments.length?n([-e[1],e[0]]):(e=n(),[e[1],-e[0]])},r.rotate=function(e){return arguments.length?a([e[0],e[1],e.length>2?e[2]+90:90]):(e=a(),[e[0],e[1],e[2]-90])},a([0,0,90]).scale(159.155)};var r=require("../math"),t=require("./mercator");e.invert=function(e,t){return[-t,2*(0,r.atan)((0,r.exp)(e))-r.halfPi]};
},{"../math":378,"./mercator":265}],71:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/area");Object.defineProperty(exports,"geoArea",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/bounds");Object.defineProperty(exports,"geoBounds",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/centroid");Object.defineProperty(exports,"geoCentroid",{enumerable:!0,get:function(){return e(n).default}});var o=require("./src/circle");Object.defineProperty(exports,"geoCircle",{enumerable:!0,get:function(){return e(o).default}});var u=require("./src/clip/antimeridian");Object.defineProperty(exports,"geoClipAntimeridian",{enumerable:!0,get:function(){return e(u).default}});var a=require("./src/clip/circle");Object.defineProperty(exports,"geoClipCircle",{enumerable:!0,get:function(){return e(a).default}});var i=require("./src/clip/extent");Object.defineProperty(exports,"geoClipExtent",{enumerable:!0,get:function(){return e(i).default}});var c=require("./src/clip/rectangle");Object.defineProperty(exports,"geoClipRectangle",{enumerable:!0,get:function(){return e(c).default}});var l=require("./src/contains");Object.defineProperty(exports,"geoContains",{enumerable:!0,get:function(){return e(l).default}});var f=require("./src/distance");Object.defineProperty(exports,"geoDistance",{enumerable:!0,get:function(){return e(f).default}});var p=require("./src/graticule");Object.defineProperty(exports,"geoGraticule",{enumerable:!0,get:function(){return e(p).default}}),Object.defineProperty(exports,"geoGraticule10",{enumerable:!0,get:function(){return p.graticule10}});var s=require("./src/interpolate");Object.defineProperty(exports,"geoInterpolate",{enumerable:!0,get:function(){return e(s).default}});var g=require("./src/length");Object.defineProperty(exports,"geoLength",{enumerable:!0,get:function(){return e(g).default}});var d=require("./src/path/index");Object.defineProperty(exports,"geoPath",{enumerable:!0,get:function(){return e(d).default}});var b=require("./src/projection/albers");Object.defineProperty(exports,"geoAlbers",{enumerable:!0,get:function(){return e(b).default}});var m=require("./src/projection/albersUsa");Object.defineProperty(exports,"geoAlbersUsa",{enumerable:!0,get:function(){return e(m).default}});var j=require("./src/projection/azimuthalEqualArea");Object.defineProperty(exports,"geoAzimuthalEqualArea",{enumerable:!0,get:function(){return e(j).default}}),Object.defineProperty(exports,"geoAzimuthalEqualAreaRaw",{enumerable:!0,get:function(){return j.azimuthalEqualAreaRaw}});var q=require("./src/projection/azimuthalEquidistant");Object.defineProperty(exports,"geoAzimuthalEquidistant",{enumerable:!0,get:function(){return e(q).default}}),Object.defineProperty(exports,"geoAzimuthalEquidistantRaw",{enumerable:!0,get:function(){return q.azimuthalEquidistantRaw}});var x=require("./src/projection/conicConformal");Object.defineProperty(exports,"geoConicConformal",{enumerable:!0,get:function(){return e(x).default}}),Object.defineProperty(exports,"geoConicConformalRaw",{enumerable:!0,get:function(){return x.conicConformalRaw}});var P=require("./src/projection/conicEqualArea");Object.defineProperty(exports,"geoConicEqualArea",{enumerable:!0,get:function(){return e(P).default}}),Object.defineProperty(exports,"geoConicEqualAreaRaw",{enumerable:!0,get:function(){return P.conicEqualAreaRaw}});var y=require("./src/projection/conicEquidistant");Object.defineProperty(exports,"geoConicEquidistant",{enumerable:!0,get:function(){return e(y).default}}),Object.defineProperty(exports,"geoConicEquidistantRaw",{enumerable:!0,get:function(){return y.conicEquidistantRaw}});var O=require("./src/projection/equirectangular");Object.defineProperty(exports,"geoEquirectangular",{enumerable:!0,get:function(){return e(O).default}}),Object.defineProperty(exports,"geoEquirectangularRaw",{enumerable:!0,get:function(){return O.equirectangularRaw}});var v=require("./src/projection/gnomonic");Object.defineProperty(exports,"geoGnomonic",{enumerable:!0,get:function(){return e(v).default}}),Object.defineProperty(exports,"geoGnomonicRaw",{enumerable:!0,get:function(){return v.gnomonicRaw}});var h=require("./src/projection/identity");Object.defineProperty(exports,"geoIdentity",{enumerable:!0,get:function(){return e(h).default}});var R=require("./src/projection/index");Object.defineProperty(exports,"geoProjection",{enumerable:!0,get:function(){return e(R).default}}),Object.defineProperty(exports,"geoProjectionMutator",{enumerable:!0,get:function(){return R.projectionMutator}});var w=require("./src/projection/mercator");Object.defineProperty(exports,"geoMercator",{enumerable:!0,get:function(){return e(w).default}}),Object.defineProperty(exports,"geoMercatorRaw",{enumerable:!0,get:function(){return w.mercatorRaw}});var E=require("./src/projection/naturalEarth1");Object.defineProperty(exports,"geoNaturalEarth1",{enumerable:!0,get:function(){return e(E).default}}),Object.defineProperty(exports,"geoNaturalEarth1Raw",{enumerable:!0,get:function(){return E.naturalEarth1Raw}});var C=require("./src/projection/orthographic");Object.defineProperty(exports,"geoOrthographic",{enumerable:!0,get:function(){return e(C).default}}),Object.defineProperty(exports,"geoOrthographicRaw",{enumerable:!0,get:function(){return C.orthographicRaw}});var A=require("./src/projection/stereographic");Object.defineProperty(exports,"geoStereographic",{enumerable:!0,get:function(){return e(A).default}}),Object.defineProperty(exports,"geoStereographicRaw",{enumerable:!0,get:function(){return A.stereographicRaw}});var M=require("./src/projection/transverseMercator");Object.defineProperty(exports,"geoTransverseMercator",{enumerable:!0,get:function(){return e(M).default}}),Object.defineProperty(exports,"geoTransverseMercatorRaw",{enumerable:!0,get:function(){return M.transverseMercatorRaw}});var z=require("./src/rotation");Object.defineProperty(exports,"geoRotation",{enumerable:!0,get:function(){return e(z).default}});var G=require("./src/stream");Object.defineProperty(exports,"geoStream",{enumerable:!0,get:function(){return e(G).default}});var _=require("./src/transform");Object.defineProperty(exports,"geoTransform",{enumerable:!0,get:function(){return e(_).default}});
},{"./src/area":147,"./src/bounds":146,"./src/centroid":148,"./src/circle":152,"./src/clip/antimeridian":254,"./src/clip/circle":259,"./src/clip/extent":251,"./src/clip/rectangle":253,"./src/contains":153,"./src/distance":150,"./src/graticule":151,"./src/interpolate":154,"./src/length":155,"./src/path/index":257,"./src/projection/albers":272,"./src/projection/albersUsa":256,"./src/projection/azimuthalEqualArea":255,"./src/projection/azimuthalEquidistant":260,"./src/projection/conicConformal":258,"./src/projection/conicEqualArea":261,"./src/projection/conicEquidistant":262,"./src/projection/equirectangular":264,"./src/projection/gnomonic":263,"./src/projection/identity":267,"./src/projection/index":268,"./src/projection/mercator":265,"./src/projection/naturalEarth1":266,"./src/projection/orthographic":270,"./src/projection/stereographic":269,"./src/projection/transverseMercator":271,"./src/rotation":160,"./src/stream":158,"./src/transform":157}],142:[function(require,module,exports) {
"use strict";function n(n,r){return n.parent===r.parent?1:2}function r(n){return n.reduce(e,0)/n.length}function e(n,r){return n+r.x}function t(n){return 1+n.reduce(u,0)}function u(n,r){return Math.max(n,r.y)}function c(n){for(var r;r=n.children;)n=r[0];return n}function i(n){for(var r;r=n.children;)n=r[r.length-1];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function e(n){var e,l=0;n.eachAfter(function(n){var c=n.children;c?(n.x=r(c),n.y=t(c)):(n.x=e?l+=u(n,e):0,n.y=0,e=n)});var x=c(n),h=i(n),y=x.x-u(x,h)/2,d=h.x+u(h,x)/2;return n.eachAfter(a?function(r){r.x=(r.x-n.x)*o,r.y=(n.y-r.y)*f}:function(r){r.x=(r.x-y)/(d-y)*o,r.y=(1-(n.y?r.y/n.y:1))*f})}var u=n,o=1,f=1,a=!1;return e.separation=function(n){return arguments.length?(u=n,e):u},e.size=function(n){return arguments.length?(a=!1,o=+n[0],f=+n[1],e):a?null:[o,f]},e.nodeSize=function(n){return arguments.length?(a=!0,o=+n[0],f=+n[1],e):a?[o,f]:null},e};
},{}],432:[function(require,module,exports) {
"use strict";function e(e){var t=0,r=e.children,u=r&&r.length;if(u)for(;--u>=0;)t+=r[u].value;else t=1;e.value=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return this.eachAfter(e)};
},{}],433:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r,t,o,s,i=this,h=[i];do{for(r=h.reverse(),h=[];i=r.pop();)if(e(i),t=i.children)for(o=0,s=t.length;o<s;++o)h.push(t[o])}while(h.length);return this};
},{}],435:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var t,r,o=this,s=[o];o=s.pop();)if(e(o),t=o.children)for(r=t.length-1;r>=0;--r)s.push(t[r]);return this};
},{}],436:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var r,t,o,p=this,s=[p],u=[];p=s.pop();)if(u.push(p),r=p.children)for(t=0,o=r.length;t<o;++t)s.push(r[t]);for(;p=u.pop();)e(p);return this};
},{}],438:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,u=t.children,a=u&&u.length;--a>=0;)r+=u[a].value;t.value=r})};
},{}],434:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})};
},{}],439:[function(require,module,exports) {
"use strict";function r(r,e){if(r===e)return r;var t=r.ancestors(),o=e.ancestors(),p=null;for(r=t.pop(),e=o.pop();r===e;)p=r,r=t.pop(),e=o.pop();return p}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var t=this,o=r(t,e),p=[t];t!==o;)t=t.parent,p.push(t);for(var n=p.length;e!==o;)p.splice(n,0,e),e=e.parent;return p};
},{}],437:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t};
},{}],440:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=[];return this.each(function(t){e.push(t)}),e};
},{}],442:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e};
},{}],441:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t};
},{}],243:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){var r,u,i,d,l,h=new o(e),s=+e.value&&(h.value=e.value),c=[h];for(null==t&&(t=a);r=c.pop();)if(s&&(r.value=+r.data.value),(i=t(r.data))&&(l=i.length))for(r.children=new Array(l),d=l-1;d>=0;--d)c.push(u=r.children[d]=new o(i[d])),u.parent=r,u.depth=r.depth+1;return h.eachBefore(n)}function r(){return t(this).eachBefore(u)}function a(e){return e.children}function u(e){e.data=e.data.data}function n(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function o(e){this.data=e,this.depth=this.height=0,this.parent=null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.computeHeight=n,exports.Node=o;var i=require("./count"),d=e(i),l=require("./each"),h=e(l),s=require("./eachBefore"),c=e(s),f=require("./eachAfter"),p=e(f),q=require("./sum"),v=e(q),g=require("./sort"),y=e(g),w=require("./path"),x=e(w),B=require("./ancestors"),_=e(B),m=require("./descendants"),A=e(m),k=require("./leaves"),M=e(k),b=require("./links"),j=e(b);o.prototype=t.prototype={constructor:o,count:d.default,each:h.default,eachAfter:p.default,eachBefore:c.default,sum:v.default,sort:y.default,path:x.default,ancestors:_.default,descendants:A.default,leaves:M.default,links:j.default,copy:r};
},{"./count":432,"./each":433,"./eachBefore":435,"./eachAfter":436,"./sum":438,"./sort":434,"./path":439,"./ancestors":437,"./descendants":440,"./leaves":442,"./links":441}],425:[function(require,module,exports) {
"use strict";function e(e){for(var r,t,o=e.length;o;)t=Math.random()*o--|0,r=e[o],e[o]=e[t],e[t]=r;return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shuffle=e;var r=exports.slice=Array.prototype.slice;
},{}],240:[function(require,module,exports) {
"use strict";function r(r,e){var u,f;if(n(e,r))return[e];for(u=0;u<r.length;++u)if(t(e,r[u])&&n(o(r[u],e),r))return[r[u],e];for(u=0;u<r.length-1;++u)for(f=u+1;f<r.length;++f)if(t(o(r[u],r[f]),e)&&t(o(r[u],e),r[f])&&t(o(r[f],e),r[u])&&n(a(r[u],r[f],e),r))return[r[u],r[f],e];throw new Error}function t(r,t){var e=r.r-t.r,n=t.x-r.x,u=t.y-r.y;return e<0||e*e<n*n+u*u}function e(r,t){var e=r.r-t.r+1e-6,n=t.x-r.x,u=t.y-r.y;return e>0&&e*e>n*n+u*u}function n(r,t){for(var n=0;n<t.length;++n)if(!e(r,t[n]))return!1;return!0}function u(r){switch(r.length){case 1:return f(r[0]);case 2:return o(r[0],r[1]);case 3:return a(r[0],r[1],r[2])}}function f(r){return{x:r.x,y:r.y,r:r.r}}function o(r,t){var e=r.x,n=r.y,u=r.r,f=t.x,o=t.y,a=t.r,i=f-e,c=o-n,x=a-u,y=Math.sqrt(i*i+c*c);return{x:(e+f+i/y*x)/2,y:(n+o+c/y*x)/2,r:(y+u+a)/2}}function a(r,t,e){var n=r.x,u=r.y,f=r.r,o=t.x,a=t.y,i=t.r,c=e.x,x=e.y,y=e.r,l=n-o,s=n-c,h=u-a,v=u-x,g=i-f,d=y-f,p=n*n+u*u-f*f,q=p-o*o-a*a+i*i,w=p-c*c-x*x+y*y,M=s*h-l*v,_=(h*w-v*q)/(2*M)-n,b=(v*g-h*d)/M,j=(s*q-l*w)/(2*M)-u,E=(l*d-s*g)/M,O=b*b+E*E-1,P=2*(f+_*b+j*E),k=_*_+j*j-f*f,m=-(O?(P+Math.sqrt(P*P-4*O*k))/(2*O):k/P);return{x:n+_+b*m,y:u+j+E*m,r:m}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){for(var n,f,o=0,a=(t=(0,i.shuffle)(i.slice.call(t))).length,c=[];o<a;)n=t[o],f&&e(f,n)?++o:(f=u(c=r(c,n)),o=0);return f};var i=require("../array");
},{"../array":425}],241:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r,n){var t=e.x,u=e.y,i=r.r+n.r,o=e.r+n.r,x=r.x-t,s=r.y-u,f=x*x+s*s;if(f){var _=.5+((o*=o)-(i*=i))/(2*f),v=Math.sqrt(Math.max(0,2*i*(o+f)-(o-=f)*o-i*i))/(2*f);n.x=t+_*x+v*s,n.y=u+_*s-v*x}else n.x=t+o,n.y=u}function n(e,r){var n=r.x-e.x,t=r.y-e.y,u=e.r+r.r;return u*u-1e-6>n*n+t*t}function t(e){var r=e._,n=e.next._,t=r.r+n.r,u=(r.x*n.r+n.x*r.r)/t,i=(r.y*n.r+n.y*r.r)/t;return u*u+i*i}function u(e){this._=e,this.next=null,this.previous=null}function i(e){if(!(f=e.length))return 0;var i,o,s,f,_,v,l,p,a,c,y;if(i=e[0],i.x=0,i.y=0,!(f>1))return i.r;if(o=e[1],i.x=-o.r,o.x=i.r,o.y=0,!(f>2))return i.r+o.r;r(o,i,s=e[2]),i=new u(i),o=new u(o),s=new u(s),i.next=s.previous=o,o.next=i.previous=s,s.next=o.previous=i;e:for(l=3;l<f;++l){r(i._,o._,s=e[l]),s=new u(s),p=o.next,a=i.previous,c=o._.r,y=i._.r;do{if(c<=y){if(n(p._,s._)){o=p,i.next=o,o.previous=i,--l;continue e}c+=p._.r,p=p.next}else{if(n(a._,s._)){(i=a).next=o,o.previous=i,--l;continue e}y+=a._.r,a=a.previous}}while(p!==a.next);for(s.previous=i,s.next=o,i.next=o.previous=o=s,_=t(i);(s=s.next)!==o;)(v=t(s))<_&&(i=s,_=v);o=i.next}for(i=[o._],s=o;(s=s.next)!==o;)i.push(s._);for(s=(0,x.default)(i),l=0;l<f;++l)i=e[l],i.x-=s.x,i.y-=s.y;return s.r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.packEnclose=i,exports.default=function(e){return i(e),e};var o=require("./enclose"),x=e(o);
},{"./enclose":240}],376:[function(require,module,exports) {
"use strict";function e(e){return null==e?null:r(e)}function r(e){if("function"!=typeof e)throw new Error;return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.optional=e,exports.required=r;
},{}],426:[function(require,module,exports) {
"use strict";function e(){return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.constantZero=e,exports.default=function(e){return function(){return e}};
},{}],242:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function n(e){return Math.sqrt(e.value)}function r(e){return function(n){n.children||(n.r=Math.max(0,+e(n)||0))}}function t(e,n){return function(r){if(t=r.children){var t,u,c,i=t.length,f=e(r)*n||0;if(f)for(u=0;u<i;++u)t[u].r+=f;if(c=(0,o.packEnclose)(t),f)for(u=0;u<i;++u)t[u].r-=f;r.r=c+f}}}function u(e){return function(n){var r=n.parent;n.r*=e,r&&(n.x=r.x+e*n.x,n.y=r.y+e*n.y)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function e(e){return e.x=a/2,e.y=l/2,o?e.eachBefore(r(o)).eachAfter(t(s,.5)).eachBefore(u(1)):e.eachBefore(r(n)).eachAfter(t(i.constantZero,1)).eachAfter(t(s,e.r/Math.min(a,l))).eachBefore(u(Math.min(a,l)/(2*e.r))),e}var o=null,a=1,l=1,s=i.constantZero;return e.radius=function(n){return arguments.length?(o=(0,c.optional)(n),e):o},e.size=function(n){return arguments.length?(a=+n[0],l=+n[1],e):[a,l]},e.padding=function(n){return arguments.length?(s="function"==typeof n?n:(0,f.default)(+n),e):s},e};var o=require("./siblings"),c=require("../accessors"),i=require("../constant"),f=e(i);
},{"./siblings":241,"../accessors":376,"../constant":426}],418:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)};
},{}],245:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,l,r,u){for(var a,o=e.children,n=-1,s=o.length,v=e.value&&(r-t)/e.value;++n<s;)(a=o[n]).y0=l,a.y1=u,a.x0=t,a.x1=t+=a.value*v};
},{}],144:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function e(e){var d=e.height+1;return e.x0=e.y0=i,e.x1=r,e.y1=n/d,e.eachBefore(function(e,r){return function(t){t.children&&(0,u.default)(t,t.x0,e*(t.depth+1)/r,t.x1,e*(t.depth+2)/r);var n=t.x0,o=t.y0,d=t.x1-i,f=t.y1-i;d<n&&(n=d=(n+d)/2),f<o&&(o=f=(o+f)/2),t.x0=n,t.y0=o,t.x1=d,t.y1=f}}(n,d)),o&&e.eachBefore(t.default),e}var r=1,n=1,i=0,o=!1;return e.round=function(r){return arguments.length?(o=!!r,e):o},e.size=function(t){return arguments.length?(r=+t[0],n=+t[1],e):[r,n]},e.padding=function(r){return arguments.length?(i=+r,e):i},e};var r=require("./treemap/round"),t=e(r),n=require("./treemap/dice"),u=e(n);
},{"./treemap/round":418,"./treemap/dice":245}],145:[function(require,module,exports) {
"use strict";function r(r){return r.id}function e(r){return r.parentId}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function c(r){var e,n,c,l,d,a,p,s=r.length,w=new Array(s),g={};for(n=0;n<s;++n)e=r[n],d=w[n]=new t.Node(e),null!=(a=h(e,n,r))&&(a+="")&&(g[p=o+(d.id=a)]=p in g?u:d);for(n=0;n<s;++n)if(d=w[n],null!=(a=f(r[n],n,r))&&(a+="")){if(!(l=g[o+a]))throw new Error("missing: "+a);if(l===u)throw new Error("ambiguous: "+a);l.children?l.children.push(d):l.children=[d],d.parent=l}else{if(c)throw new Error("multiple roots");c=d}if(!c)throw new Error("no root");if(c.parent=i,c.eachBefore(function(r){r.depth=r.parent.depth+1,--s}).eachBefore(t.computeHeight),c.parent=null,s>0)throw new Error("cycle");return c}var h=r,f=e;return c.id=function(r){return arguments.length?(h=(0,n.required)(r),c):h},c.parentId=function(r){return arguments.length?(f=(0,n.required)(r),c):f},c};var n=require("./accessors"),t=require("./hierarchy/index"),o="$",i={depth:-1},u={};
},{"./accessors":376,"./hierarchy/index":243}],149:[function(require,module,exports) {
"use strict";function n(n,e){return n.parent===e.parent?1:2}function e(n){var e=n.children;return e?e[0]:n.t}function t(n){var e=n.children;return e?e[e.length-1]:n.t}function r(n,e,t){var r=t/(e.i-n.i);e.c-=r,e.s+=t,n.c+=r,e.z+=t,e.m+=t}function i(n){for(var e,t=0,r=0,i=n.children,u=i.length;--u>=0;)(e=i[u]).z+=t,e.m+=t,t+=e.s+(r+=e.c)}function u(n,e,t){return n.a.parent===e.parent?n.a:t}function c(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function a(n){for(var e,t,r,i,u,a=new c(n,0),h=[a];e=h.pop();)if(r=e._.children)for(e.children=new Array(u=r.length),i=u-1;i>=0;--i)h.push(t=e.children[i]=new c(r[i],i)),t.parent=e;return(a.parent=new c(null,0)).children=[a],a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function c(n){var e=a(n);if(e.eachAfter(h),e.parent.m=-e.z,e.eachBefore(l),d)n.eachBefore(o);else{var t=n,r=n,i=n;n.eachBefore(function(n){n.x<t.x&&(t=n),n.x>r.x&&(r=n),n.depth>i.depth&&(i=n)});var u=t===r?1:f(t,r)/2,c=u-t.x,m=p/(r.x+u+c),z=s/(i.depth||1);n.eachBefore(function(n){n.x=(n.x+c)*m,n.y=n.depth*z})}return n}function h(n){var c=n.children,a=n.parent.children,h=n.i?a[n.i-1]:null;if(c){i(n);var l=(c[0].z+c[c.length-1].z)/2;h?(n.z=h.z+f(n._,h._),n.m=n.z-l):n.z=l}else h&&(n.z=h.z+f(n._,h._));n.parent.A=function(n,i,c){if(i){for(var a,h=n,l=n,o=i,p=h.parent.children[0],s=h.m,d=l.m,m=o.m,z=p.m;o=t(o),h=e(h),o&&h;)p=e(p),(l=t(l)).a=n,(a=o.z+m-h.z-s+f(o._,h._))>0&&(r(u(o,n,c),n,a),s+=a,d+=a),m+=o.m,s+=h.m,z+=p.m,d+=l.m;o&&!t(l)&&(l.t=o,l.m+=m-d),h&&!e(p)&&(p.t=h,p.m+=s-z,c=n)}return c}(n,h,n.parent.A||a[0])}function l(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function o(n){n.x*=p,n.y=n.depth*s}var f=n,p=1,s=1,d=null;return c.separation=function(n){return arguments.length?(f=n,c):f},c.size=function(n){return arguments.length?(d=!1,p=+n[0],s=+n[1],c):d?null:[p,s]},c.nodeSize=function(n){return arguments.length?(d=!0,p=+n[0],s=+n[1],c):d?[p,s]:null},c};var h=require("./hierarchy/index");c.prototype=Object.create(h.Node.prototype);
},{"./hierarchy/index":243}],249:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,l,r,u){for(var a,o=e.children,n=-1,s=o.length,v=e.value&&(u-l)/e.value;++n<s;)(a=o[n]).x0=t,a.x1=r,a.y0=l,a.y1=l+=a.value*v};
},{}],247:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r,t,i,o,n){for(var l,c,d,f,s,h,p,v,x,M,q,_=[],m=r.children,b=0,y=0,g=m.length,j=r.value;b<g;){d=o-t,f=n-i;do{s=m[y++].value}while(!s&&y<g);for(h=p=s,q=s*s*(M=Math.max(f/d,d/f)/(j*e)),x=Math.max(p/q,q/h);y<g;++y){if(s+=c=m[y].value,c<h&&(h=c),c>p&&(p=c),q=s*s*M,(v=Math.max(p/q,q/h))>x){s-=c;break}x=v}_.push(l={value:s,dice:d<f,children:m.slice(b,y)}),l.dice?(0,u.default)(l,t,i,o,j?i+=f*s/j:n):(0,a.default)(l,t,i,j?t+=d*s/j:o,n),j-=s,b=y}return _}Object.defineProperty(exports,"__esModule",{value:!0}),exports.phi=void 0,exports.squarifyRatio=r;var t=require("./dice"),u=e(t),i=require("./slice"),a=e(i),o=exports.phi=(1+Math.sqrt(5))/2;exports.default=function e(t){function u(e,u,i,a,o){r(t,e,u,i,a,o)}return u.ratio=function(r){return e((r=+r)>1?r:1)},u}(o);
},{"./dice":245,"./slice":249}],248:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function n(n){return n.x0=n.y0=0,n.x1=a,n.y1=c,n.eachBefore(t),p=[0],f&&n.eachBefore(e.default),n}function t(n){var t=p[n.depth],e=n.x0+t,u=n.y0+t,o=n.x1-t,d=n.y1-t;o<e&&(e=o=(e+o)/2),d<u&&(u=d=(u+d)/2),n.x0=e,n.y0=u,n.x1=o,n.y1=d,n.children&&(t=p[n.depth+1]=g(n)/2,e+=y(n)-t,u+=l(n)-t,o-=h(n)-t,d-=s(n)-t,o<e&&(e=o=(e+o)/2),d<u&&(u=d=(u+d)/2),r(n,e,u,o,d))}var r=u.default,f=!1,a=1,c=1,p=[0],g=d.constantZero,l=d.constantZero,h=d.constantZero,s=d.constantZero,y=d.constantZero;return n.round=function(t){return arguments.length?(f=!!t,n):f},n.size=function(t){return arguments.length?(a=+t[0],c=+t[1],n):[a,c]},n.tile=function(t){return arguments.length?(r=(0,o.required)(t),n):r},n.padding=function(t){return arguments.length?n.paddingInner(t).paddingOuter(t):n.paddingInner()},n.paddingInner=function(t){return arguments.length?(g="function"==typeof t?t:(0,i.default)(+t),n):g},n.paddingOuter=function(t){return arguments.length?n.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):n.paddingTop()},n.paddingTop=function(t){return arguments.length?(l="function"==typeof t?t:(0,i.default)(+t),n):l},n.paddingRight=function(t){return arguments.length?(h="function"==typeof t?t:(0,i.default)(+t),n):h},n.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:(0,i.default)(+t),n):s},n.paddingLeft=function(t){return arguments.length?(y="function"==typeof t?t:(0,i.default)(+t),n):y},n};var t=require("./round"),e=n(t),r=require("./squarify"),u=n(r),o=require("../accessors"),d=require("../constant"),i=n(d);
},{"./round":418,"./squarify":247,"../accessors":376,"../constant":426}],246:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r,a,t,v){function n(e,r,a,t,v,o,u){if(e>=r-1){var i=f[e];return i.x0=t,i.y0=v,i.x1=o,void(i.y1=u)}for(var s=l[e],c=a/2+s,d=e+1,x=r-1;d<x;){var y=d+x>>>1;l[y]<c?d=y+1:x=y}c-l[d-1]<l[d]-c&&e+1<d&&--d;var p=l[d]-s,h=a-p;if(o-t>u-v){var _=(t*h+o*p)/a;n(e,d,p,t,v,_,u),n(d,r,h,_,v,o,u)}else{var b=(v*h+u*p)/a;n(e,d,p,t,v,o,b),n(d,r,h,t,b,o,u)}}var o,u,f=e.children,i=f.length,l=new Array(i+1);for(l[0]=u=o=0;o<i;++o)l[o+1]=u+=f[o].value;n(0,i,e.value,r,a,t,v)};
},{}],250:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,r,i,l){(1&e.depth?d.default:u.default)(e,t,r,i,l)};var t=require("./dice"),u=e(t),r=require("./slice"),d=e(r);
},{"./dice":245,"./slice":249}],252:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./dice"),u=e(r),i=require("./slice"),t=e(i),a=require("./squarify");exports.default=function e(r){function i(e,i,l,f,n){if((o=e._squarify)&&o.ratio===r)for(var o,s,c,d,v,q=-1,_=o.length,y=e.value;++q<_;){for(c=(s=o[q]).children,d=s.value=0,v=c.length;d<v;++d)s.value+=c[d].value;s.dice?(0,u.default)(s,i,l,f,l+=(n-l)*s.value/y):(0,t.default)(s,i,l,i+=(f-i)*s.value/y,n),y-=s.value}else e._squarify=o=(0,a.squarifyRatio)(r,e,i,l,f,n),o.ratio=r}return i.ratio=function(r){return e((r=+r)>1?r:1)},i}(a.phi);
},{"./dice":245,"./slice":249,"./squarify":247}],72:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/cluster");Object.defineProperty(exports,"cluster",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/hierarchy/index");Object.defineProperty(exports,"hierarchy",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/pack/index");Object.defineProperty(exports,"pack",{enumerable:!0,get:function(){return e(n).default}});var u=require("./src/pack/siblings");Object.defineProperty(exports,"packSiblings",{enumerable:!0,get:function(){return e(u).default}});var a=require("./src/pack/enclose");Object.defineProperty(exports,"packEnclose",{enumerable:!0,get:function(){return e(a).default}});var i=require("./src/partition");Object.defineProperty(exports,"partition",{enumerable:!0,get:function(){return e(i).default}});var c=require("./src/stratify");Object.defineProperty(exports,"stratify",{enumerable:!0,get:function(){return e(c).default}});var f=require("./src/tree");Object.defineProperty(exports,"tree",{enumerable:!0,get:function(){return e(f).default}});var o=require("./src/treemap/index");Object.defineProperty(exports,"treemap",{enumerable:!0,get:function(){return e(o).default}});var p=require("./src/treemap/binary");Object.defineProperty(exports,"treemapBinary",{enumerable:!0,get:function(){return e(p).default}});var s=require("./src/treemap/dice");Object.defineProperty(exports,"treemapDice",{enumerable:!0,get:function(){return e(s).default}});var l=require("./src/treemap/slice");Object.defineProperty(exports,"treemapSlice",{enumerable:!0,get:function(){return e(l).default}});var d=require("./src/treemap/sliceDice");Object.defineProperty(exports,"treemapSliceDice",{enumerable:!0,get:function(){return e(d).default}});var b=require("./src/treemap/squarify");Object.defineProperty(exports,"treemapSquarify",{enumerable:!0,get:function(){return e(b).default}});var m=require("./src/treemap/resquarify");Object.defineProperty(exports,"treemapResquarify",{enumerable:!0,get:function(){return e(m).default}});
},{"./src/cluster":142,"./src/hierarchy/index":243,"./src/pack/index":242,"./src/pack/siblings":241,"./src/pack/enclose":240,"./src/partition":144,"./src/stratify":145,"./src/tree":149,"./src/treemap/index":248,"./src/treemap/binary":246,"./src/treemap/dice":245,"./src/treemap/slice":249,"./src/treemap/sliceDice":250,"./src/treemap/squarify":247,"./src/treemap/resquarify":252}],175:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var t,r=-1,o=e.length,u=e[o-1],n=0;++r<o;)t=u,u=e[r],n+=t[1]*u[0]-t[0]*u[1];return n/2};
},{}],178:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var t,r,o=-1,u=e.length,n=0,s=0,f=e[u-1],l=0;++o<u;)t=f,f=e[o],l+=r=t[0]*f[1]-f[0]*t[1],n+=(t[0]+f[0])*r,s+=(t[1]+f[1])*r;return l*=3,[n/l,s/l]};
},{}],389:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])};
},{}],177:[function(require,module,exports) {
"use strict";function r(r){return r&&r.__esModule?r:{default:r}}function e(r,e){return r[0]-e[0]||r[1]-e[1]}function t(r){for(var e=r.length,t=[0,1],n=2,o=2;o<e;++o){for(;n>1&&(0,u.default)(r[t[n-2]],r[t[n-1]],r[o])<=0;)--n;t[n++]=o}return t.slice(0,n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){if((u=r.length)<3)return null;var n,u,o=new Array(u),f=new Array(u);for(n=0;n<u;++n)o[n]=[+r[n][0],+r[n][1],n];for(o.sort(e),n=0;n<u;++n)f[n]=[o[n][0],-o[n][1]];var l=t(o),s=t(f),a=s[0]===l[0],i=s[s.length-1]===l[l.length-1],c=[];for(n=l.length-1;n>=0;--n)c.push(r[o[l[n]][2]]);for(n=+a;n<s.length-i;++n)c.push(r[o[s[n]][2]]);return c};var n=require("./cross"),u=r(n);
},{"./cross":389}],180:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){for(var r,o,u=e.length,n=e[u-1],s=t[0],f=t[1],l=n[0],a=n[1],c=!1,d=0;d<u;++d)r=(n=e[d])[0],(o=n[1])>f!=a>f&&s<(l-r)*(f-o)/(a-o)+r&&(c=!c),l=r,a=o;return c};
},{}],179:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var t,r,o=-1,s=e.length,u=e[s-1],n=u[0],a=u[1],f=0;++o<s;)t=n,r=a,t-=n=(u=e[o])[0],r-=a=u[1],f+=Math.sqrt(t*t+r*r);return f};
},{}],76:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/area");Object.defineProperty(exports,"polygonArea",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/centroid");Object.defineProperty(exports,"polygonCentroid",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/hull");Object.defineProperty(exports,"polygonHull",{enumerable:!0,get:function(){return e(n).default}});var o=require("./src/contains");Object.defineProperty(exports,"polygonContains",{enumerable:!0,get:function(){return e(o).default}});var u=require("./src/length");Object.defineProperty(exports,"polygonLength",{enumerable:!0,get:function(){return e(u).default}});
},{"./src/area":175,"./src/centroid":178,"./src/hull":177,"./src/contains":180,"./src/length":179}],388:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.slice=[].slice;
},{}],176:[function(require,module,exports) {
"use strict";function t(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function i(t){if(!t._start)try{r(t)}catch(i){if(t._tasks[t._ended+t._active-1])n(t,i);else if(!t._data)throw i}}function r(t){for(;t._start=t._waiting&&t._active<t._size;){var i=t._ended+t._active,r=t._tasks[i],n=r.length-1,e=r[n];r[n]=a(t,i),--t._waiting,++t._active,r=e.apply(null,r),t._tasks[i]&&(t._tasks[i]=r||o)}}function a(t,r){return function(a,s){t._tasks[r]&&(--t._active,++t._ended,t._tasks[r]=null,null==t._error&&(null!=a?n(t,a):(t._data[r]=s,t._waiting?i(t):e(t))))}}function n(t,i){var r,a=t._tasks.length;for(t._error=i,t._data=void 0,t._waiting=NaN;--a>=0;)if((r=t._tasks[a])&&(t._tasks[a]=null,r.abort))try{r.abort()}catch(i){}t._active=NaN,e(t)}function e(t){if(!t._active&&t._call){var i=t._data;t._data=void 0,t._call(t._error,i)}}function s(i){if(null==i)i=1/0;else if(!((i=+i)>=1))throw new Error("invalid concurrency");return new t(i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var l=require("./array"),o={};t.prototype=s.prototype={constructor:t,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var r=l.slice.call(arguments,1);return r.push(t),++this._waiting,this._tasks.push(r),i(this),this},abort:function(){return null==this._error&&n(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(i,r){t.apply(null,[i].concat(r))},e(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,e(this),this}};
},{"./array":388}],78:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/queue");Object.defineProperty(exports,"queue",{enumerable:!0,get:function(){return e(r).default}});
},{"./src/queue":176}],411:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return Math.random()};
},{}],205:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var u=require("./defaultSource"),t=e(u);exports.default=function e(u){function t(e,t){return e=null==e?0:+e,t=null==t?1:+t,1===arguments.length?(t=e,e=0):t-=e,function(){return u()*t+e}}return t.source=e,t}(t.default);
},{"./defaultSource":411}],208:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var u=require("./defaultSource"),r=e(u);exports.default=function e(u){function r(e,r){var t,l;return e=null==e?0:+e,r=null==r?1:+r,function(){var n;if(null!=t)n=t,t=null;else do{t=2*u()-1,n=2*u()-1,l=t*t+n*n}while(!l||l>1);return e+r*n*Math.sqrt(-2*Math.log(l)/l)}}return r.source=e,r}(r.default);
},{"./defaultSource":411}],211:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./defaultSource"),u=e(r),t=require("./normal"),n=e(t);exports.default=function e(r){function u(){var e=n.default.source(r).apply(this,arguments);return function(){return Math.exp(e())}}return u.source=e,u}(u.default);
},{"./defaultSource":411,"./normal":208}],221:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./defaultSource"),u=e(r);exports.default=function e(r){function u(e){return function(){for(var u=0,t=0;t<e;++t)u+=r();return u}}return u.source=e,u}(u.default);
},{"./defaultSource":411}],210:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./defaultSource"),u=e(r),t=require("./irwinHall"),n=e(t);exports.default=function e(r){function u(e){var u=n.default.source(r)(e);return function(){return u()/e}}return u.source=e,u}(u.default);
},{"./defaultSource":411,"./irwinHall":221}],212:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./defaultSource"),u=e(t);exports.default=function e(t){function u(e){return function(){return-Math.log(1-t())/e}}return u.source=e,u}(u.default);
},{"./defaultSource":411}],82:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/uniform");Object.defineProperty(exports,"randomUniform",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/normal");Object.defineProperty(exports,"randomNormal",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/logNormal");Object.defineProperty(exports,"randomLogNormal",{enumerable:!0,get:function(){return e(n).default}});var o=require("./src/bates");Object.defineProperty(exports,"randomBates",{enumerable:!0,get:function(){return e(o).default}});var u=require("./src/irwinHall");Object.defineProperty(exports,"randomIrwinHall",{enumerable:!0,get:function(){return e(u).default}});var a=require("./src/exponential");Object.defineProperty(exports,"randomExponential",{enumerable:!0,get:function(){return e(a).default}});
},{"./src/uniform":205,"./src/normal":208,"./src/logNormal":211,"./src/bates":210,"./src/irwinHall":221,"./src/exponential":212}],181:[function(require,module,exports) {
"use strict";function e(e){return function(n,t){e(null==n?t:null)}}function n(e){var n=e.responseType;return n&&"text"!==n?e.response:e.responseText}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(o,l){function u(e){var t,r=d.status;if(!r&&n(d)||r>=200&&r<300||304===r){if(a)try{t=a.call(s,d)}catch(e){return void f.call("error",s,e)}else t=d;f.call("load",s,t)}else f.call("error",s,e)}var s,i,a,c,f=(0,r.dispatch)("beforesend","progress","load","error"),p=(0,t.map)(),d=new XMLHttpRequest,h=null,g=null,y=0;if("undefined"==typeof XDomainRequest||"withCredentials"in d||!/^(http(s)?:)?\/\//.test(o)||(d=new XDomainRequest),"onload"in d?d.onload=d.onerror=d.ontimeout=u:d.onreadystatechange=function(e){d.readyState>3&&u(e)},d.onprogress=function(e){f.call("progress",s,e)},s={header:function(e,n){return e=(e+"").toLowerCase(),arguments.length<2?p.get(e):(null==n?p.remove(e):p.set(e,n+""),s)},mimeType:function(e){return arguments.length?(i=null==e?null:e+"",s):i},responseType:function(e){return arguments.length?(c=e,s):c},timeout:function(e){return arguments.length?(y=+e,s):y},user:function(e){return arguments.length<1?h:(h=null==e?null:e+"",s)},password:function(e){return arguments.length<1?g:(g=null==e?null:e+"",s)},response:function(e){return a=e,s},get:function(e,n){return s.send("GET",e,n)},post:function(e,n){return s.send("POST",e,n)},send:function(n,t,r){return d.open(n,o,!0,h,g),null==i||p.has("accept")||p.set("accept",i+",*/*"),d.setRequestHeader&&p.each(function(e,n){d.setRequestHeader(n,e)}),null!=i&&d.overrideMimeType&&d.overrideMimeType(i),null!=c&&(d.responseType=c),y>0&&(d.timeout=y),null==r&&"function"==typeof t&&(r=t,t=null),null!=r&&1===r.length&&(r=e(r)),null!=r&&s.on("error",r).on("load",function(e){r(null,e)}),f.call("beforesend",s,d),d.send(null==t?null:t),s},abort:function(){return d.abort(),s},on:function(){var e=f.on.apply(f,arguments);return e===f?s:e}},null!=l){if("function"!=typeof l)throw new Error("invalid callback: "+l);return s.get(l)}return s};var t=require("d3-collection"),r=require("d3-dispatch");
},{"d3-collection":67,"d3-dispatch":65}],390:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){return function(u,n){var o=(0,t.default)(u).mimeType(e).response(r);if(null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return o.get(n)}return o}};var r=require("./request"),t=e(r);
},{"./request":181}],183:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./type"),r=e(t);exports.default=(0,r.default)("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)});
},{"./type":390}],189:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./type"),r=e(t);exports.default=(0,r.default)("application/json",function(e){return JSON.parse(e.responseText)});
},{"./type":390}],182:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./type"),r=e(t);exports.default=(0,r.default)("text/plain",function(e){return e.responseText});
},{"./type":390}],190:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./type"),t=e(r);exports.default=(0,t.default)("application/xml",function(e){var r=e.responseXML;if(!r)throw new Error("parse error");return r});
},{"./type":390}],391:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e,r){return function(t){return e(t.responseText,r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return function(u,o,s){arguments.length<3&&(s=o,o=null);var f=(0,n.default)(u).mimeType(e);return f.row=function(e){return arguments.length?f.response(r(t,o=e)):o},f.row(o),s?f.get(s):f}};var t=require("./request"),n=e(t);
},{"./request":181}],187:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("d3-dsv"),t=require("./dsv"),s=e(t);exports.default=(0,s.default)("text/csv",r.csvParse);
},{"d3-dsv":74,"./dsv":391}],184:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("d3-dsv"),r=require("./dsv"),s=e(r);exports.default=(0,s.default)("text/tab-separated-values",t.tsvParse);
},{"d3-dsv":74,"./dsv":391}],80:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/request");Object.defineProperty(exports,"request",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/html");Object.defineProperty(exports,"html",{enumerable:!0,get:function(){return e(t).default}});var u=require("./src/json");Object.defineProperty(exports,"json",{enumerable:!0,get:function(){return e(u).default}});var n=require("./src/text");Object.defineProperty(exports,"text",{enumerable:!0,get:function(){return e(n).default}});var o=require("./src/xml");Object.defineProperty(exports,"xml",{enumerable:!0,get:function(){return e(o).default}});var s=require("./src/csv");Object.defineProperty(exports,"csv",{enumerable:!0,get:function(){return e(s).default}});var c=require("./src/tsv");Object.defineProperty(exports,"tsv",{enumerable:!0,get:function(){return e(c).default}});
},{"./src/request":181,"./src/html":183,"./src/json":189,"./src/text":182,"./src/xml":190,"./src/csv":187,"./src/tsv":184}],392:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Array.prototype,r=exports.map=e.map,t=exports.slice=e.slice;
},{}],196:[function(require,module,exports) {
"use strict";function e(i){function u(e){var n=e+"",r=l.get(n);if(!r){if(c!==t)return c;l.set(n,r=o.push(e))}return i[(r-1)%i.length]}var l=(0,n.map)(),o=[],c=t;return i=null==i?[]:r.slice.call(i),u.domain=function(e){if(!arguments.length)return o.slice();o=[],l=(0,n.map)();for(var r,t,i=-1,c=e.length;++i<c;)l.has(t=(r=e[i])+"")||l.set(t,o.push(r));return u},u.range=function(e){return arguments.length?(i=r.slice.call(e),u):i.slice()},u.unknown=function(e){return arguments.length?(c=e,u):c},u.copy=function(){return e().domain(o).range(i).unknown(c)},u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.implicit=void 0,exports.default=e;var n=require("d3-collection"),r=require("./array"),t=exports.implicit={name:"implicit"};
},{"d3-collection":67,"./array":392}],185:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function t(){function n(){var n=d().length,t=g[1]<g[0],a=g[t-0],i=g[1-t];r=(i-a)/Math.max(1,n-f+2*l),c&&(r=Math.floor(r)),a+=(i-a-r*(n-f))*h,e=r*(1-f),c&&(a=Math.round(a),e=Math.round(e));var p=(0,u.range)(n).map(function(n){return a+r*n});return o(t?p.reverse():p)}var r,e,a=(0,i.default)().unknown(void 0),d=a.domain,o=a.range,g=[0,1],c=!1,f=0,l=0,h=.5;return delete a.unknown,a.domain=function(t){return arguments.length?(d(t),n()):d()},a.range=function(t){return arguments.length?(g=[+t[0],+t[1]],n()):g.slice()},a.rangeRound=function(t){return g=[+t[0],+t[1]],c=!0,n()},a.bandwidth=function(){return e},a.step=function(){return r},a.round=function(t){return arguments.length?(c=!!t,n()):c},a.padding=function(t){return arguments.length?(f=l=Math.max(0,Math.min(1,t)),n()):f},a.paddingInner=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),n()):f},a.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),n()):l},a.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),n()):h},a.copy=function(){return t().domain(d()).range(g).round(c).paddingInner(f).paddingOuter(l).align(h)},n()}function r(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return r(t())},n}function e(){return r(t().paddingInner(1))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.point=e;var u=require("d3-array"),a=require("./ordinal"),i=n(a);
},{"d3-array":66,"./ordinal":196}],393:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return+e};
},{}],395:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function r(n,r){return(r-=n=+n)?function(e){return(e-n)/r}:(0,p.default)(r)}function e(n){return function(r,e){var t=n(r=+r,e=+e);return function(n){return n<=r?0:n>=e?1:t(n)}}}function t(n){return function(r,e){var t=n(r=+r,e=+e);return function(n){return n<=0?r:n>=1?e:t(n)}}}function u(n,r,e,t){var u=n[0],i=n[1],o=r[0],a=r[1];return i<u?(u=e(i,u),o=t(a,o)):(u=e(u,i),o=t(o,a)),function(n){return o(u(n))}}function i(n,r,e,t){var u=Math.min(n.length,r.length)-1,i=new Array(u),o=new Array(u),a=-1;for(n[u]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++a<u;)i[a]=e(n[a],n[a+1]),o[a]=t(r[a],r[a+1]);return function(r){var e=(0,c.bisect)(n,r,1,u)-1;return o[e](i[e](r))}}function o(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp())}function a(n,o){function a(){return s=Math.min(h.length,m.length)>2?i:u,p=d=null,c}function c(r){return(p||(p=s(h,m,q?e(n):n,y)))(+r)}var s,p,d,h=v,m=v,y=l.interpolate,q=!1;return c.invert=function(n){return(d||(d=s(m,h,r,q?t(o):o)))(+n)},c.domain=function(n){return arguments.length?(h=f.map.call(n,g.default),a()):h.slice()},c.range=function(n){return arguments.length?(m=f.slice.call(n),a()):m.slice()},c.rangeRound=function(n){return m=f.slice.call(n),y=l.interpolateRound,a()},c.clamp=function(n){return arguments.length?(q=!!n,a()):q},c.interpolate=function(n){return arguments.length?(y=n,a()):y},a()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deinterpolateLinear=r,exports.copy=o,exports.default=a;var c=require("d3-array"),l=require("d3-interpolate"),f=require("./array"),s=require("./constant"),p=n(s),d=require("./number"),g=n(d),v=[0,1];
},{"d3-array":66,"d3-interpolate":79,"./array":392,"./constant":361,"./number":393}],398:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(a,i,s){var t,c=a[0],n=a[a.length-1],o=(0,e.tickStep)(c,n,null==i?10:i);switch((s=(0,r.formatSpecifier)(null==s?",f":s)).type){case"s":var p=Math.max(Math.abs(c),Math.abs(n));return null!=s.precision||isNaN(t=(0,r.precisionPrefix)(o,p))||(s.precision=t),(0,r.formatPrefix)(s,p);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(t=(0,r.precisionRound)(o,Math.max(Math.abs(c),Math.abs(n))))||(s.precision=t-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(t=(0,r.precisionFixed)(o))||(s.precision=t-2*("%"===s.type))}return(0,r.format)(s)};var e=require("d3-array"),r=require("d3-format");
},{"d3-array":66,"d3-format":68}],191:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){var t=e.domain;return e.ticks=function(e){var r=t();return(0,n.ticks)(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){return(0,c.default)(t(),e,r)},e.nice=function(r){null==r&&(r=10);var i,o=t(),u=0,a=o.length-1,c=o[u],l=o[a];return l<c&&(i=c,c=l,l=i,i=u,u=a,a=i),(i=(0,n.tickIncrement)(c,l,r))>0?(c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i,i=(0,n.tickIncrement)(c,l,r)):i<0&&(c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i,i=(0,n.tickIncrement)(c,l,r)),i>0?(o[u]=Math.floor(c/i)*i,o[a]=Math.ceil(l/i)*i,t(o)):i<0&&(o[u]=Math.ceil(c*i)/i,o[a]=Math.floor(l*i)/i,t(o)),e},e}function r(){var e=(0,u.default)(o.deinterpolateLinear,i.interpolateNumber);return e.copy=function(){return(0,o.copy)(e,r())},t(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearish=t,exports.default=r;var n=require("d3-array"),i=require("d3-interpolate"),o=require("./continuous"),u=e(o),a=require("./tickFormat"),c=e(a);
},{"d3-array":66,"d3-interpolate":79,"./continuous":395,"./tickFormat":398}],186:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){return+e}var u=[0,1];return e.invert=e,e.domain=e.range=function(r){return arguments.length?(u=n.map.call(r,i.default),e):u.slice()},e.copy=function(){return r().domain(u)},(0,t.linearish)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var n=require("./array"),t=require("./linear"),u=require("./number"),i=e(u);
},{"./array":392,"./linear":191,"./number":393}],394:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var r,l=0,o=(e=e.slice()).length-1,s=e[l],u=e[o];return u<s&&(r=l,l=o,o=r,r=s,s=u,u=r),e[l]=t.floor(s),e[o]=t.ceil(u),e};
},{}],188:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function n(t,n){return(n=Math.log(n/t))?function(r){return Math.log(r/t)/n}:(0,h.default)(n)}function r(t,n){return t<0?function(r){return-Math.pow(-n,r)*Math.pow(-t,1-r)}:function(r){return Math.pow(n,r)*Math.pow(t,1-r)}}function e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function u(t){return 10===t?e:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}function o(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}function i(t){return function(n){return-t(-n)}}function a(){function t(){return M=o(h),g=u(h),l()[0]<0&&(M=i(M),g=i(g)),e}var e=(0,p.default)(n,r).domain([1,10]),l=e.domain,h=10,M=o(10),g=u(10);return e.base=function(n){return arguments.length?(h=+n,t()):h},e.domain=function(n){return arguments.length?(l(n),t()):l()},e.ticks=function(t){var n,r=l(),e=r[0],u=r[r.length-1];(n=u<e)&&(c=e,e=u,u=c);var o,i,a,c=M(e),s=M(u),d=null==t?10:+t,p=[];if(!(h%1)&&s-c<d){if(c=Math.round(c)-1,s=Math.round(s)+1,e>0){for(;c<s;++c)for(i=1,o=g(c);i<h;++i)if(!((a=o*i)<e)){if(a>u)break;p.push(a)}}else for(;c<s;++c)for(i=h-1,o=g(c);i>=1;--i)if(!((a=o*i)<e)){if(a>u)break;p.push(a)}}else p=(0,f.ticks)(c,s,Math.min(s-c,d)).map(g);return n?p.reverse():p},e.tickFormat=function(t,n){if(null==n&&(n=10===h?".0e":","),"function"!=typeof n&&(n=(0,c.format)(n)),t===1/0)return n;null==t&&(t=10);var r=Math.max(1,h*t/e.ticks().length);return function(t){var e=t/g(Math.round(M(t)));return e*h<h-.5&&(e*=h),e<=r?n(t):""}},e.nice=function(){return l((0,s.default)(l(),{floor:function(t){return g(Math.floor(M(t)))},ceil:function(t){return g(Math.ceil(M(t)))}}))},e.copy=function(){return(0,d.copy)(e,a().base(h))},e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var f=require("d3-array"),c=require("d3-format"),l=require("./constant"),h=t(l),M=require("./nice"),s=t(M),d=require("./continuous"),p=t(d);
},{"d3-array":66,"d3-format":68,"./constant":361,"./nice":394,"./continuous":395}],194:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function e(n,e){return n<0?-Math.pow(-n,e):Math.pow(n,e)}function t(){var n=1,r=(0,f.default)(function(t,r){return(r=e(r,n)-(t=e(t,n)))?function(u){return(e(u,n)-t)/r}:(0,o.default)(r)},function(t,r){return r=e(r,n)-(t=e(t,n)),function(u){return e(t+r*u,1/n)}}),u=r.domain;return r.exponent=function(e){return arguments.length?(n=+e,u(u())):n},r.copy=function(){return(0,c.copy)(r,t().exponent(n))},(0,i.linearish)(r)}function r(){return t().exponent(.5)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.sqrt=r;var u=require("./constant"),o=n(u),i=require("./linear"),c=require("./continuous"),f=n(c);
},{"./constant":361,"./linear":191,"./continuous":395}],193:[function(require,module,exports) {
"use strict";function n(){function t(){var n=0,r=Math.max(1,a.length);for(l=new Array(r-1);++n<r;)l[n-1]=(0,e.quantile)(u,n/r);return i}function i(n){if(!isNaN(n=+n))return a[(0,e.bisect)(l,n)]}var u=[],a=[],l=[];return i.invertExtent=function(n){var e=a.indexOf(n);return e<0?[NaN,NaN]:[e>0?l[e-1]:u[0],e<l.length?l[e]:u[u.length-1]]},i.domain=function(n){if(!arguments.length)return u.slice();u=[];for(var r,i=0,a=n.length;i<a;++i)null==(r=n[i])||isNaN(r=+r)||u.push(r);return u.sort(e.ascending),t()},i.range=function(n){return arguments.length?(a=r.slice.call(n),t()):a.slice()},i.quantiles=function(){return l.slice()},i.copy=function(){return n().domain(u).range(a)},i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("d3-array"),r=require("./array");
},{"d3-array":66,"./array":392}],192:[function(require,module,exports) {
"use strict";function r(){function i(r){if(r<=r)return l[(0,e.bisect)(f,r,0,c)]}function u(){var r=-1;for(f=new Array(c);++r<c;)f[r]=((r+1)*o-(r-c)*a)/(c+1);return i}var a=0,o=1,c=1,f=[.5],l=[0,1];return i.domain=function(r){return arguments.length?(a=+r[0],o=+r[1],u()):[a,o]},i.range=function(r){return arguments.length?(c=(l=n.slice.call(r)).length-1,u()):l.slice()},i.invertExtent=function(r){var e=l.indexOf(r);return e<0?[NaN,NaN]:e<1?[a,f[0]]:e>=c?[f[c-1],o]:[f[e-1],f[e]]},i.copy=function(){return r().domain([a,o]).range(l)},(0,t.linearish)(i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("d3-array"),n=require("./array"),t=require("./linear");
},{"d3-array":66,"./array":392,"./linear":191}],198:[function(require,module,exports) {
"use strict";function e(){function t(e){if(e<=e)return u[(0,n.bisect)(i,e,0,a)]}var i=[.5],u=[0,1],a=1;return t.domain=function(e){return arguments.length?(i=r.slice.call(e),a=Math.min(i.length,u.length-1),t):i.slice()},t.range=function(e){return arguments.length?(u=r.slice.call(e),a=Math.min(i.length,u.length-1),t):u.slice()},t.invertExtent=function(e){var n=u.indexOf(e);return[i[n-1],i[n]]},t.copy=function(){return e().domain(i).range(u)},t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var n=require("d3-array"),r=require("./array");
},{"d3-array":66,"./array":392}],275:[function(require,module,exports) {
"use strict";function e(r,o,u,f){function i(e){return r(e=new Date(+e)),e}return i.floor=i,i.ceil=function(e){return r(e=new Date(e-1)),o(e,1),r(e),e},i.round=function(e){var n=i(e),t=i.ceil(e);return e-n<t-e?n:t},i.offset=function(e,n){return o(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(e,n,t){var u,f=[];if(e=i.ceil(e),t=null==t?1:Math.floor(t),!(e<n&&t>0))return f;do{f.push(u=new Date(+e)),o(e,t),r(e)}while(u<e&&e<n);return f},i.filter=function(n){return e(function(e){if(e>=e)for(;r(e),!n(e);)e.setTime(e-1)},function(e,t){if(e>=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!n(e););else for(;--t>=0;)for(;o(e,1),!n(e););})},u&&(i.count=function(e,o){return n.setTime(+e),t.setTime(+o),r(n),r(t),Math.floor(u(n,t))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(f?function(n){return f(n)%e==0}:function(n){return i.count(0,n)%e==0}):i:null}),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var n=new Date,t=new Date;
},{}],285:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.milliseconds=void 0;var t=require("./interval"),n=e(t),r=(0,n.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,n.default)(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):r:null},exports.default=r;var i=exports.milliseconds=r.range;
},{"./interval":275}],417:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.durationSecond=1e3,r=exports.durationMinute=6e4,t=exports.durationHour=36e5,o=exports.durationDay=864e5,u=exports.durationWeek=6048e5;
},{}],273:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.seconds=void 0;var t=require("./interval"),n=e(t),o=require("./duration"),r=(0,n.default)(function(e){e.setTime(Math.floor(e/o.durationSecond)*o.durationSecond)},function(e,t){e.setTime(+e+t*o.durationSecond)},function(e,t){return(t-e)/o.durationSecond},function(e){return e.getUTCSeconds()});exports.default=r;var u=exports.seconds=r.range;
},{"./interval":275,"./duration":417}],274:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.minutes=void 0;var t=require("./interval"),u=e(t),n=require("./duration"),r=(0,u.default)(function(e){e.setTime(Math.floor(e/n.durationMinute)*n.durationMinute)},function(e,t){e.setTime(+e+t*n.durationMinute)},function(e,t){return(t-e)/n.durationMinute},function(e){return e.getMinutes()});exports.default=r;var i=exports.minutes=r.range;
},{"./interval":275,"./duration":417}],276:[function(require,module,exports) {
"use strict";function r(r){return r&&r.__esModule?r:{default:r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hours=void 0;var e=require("./interval"),t=r(e),u=require("./duration"),o=(0,t.default)(function(r){var e=r.getTimezoneOffset()*u.durationMinute%u.durationHour;e<0&&(e+=u.durationHour),r.setTime(Math.floor((+r-e)/u.durationHour)*u.durationHour+e)},function(r,e){r.setTime(+r+e*u.durationHour)},function(r,e){return(e-r)/u.durationHour},function(r){return r.getHours()});exports.default=o;var n=exports.hours=o.range;
},{"./interval":275,"./duration":417}],279:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.days=void 0;var t=require("./interval"),r=e(t),n=require("./duration"),u=(0,r.default)(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*n.durationMinute)/n.durationDay},function(e){return e.getDate()-1});exports.default=u;var o=exports.days=u.range;
},{"./interval":275,"./duration":417}],277:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return(0,r.default)(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a.durationMinute)/a.durationWeek})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.saturdays=exports.fridays=exports.thursdays=exports.wednesdays=exports.tuesdays=exports.mondays=exports.sundays=exports.saturday=exports.friday=exports.thursday=exports.wednesday=exports.tuesday=exports.monday=exports.sunday=void 0;var s=require("./interval"),r=e(s),a=require("./duration"),o=exports.sunday=t(0),d=exports.monday=t(1),n=exports.tuesday=t(2),u=exports.wednesday=t(3),p=exports.thursday=t(4),y=exports.friday=t(5),x=exports.saturday=t(6),i=exports.sundays=o.range,f=exports.mondays=d.range,g=exports.tuesdays=n.range,c=exports.wednesdays=u.range,l=exports.thursdays=p.range,m=exports.fridays=y.range,D=exports.saturdays=x.range;
},{"./interval":275,"./duration":417}],278:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.months=void 0;var e=require("./interval"),n=t(e),r=(0,n.default)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()});exports.default=r;var o=exports.months=r.range;
},{"./interval":275}],282:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.years=void 0;var t=require("./interval"),r=e(t),u=(0,r.default)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});u.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.default)(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r*e)}):null},exports.default=u;var l=exports.years=u.range;
},{"./interval":275}],280:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcMinutes=void 0;var t=require("./interval"),u=e(t),n=require("./duration"),r=(0,u.default)(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*n.durationMinute)},function(e,t){return(t-e)/n.durationMinute},function(e){return e.getUTCMinutes()});exports.default=r;var i=exports.utcMinutes=r.range;
},{"./interval":275,"./duration":417}],281:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcHours=void 0;var r=require("./interval"),t=e(r),u=require("./duration"),o=(0,t.default)(function(e){e.setUTCMinutes(0,0,0)},function(e,r){e.setTime(+e+r*u.durationHour)},function(e,r){return(r-e)/u.durationHour},function(e){return e.getUTCHours()});exports.default=o;var n=exports.utcHours=o.range;
},{"./interval":275,"./duration":417}],283:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcDays=void 0;var t=require("./interval"),r=e(t),u=require("./duration"),n=(0,r.default)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/u.durationDay},function(e){return e.getUTCDate()-1});exports.default=n;var a=exports.utcDays=n.range;
},{"./interval":275,"./duration":417}],284:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){return(0,s.default)(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/u.durationWeek})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcSaturdays=exports.utcFridays=exports.utcThursdays=exports.utcWednesdays=exports.utcTuesdays=exports.utcMondays=exports.utcSundays=exports.utcSaturday=exports.utcFriday=exports.utcThursday=exports.utcWednesday=exports.utcTuesday=exports.utcMonday=exports.utcSunday=void 0;var r=require("./interval"),s=t(r),u=require("./duration"),a=exports.utcSunday=e(0),o=exports.utcMonday=e(1),d=exports.utcTuesday=e(2),n=exports.utcWednesday=e(3),c=exports.utcThursday=e(4),p=exports.utcFriday=e(5),y=exports.utcSaturday=e(6),x=exports.utcSundays=a.range,i=exports.utcMondays=o.range,T=exports.utcTuesdays=d.range,g=exports.utcWednesdays=n.range,f=exports.utcThursdays=c.range,S=exports.utcFridays=p.range,l=exports.utcSaturdays=y.range;
},{"./interval":275,"./duration":417}],287:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcMonths=void 0;var e=require("./interval"),n=t(e),r=(0,n.default)(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()});exports.default=r;var o=exports.utcMonths=r.range;
},{"./interval":275}],286:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcYears=void 0;var t=require("./interval"),r=e(t),u=(0,r.default)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});u.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.default)(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null},exports.default=u;var l=exports.utcYears=u.range;
},{"./interval":275}],85:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./src/interval");Object.defineProperty(exports,"timeInterval",{enumerable:!0,get:function(){return e(t).default}});var r=require("./src/millisecond");Object.defineProperty(exports,"timeMillisecond",{enumerable:!0,get:function(){return e(r).default}}),Object.defineProperty(exports,"timeMilliseconds",{enumerable:!0,get:function(){return r.milliseconds}}),Object.defineProperty(exports,"utcMillisecond",{enumerable:!0,get:function(){return e(r).default}}),Object.defineProperty(exports,"utcMilliseconds",{enumerable:!0,get:function(){return r.milliseconds}});var n=require("./src/second");Object.defineProperty(exports,"timeSecond",{enumerable:!0,get:function(){return e(n).default}}),Object.defineProperty(exports,"timeSeconds",{enumerable:!0,get:function(){return n.seconds}}),Object.defineProperty(exports,"utcSecond",{enumerable:!0,get:function(){return e(n).default}}),Object.defineProperty(exports,"utcSeconds",{enumerable:!0,get:function(){return n.seconds}});var u=require("./src/minute");Object.defineProperty(exports,"timeMinute",{enumerable:!0,get:function(){return e(u).default}}),Object.defineProperty(exports,"timeMinutes",{enumerable:!0,get:function(){return u.minutes}});var o=require("./src/hour");Object.defineProperty(exports,"timeHour",{enumerable:!0,get:function(){return e(o).default}}),Object.defineProperty(exports,"timeHours",{enumerable:!0,get:function(){return o.hours}});var c=require("./src/day");Object.defineProperty(exports,"timeDay",{enumerable:!0,get:function(){return e(c).default}}),Object.defineProperty(exports,"timeDays",{enumerable:!0,get:function(){return c.days}});var i=require("./src/week");Object.defineProperty(exports,"timeWeek",{enumerable:!0,get:function(){return i.sunday}}),Object.defineProperty(exports,"timeWeeks",{enumerable:!0,get:function(){return i.sundays}}),Object.defineProperty(exports,"timeSunday",{enumerable:!0,get:function(){return i.sunday}}),Object.defineProperty(exports,"timeSundays",{enumerable:!0,get:function(){return i.sundays}}),Object.defineProperty(exports,"timeMonday",{enumerable:!0,get:function(){return i.monday}}),Object.defineProperty(exports,"timeMondays",{enumerable:!0,get:function(){return i.mondays}}),Object.defineProperty(exports,"timeTuesday",{enumerable:!0,get:function(){return i.tuesday}}),Object.defineProperty(exports,"timeTuesdays",{enumerable:!0,get:function(){return i.tuesdays}}),Object.defineProperty(exports,"timeWednesday",{enumerable:!0,get:function(){return i.wednesday}}),Object.defineProperty(exports,"timeWednesdays",{enumerable:!0,get:function(){return i.wednesdays}}),Object.defineProperty(exports,"timeThursday",{enumerable:!0,get:function(){return i.thursday}}),Object.defineProperty(exports,"timeThursdays",{enumerable:!0,get:function(){return i.thursdays}}),Object.defineProperty(exports,"timeFriday",{enumerable:!0,get:function(){return i.friday}}),Object.defineProperty(exports,"timeFridays",{enumerable:!0,get:function(){return i.fridays}}),Object.defineProperty(exports,"timeSaturday",{enumerable:!0,get:function(){return i.saturday}}),Object.defineProperty(exports,"timeSaturdays",{enumerable:!0,get:function(){return i.saturdays}});var s=require("./src/month");Object.defineProperty(exports,"timeMonth",{enumerable:!0,get:function(){return e(s).default}}),Object.defineProperty(exports,"timeMonths",{enumerable:!0,get:function(){return s.months}});var a=require("./src/year");Object.defineProperty(exports,"timeYear",{enumerable:!0,get:function(){return e(a).default}}),Object.defineProperty(exports,"timeYears",{enumerable:!0,get:function(){return a.years}});var d=require("./src/utcMinute");Object.defineProperty(exports,"utcMinute",{enumerable:!0,get:function(){return e(d).default}}),Object.defineProperty(exports,"utcMinutes",{enumerable:!0,get:function(){return d.utcMinutes}});var f=require("./src/utcHour");Object.defineProperty(exports,"utcHour",{enumerable:!0,get:function(){return e(f).default}}),Object.defineProperty(exports,"utcHours",{enumerable:!0,get:function(){return f.utcHours}});var y=require("./src/utcDay");Object.defineProperty(exports,"utcDay",{enumerable:!0,get:function(){return e(y).default}}),Object.defineProperty(exports,"utcDays",{enumerable:!0,get:function(){return y.utcDays}});var p=require("./src/utcWeek");Object.defineProperty(exports,"utcWeek",{enumerable:!0,get:function(){return p.utcSunday}}),Object.defineProperty(exports,"utcWeeks",{enumerable:!0,get:function(){return p.utcSundays}}),Object.defineProperty(exports,"utcSunday",{enumerable:!0,get:function(){return p.utcSunday}}),Object.defineProperty(exports,"utcSundays",{enumerable:!0,get:function(){return p.utcSundays}}),Object.defineProperty(exports,"utcMonday",{enumerable:!0,get:function(){return p.utcMonday}}),Object.defineProperty(exports,"utcMondays",{enumerable:!0,get:function(){return p.utcMondays}}),Object.defineProperty(exports,"utcTuesday",{enumerable:!0,get:function(){return p.utcTuesday}}),Object.defineProperty(exports,"utcTuesdays",{enumerable:!0,get:function(){return p.utcTuesdays}}),Object.defineProperty(exports,"utcWednesday",{enumerable:!0,get:function(){return p.utcWednesday}}),Object.defineProperty(exports,"utcWednesdays",{enumerable:!0,get:function(){return p.utcWednesdays}}),Object.defineProperty(exports,"utcThursday",{enumerable:!0,get:function(){return p.utcThursday}}),Object.defineProperty(exports,"utcThursdays",{enumerable:!0,get:function(){return p.utcThursdays}}),Object.defineProperty(exports,"utcFriday",{enumerable:!0,get:function(){return p.utcFriday}}),Object.defineProperty(exports,"utcFridays",{enumerable:!0,get:function(){return p.utcFridays}}),Object.defineProperty(exports,"utcSaturday",{enumerable:!0,get:function(){return p.utcSaturday}}),Object.defineProperty(exports,"utcSaturdays",{enumerable:!0,get:function(){return p.utcSaturdays}});var b=require("./src/utcMonth");Object.defineProperty(exports,"utcMonth",{enumerable:!0,get:function(){return e(b).default}}),Object.defineProperty(exports,"utcMonths",{enumerable:!0,get:function(){return b.utcMonths}});var m=require("./src/utcYear");Object.defineProperty(exports,"utcYear",{enumerable:!0,get:function(){return e(m).default}}),Object.defineProperty(exports,"utcYears",{enumerable:!0,get:function(){return m.utcYears}});
},{"./src/interval":275,"./src/millisecond":285,"./src/second":273,"./src/minute":274,"./src/hour":276,"./src/day":279,"./src/week":277,"./src/month":278,"./src/year":282,"./src/utcMinute":280,"./src/utcHour":281,"./src/utcDay":283,"./src/utcWeek":284,"./src/utcMonth":287,"./src/utcYear":286}],232:[function(require,module,exports) {
"use strict";function n(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function t(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function e(n){return{y:n,m:0,d:1,H:0,M:0,S:0,L:0}}function r(r){function u(n,t){return function(e){var r,u,c,i=[],o=-1,a=0,f=n.length;for(e instanceof Date||(e=new Date(+e));++o<f;)37===n.charCodeAt(o)&&(i.push(n.slice(a,o)),null!=(u=sn[r=n.charAt(++o)])?r=n.charAt(++o):u="e"===r?" ":"0",(c=t[r])&&(r=c(e,u)),i.push(r),a=o+1);return i.push(n.slice(a,o)),i.join("")}}function c(n,r){return function(u){var c,i,o=e(1900);if(hn(o,n,u+="",0)!=u.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(c=(i=(c=t(e(o.y))).getUTCDay())>4||0===i?gn.utcMonday.ceil(c):(0,gn.utcMonday)(c),c=gn.utcDay.offset(c,7*(o.V-1)),o.y=c.getUTCFullYear(),o.m=c.getUTCMonth(),o.d=c.getUTCDate()+(o.w+6)%7):(c=(i=(c=r(e(o.y))).getDay())>4||0===i?gn.timeMonday.ceil(c):(0,gn.timeMonday)(c),c=gn.timeDay.offset(c,7*(o.V-1)),o.y=c.getFullYear(),o.m=c.getMonth(),o.d=c.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?t(e(o.y)).getUTCDay():r(e(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,t(o)):r(o)}}function hn(n,t,e,r){for(var u,c,i=0,o=t.length,a=e.length;i<o;){if(r>=a)return-1;if(37===(u=t.charCodeAt(i++))){if(u=t.charAt(i++),!(c=Wn[u in sn?t.charAt(i++):u])||(r=c(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}var yn=r.dateTime,dn=r.date,vn=r.time,mn=r.periods,Cn=r.days,Dn=r.shortDays,Tn=r.months,xn=r.shortMonths,Mn=i(mn),Un=o(mn),wn=i(Cn),Yn=o(Cn),Hn=i(Dn),pn=o(Dn),Sn=i(Tn),Ln=o(Tn),An=i(xn),Zn=o(xn),Fn={a:function(n){return Dn[n.getDay()]},A:function(n){return Cn[n.getDay()]},b:function(n){return xn[n.getMonth()]},B:function(n){return Tn[n.getMonth()]},c:null,d:p,e:p,f:F,H:S,I:L,j:A,L:Z,m:V,M:W,p:function(n){return mn[+(n.getHours()>=12)]},Q:fn,s:ln,S:j,u:Q,U:X,V:b,w:B,W:I,x:null,X:null,y:_,Y:O,Z:P,"%":an},Vn={a:function(n){return Dn[n.getUTCDay()]},A:function(n){return Cn[n.getUTCDay()]},b:function(n){return xn[n.getUTCMonth()]},B:function(n){return Tn[n.getUTCMonth()]},c:null,d:$,e:$,f:k,H:q,I:z,j:E,L:R,m:G,M:J,p:function(n){return mn[+(n.getUTCHours()>=12)]},Q:fn,s:ln,S:K,u:N,U:nn,V:tn,w:en,W:rn,x:null,X:null,y:un,Y:cn,Z:on,"%":an},Wn={a:function(n,t,e){var r=Hn.exec(t.slice(e));return r?(n.w=pn[r[0].toLowerCase()],e+r[0].length):-1},A:function(n,t,e){var r=wn.exec(t.slice(e));return r?(n.w=Yn[r[0].toLowerCase()],e+r[0].length):-1},b:function(n,t,e){var r=An.exec(t.slice(e));return r?(n.m=Zn[r[0].toLowerCase()],e+r[0].length):-1},B:function(n,t,e){var r=Sn.exec(t.slice(e));return r?(n.m=Ln[r[0].toLowerCase()],e+r[0].length):-1},c:function(n,t,e){return hn(n,yn,t,e)},d:m,e:m,f:U,H:D,I:D,j:C,L:M,m:v,M:T,p:function(n,t,e){var r=Mn.exec(t.slice(e));return r?(n.p=Un[r[0].toLowerCase()],e+r[0].length):-1},Q:Y,s:H,S:x,u:f,U:l,V:g,w:a,W:s,x:function(n,t,e){return hn(n,dn,t,e)},X:function(n,t,e){return hn(n,vn,t,e)},y:y,Y:h,Z:d,"%":w};return Fn.x=u(dn,Fn),Fn.X=u(vn,Fn),Fn.c=u(yn,Fn),Vn.x=u(dn,Vn),Vn.X=u(vn,Vn),Vn.c=u(yn,Vn),{format:function(n){var t=u(n+="",Fn);return t.toString=function(){return n},t},parse:function(t){var e=c(t+="",n);return e.toString=function(){return t},e},utcFormat:function(n){var t=u(n+="",Vn);return t.toString=function(){return n},t},utcParse:function(n){var e=c(n,t);return e.toString=function(){return n},e}}}function u(n,t,e){var r=n<0?"-":"",u=(r?-n:n)+"",c=u.length;return r+(c<e?new Array(e-c+1).join(t)+u:u)}function c(n){return n.replace(dn,"\\$&")}function i(n){return new RegExp("^(?:"+n.map(c).join("|")+")","i")}function o(n){for(var t={},e=-1,r=n.length;++e<r;)t[n[e].toLowerCase()]=e;return t}function a(n,t,e){var r=hn.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function f(n,t,e){var r=hn.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function l(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function g(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function s(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function h(n,t,e){var r=hn.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function y(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function d(n,t,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function v(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function m(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function C(n,t,e){var r=hn.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function D(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function T(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function x(n,t,e){var r=hn.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function M(n,t,e){var r=hn.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function U(n,t,e){var r=hn.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function w(n,t,e){var r=yn.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function Y(n,t,e){var r=hn.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function H(n,t,e){var r=hn.exec(t.slice(e));return r?(n.Q=1e3*+r[0],e+r[0].length):-1}function p(n,t){return u(n.getDate(),t,2)}function S(n,t){return u(n.getHours(),t,2)}function L(n,t){return u(n.getHours()%12||12,t,2)}function A(n,t){return u(1+gn.timeDay.count((0,gn.timeYear)(n),n),t,3)}function Z(n,t){return u(n.getMilliseconds(),t,3)}function F(n,t){return Z(n,t)+"000"}function V(n,t){return u(n.getMonth()+1,t,2)}function W(n,t){return u(n.getMinutes(),t,2)}function j(n,t){return u(n.getSeconds(),t,2)}function Q(n){var t=n.getDay();return 0===t?7:t}function X(n,t){return u(gn.timeSunday.count((0,gn.timeYear)(n),n),t,2)}function b(n,t){var e=n.getDay();return n=e>=4||0===e?(0,gn.timeThursday)(n):gn.timeThursday.ceil(n),u(gn.timeThursday.count((0,gn.timeYear)(n),n)+(4===(0,gn.timeYear)(n).getDay()),t,2)}function B(n){return n.getDay()}function I(n,t){return u(gn.timeMonday.count((0,gn.timeYear)(n),n),t,2)}function _(n,t){return u(n.getFullYear()%100,t,2)}function O(n,t){return u(n.getFullYear()%1e4,t,4)}function P(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+u(t/60|0,"0",2)+u(t%60,"0",2)}function $(n,t){return u(n.getUTCDate(),t,2)}function q(n,t){return u(n.getUTCHours(),t,2)}function z(n,t){return u(n.getUTCHours()%12||12,t,2)}function E(n,t){return u(1+gn.utcDay.count((0,gn.utcYear)(n),n),t,3)}function R(n,t){return u(n.getUTCMilliseconds(),t,3)}function k(n,t){return R(n,t)+"000"}function G(n,t){return u(n.getUTCMonth()+1,t,2)}function J(n,t){return u(n.getUTCMinutes(),t,2)}function K(n,t){return u(n.getUTCSeconds(),t,2)}function N(n){var t=n.getUTCDay();return 0===t?7:t}function nn(n,t){return u(gn.utcSunday.count((0,gn.utcYear)(n),n),t,2)}function tn(n,t){var e=n.getUTCDay();return n=e>=4||0===e?(0,gn.utcThursday)(n):gn.utcThursday.ceil(n),u(gn.utcThursday.count((0,gn.utcYear)(n),n)+(4===(0,gn.utcYear)(n).getUTCDay()),t,2)}function en(n){return n.getUTCDay()}function rn(n,t){return u(gn.utcMonday.count((0,gn.utcYear)(n),n),t,2)}function un(n,t){return u(n.getUTCFullYear()%100,t,2)}function cn(n,t){return u(n.getUTCFullYear()%1e4,t,4)}function on(){return"+0000"}function an(){return"%"}function fn(n){return+n}function ln(n){return Math.floor(+n/1e3)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var gn=require("d3-time"),sn={"-":"",_:" ",0:"0"},hn=/^\s*\d+/,yn=/^%/,dn=/[\\^$*+?|[\]().{}]/g;
},{"d3-time":85}],230:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return r=(0,o.default)(e),exports.timeFormat=s=r.format,exports.timeParse=u=r.parse,exports.utcFormat=d=r.utcFormat,exports.utcParse=i=r.utcParse,r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcParse=exports.utcFormat=exports.timeParse=exports.timeFormat=void 0,exports.default=t;var r,a=require("./locale"),o=e(a),s=exports.timeFormat=void 0,u=exports.timeParse=void 0,d=exports.utcFormat=void 0,i=exports.utcParse=void 0;t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});
},{"./locale":232}],228:[function(require,module,exports) {
"use strict";function e(e){return e.toISOString()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isoSpecifier=void 0;var t=require("./defaultLocale"),r=exports.isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ",o=Date.prototype.toISOString?e:(0,t.utcFormat)(r);exports.default=o;
},{"./defaultLocale":230}],238:[function(require,module,exports) {
"use strict";function e(e){var r=new Date(e);return isNaN(r)?null:r}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./isoFormat"),t=require("./defaultLocale"),a=+new Date("2000-01-01T00:00:00.000Z")?e:(0,t.utcParse)(r.isoSpecifier);exports.default=a;
},{"./isoFormat":228,"./defaultLocale":230}],83:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/defaultLocale");Object.defineProperty(exports,"timeFormatDefaultLocale",{enumerable:!0,get:function(){return e(r).default}}),Object.defineProperty(exports,"timeFormat",{enumerable:!0,get:function(){return r.timeFormat}}),Object.defineProperty(exports,"timeParse",{enumerable:!0,get:function(){return r.timeParse}}),Object.defineProperty(exports,"utcFormat",{enumerable:!0,get:function(){return r.utcFormat}}),Object.defineProperty(exports,"utcParse",{enumerable:!0,get:function(){return r.utcParse}});var t=require("./src/locale");Object.defineProperty(exports,"timeFormatLocale",{enumerable:!0,get:function(){return e(t).default}});var o=require("./src/isoFormat");Object.defineProperty(exports,"isoFormat",{enumerable:!0,get:function(){return e(o).default}});var u=require("./src/isoParse");Object.defineProperty(exports,"isoParse",{enumerable:!0,get:function(){return e(u).default}});
},{"./src/defaultLocale":230,"./src/locale":232,"./src/isoFormat":228,"./src/isoParse":238}],195:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return new Date(e)}function n(e){return e instanceof Date?+e:+new Date(+e)}function r(e,a,o,m,D,b,g,k,w){function x(t){return(g(t)<t?L:b(t)<t?Y:D(t)<t?j:m(t)<t?B:a(t)<t?o(t)<t?H:N:e(t)<t?O:P)(t)}function S(t,n,r,u){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-n)/t,o=(0,i.bisector)(function(e){return e[2]}).right(W,a);o===W.length?(u=(0,i.tickStep)(n/q,r/q,t),t=e):o?(u=(o=W[a/W[o-1][2]<W[o][2]/a?o-1:o])[1],t=o[0]):(u=Math.max((0,i.tickStep)(n,r,t),1),t=k)}return null==u?t:t.every(u)}var _=(0,f.default)(l.deinterpolateLinear,u.interpolateNumber),F=_.invert,I=_.domain,L=w(".%L"),Y=w(":%S"),j=w("%I:%M"),B=w("%I %p"),H=w("%a %d"),N=w("%b %d"),O=w("%B"),P=w("%Y"),W=[[g,1,p],[g,5,5*p],[g,15,15*p],[g,30,30*p],[b,1,s],[b,5,5*s],[b,15,15*s],[b,30,30*s],[D,1,v],[D,3,3*v],[D,6,6*v],[D,12,12*v],[m,1,h],[m,2,2*h],[o,1,y],[a,1,M],[a,3,3*M],[e,1,q]];return _.invert=function(e){return new Date(F(e))},_.domain=function(e){return arguments.length?I(c.map.call(e,n)):I().map(t)},_.ticks=function(e,t){var n,r=I(),i=r[0],u=r[r.length-1],a=u<i;return a&&(n=i,i=u,u=n),n=S(e,i,u,t),n=n?n.range(i,u+1):[],a?n.reverse():n},_.tickFormat=function(e,t){return null==t?x:w(t)},_.nice=function(e,t){var n=I();return(e=S(e,n[0],n[n.length-1],t))?I((0,d.default)(n,e)):_},_.copy=function(){return(0,l.copy)(_,r(e,a,o,m,D,b,g,k,w))},_}Object.defineProperty(exports,"__esModule",{value:!0}),exports.calendar=r,exports.default=function(){return r(a.timeYear,a.timeMonth,a.timeWeek,a.timeDay,a.timeHour,a.timeMinute,a.timeSecond,a.timeMillisecond,o.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])};var i=require("d3-array"),u=require("d3-interpolate"),a=require("d3-time"),o=require("d3-time-format"),c=require("./array"),l=require("./continuous"),f=e(l),m=require("./nice"),d=e(m),p=1e3,s=60*p,v=60*s,h=24*v,y=7*h,M=30*h,q=365*h;
},{"d3-array":66,"d3-interpolate":79,"d3-time":85,"d3-time-format":83,"./array":392,"./continuous":395,"./nice":394}],197:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return(0,e.calendar)(u.utcYear,u.utcMonth,u.utcWeek,u.utcDay,u.utcHour,u.utcMinute,u.utcSecond,u.utcMillisecond,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])};var e=require("./time"),t=require("d3-time-format"),u=require("d3-time");
},{"./time":195,"d3-time-format":83,"d3-time":85}],397:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})};
},{}],199:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var f=require("./colors"),r=e(f);exports.default=(0,r.default)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");
},{"./colors":397}],201:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var d=require("./colors"),c=e(d);exports.default=(0,c.default)("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");
},{"./colors":397}],200:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var d=require("./colors"),a=e(d);exports.default=(0,a.default)("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");
},{"./colors":397}],202:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var f=require("./colors"),c=e(f);exports.default=(0,c.default)("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");
},{"./colors":397}],203:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("d3-color"),r=require("d3-interpolate");exports.default=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(300,.5,0),(0,e.cubehelix)(-240,.5,1));
},{"d3-color":64,"d3-interpolate":79}],206:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cool=exports.warm=void 0,exports.default=function(e){(e<0||e>1)&&(e-=Math.floor(e));var r=Math.abs(e-.5);return l.h=360*e-100,l.s=1.5-1.5*r,l.l=.8-.9*r,l+""};var e=require("d3-color"),r=require("d3-interpolate"),o=exports.warm=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(-100,.75,.35),(0,e.cubehelix)(80,1.5,.8)),t=exports.cool=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(260,.75,.35),(0,e.cubehelix)(80,1.5,.8)),l=(0,e.cubehelix)();
},{"d3-color":64,"d3-interpolate":79}],209:[function(require,module,exports) {
"use strict";function f(f){return f&&f.__esModule?f:{default:f}}function e(f){var e=f.length;return function(a){return f[Math.max(0,Math.min(e-1,Math.floor(a*e)))]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.plasma=exports.inferno=exports.magma=void 0;var a=require("./colors"),d=f(a);exports.default=e((0,d.default)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var c=exports.magma=e((0,d.default)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),b=exports.inferno=e((0,d.default)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),t=exports.plasma=e((0,d.default)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));
},{"./colors":397}],207:[function(require,module,exports) {
"use strict";function n(t){function e(n){var r=(n-u)/(i-u);return t(a?Math.max(0,Math.min(1,r)):r)}var u=0,i=1,a=!1;return e.domain=function(n){return arguments.length?(u=+n[0],i=+n[1],e):[u,i]},e.clamp=function(n){return arguments.length?(a=!!n,e):a},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return n(t).domain([u,i]).clamp(a)},(0,r.linearish)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var r=require("./linear");
},{"./linear":191}],81:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/band");Object.defineProperty(exports,"scaleBand",{enumerable:!0,get:function(){return e(r).default}}),Object.defineProperty(exports,"scalePoint",{enumerable:!0,get:function(){return r.point}});var t=require("./src/identity");Object.defineProperty(exports,"scaleIdentity",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/linear");Object.defineProperty(exports,"scaleLinear",{enumerable:!0,get:function(){return e(n).default}});var u=require("./src/log");Object.defineProperty(exports,"scaleLog",{enumerable:!0,get:function(){return e(u).default}});var a=require("./src/ordinal");Object.defineProperty(exports,"scaleOrdinal",{enumerable:!0,get:function(){return e(a).default}}),Object.defineProperty(exports,"scaleImplicit",{enumerable:!0,get:function(){return a.implicit}});var o=require("./src/pow");Object.defineProperty(exports,"scalePow",{enumerable:!0,get:function(){return e(o).default}}),Object.defineProperty(exports,"scaleSqrt",{enumerable:!0,get:function(){return o.sqrt}});var i=require("./src/quantile");Object.defineProperty(exports,"scaleQuantile",{enumerable:!0,get:function(){return e(i).default}});var c=require("./src/quantize");Object.defineProperty(exports,"scaleQuantize",{enumerable:!0,get:function(){return e(c).default}});var l=require("./src/threshold");Object.defineProperty(exports,"scaleThreshold",{enumerable:!0,get:function(){return e(l).default}});var f=require("./src/time");Object.defineProperty(exports,"scaleTime",{enumerable:!0,get:function(){return e(f).default}});var s=require("./src/utcTime");Object.defineProperty(exports,"scaleUtc",{enumerable:!0,get:function(){return e(s).default}});var p=require("./src/category10");Object.defineProperty(exports,"schemeCategory10",{enumerable:!0,get:function(){return e(p).default}});var b=require("./src/category20b");Object.defineProperty(exports,"schemeCategory20b",{enumerable:!0,get:function(){return e(b).default}});var d=require("./src/category20c");Object.defineProperty(exports,"schemeCategory20c",{enumerable:!0,get:function(){return e(d).default}});var m=require("./src/category20");Object.defineProperty(exports,"schemeCategory20",{enumerable:!0,get:function(){return e(m).default}});var g=require("./src/cubehelix");Object.defineProperty(exports,"interpolateCubehelixDefault",{enumerable:!0,get:function(){return e(g).default}});var y=require("./src/rainbow");Object.defineProperty(exports,"interpolateRainbow",{enumerable:!0,get:function(){return e(y).default}}),Object.defineProperty(exports,"interpolateWarm",{enumerable:!0,get:function(){return y.warm}}),Object.defineProperty(exports,"interpolateCool",{enumerable:!0,get:function(){return y.cool}});var P=require("./src/viridis");Object.defineProperty(exports,"interpolateViridis",{enumerable:!0,get:function(){return e(P).default}}),Object.defineProperty(exports,"interpolateMagma",{enumerable:!0,get:function(){return P.magma}}),Object.defineProperty(exports,"interpolateInferno",{enumerable:!0,get:function(){return P.inferno}}),Object.defineProperty(exports,"interpolatePlasma",{enumerable:!0,get:function(){return P.plasma}});var x=require("./src/sequential");Object.defineProperty(exports,"scaleSequential",{enumerable:!0,get:function(){return e(x).default}});
},{"./src/band":185,"./src/identity":186,"./src/linear":191,"./src/log":188,"./src/ordinal":196,"./src/pow":194,"./src/quantile":193,"./src/quantize":192,"./src/threshold":198,"./src/time":195,"./src/utcTime":197,"./src/category10":199,"./src/category20b":201,"./src/category20c":200,"./src/category20":202,"./src/cubehelix":203,"./src/rainbow":206,"./src/viridis":209,"./src/sequential":207}],423:[function(require,module,exports) {
"use strict";function t(t){return t>1?0:t<-1?h:Math.acos(t)}function s(t){return t>=1?M:t<=-1?-M:Math.asin(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=t,exports.asin=s;var a=exports.abs=Math.abs,e=exports.atan2=Math.atan2,r=exports.cos=Math.cos,o=exports.max=Math.max,p=exports.min=Math.min,n=exports.sin=Math.sin,x=exports.sqrt=Math.sqrt,i=exports.epsilon=1e-12,h=exports.pi=Math.PI,M=exports.halfPi=h/2,c=exports.tau=2*h;
},{}],293:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}function t(n){return n.innerRadius}function e(n){return n.outerRadius}function a(n){return n.startAngle}function i(n){return n.endAngle}function r(n){return n&&n.padAngle}function o(n,t,e,a,i,r,o,c){var u=e-n,l=a-t,s=o-i,p=c-r,f=(s*(t-r)-p*(n-i))/(p*u-s*l);return[n+f*u,t+f*l]}function c(n,t,e,a,i,r,o){var c=n-e,u=t-a,l=(o?r:-r)/(0,p.sqrt)(c*c+u*u),s=l*u,f=-l*c,y=n+s,x=t+f,d=e+s,h=a+f,v=(y+d)/2,g=(x+h)/2,m=d-y,q=h-x,T=m*m+q*q,A=i-r,R=y*h-d*x,P=(q<0?-1:1)*(0,p.sqrt)((0,p.max)(0,A*A*T-R*R)),_=(R*q-m*P)/T,b=(-R*m-q*P)/T,M=(R*q+m*P)/T,j=(-R*m+q*P)/T,O=_-v,k=b-g,w=M-v,z=j-g;return O*O+k*k>w*w+z*z&&(_=M,b=j),{cx:_,cy:b,x01:-s,y01:-f,x11:_*(i/A-1),y11:b*(i/A-1)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function n(){var n,t,e=+l.apply(this,arguments),a=+f.apply(this,arguments),i=d.apply(this,arguments)-p.halfPi,r=h.apply(this,arguments)-p.halfPi,s=(0,p.abs)(r-i),m=r>i;if(g||(g=n=(0,u.path)()),a<e&&(t=a,a=e,e=t),a>p.epsilon)if(s>p.tau-p.epsilon)g.moveTo(a*(0,p.cos)(i),a*(0,p.sin)(i)),g.arc(0,0,a,i,r,!m),e>p.epsilon&&(g.moveTo(e*(0,p.cos)(r),e*(0,p.sin)(r)),g.arc(0,0,e,r,i,m));else{var q,T,A=i,R=r,P=i,_=r,b=s,M=s,j=v.apply(this,arguments)/2,O=j>p.epsilon&&(x?+x.apply(this,arguments):(0,p.sqrt)(e*e+a*a)),k=(0,p.min)((0,p.abs)(a-e)/2,+y.apply(this,arguments)),w=k,z=k;if(O>p.epsilon){var B=(0,p.asin)(O/e*(0,p.sin)(j)),C=(0,p.asin)(O/a*(0,p.sin)(j));(b-=2*B)>p.epsilon?(B*=m?1:-1,P+=B,_-=B):(b=0,P=_=(i+r)/2),(M-=2*C)>p.epsilon?(C*=m?1:-1,A+=C,R-=C):(M=0,A=R=(i+r)/2)}var D=a*(0,p.cos)(A),E=a*(0,p.sin)(A),F=e*(0,p.cos)(_),G=e*(0,p.sin)(_);if(k>p.epsilon){var H=a*(0,p.cos)(R),I=a*(0,p.sin)(R),J=e*(0,p.cos)(P),K=e*(0,p.sin)(P);if(s<p.pi){var L=b>p.epsilon?o(D,E,J,K,H,I,F,G):[F,G],N=D-L[0],Q=E-L[1],S=H-L[0],U=I-L[1],V=1/(0,p.sin)((0,p.acos)((N*S+Q*U)/((0,p.sqrt)(N*N+Q*Q)*(0,p.sqrt)(S*S+U*U)))/2),W=(0,p.sqrt)(L[0]*L[0]+L[1]*L[1]);w=(0,p.min)(k,(e-W)/(V-1)),z=(0,p.min)(k,(a-W)/(V+1))}}M>p.epsilon?z>p.epsilon?(q=c(J,K,D,E,a,z,m),T=c(H,I,F,G,a,z,m),g.moveTo(q.cx+q.x01,q.cy+q.y01),z<k?g.arc(q.cx,q.cy,z,(0,p.atan2)(q.y01,q.x01),(0,p.atan2)(T.y01,T.x01),!m):(g.arc(q.cx,q.cy,z,(0,p.atan2)(q.y01,q.x01),(0,p.atan2)(q.y11,q.x11),!m),g.arc(0,0,a,(0,p.atan2)(q.cy+q.y11,q.cx+q.x11),(0,p.atan2)(T.cy+T.y11,T.cx+T.x11),!m),g.arc(T.cx,T.cy,z,(0,p.atan2)(T.y11,T.x11),(0,p.atan2)(T.y01,T.x01),!m))):(g.moveTo(D,E),g.arc(0,0,a,A,R,!m)):g.moveTo(D,E),e>p.epsilon&&b>p.epsilon?w>p.epsilon?(q=c(F,G,H,I,e,-w,m),T=c(D,E,J,K,e,-w,m),g.lineTo(q.cx+q.x01,q.cy+q.y01),w<k?g.arc(q.cx,q.cy,w,(0,p.atan2)(q.y01,q.x01),(0,p.atan2)(T.y01,T.x01),!m):(g.arc(q.cx,q.cy,w,(0,p.atan2)(q.y01,q.x01),(0,p.atan2)(q.y11,q.x11),!m),g.arc(0,0,e,(0,p.atan2)(q.cy+q.y11,q.cx+q.x11),(0,p.atan2)(T.cy+T.y11,T.cx+T.x11),m),g.arc(T.cx,T.cy,w,(0,p.atan2)(T.y11,T.x11),(0,p.atan2)(T.y01,T.x01),!m))):g.arc(0,0,e,_,P,m):g.lineTo(F,G)}else g.moveTo(0,0);if(g.closePath(),n)return g=null,n+""||null}var l=t,f=e,y=(0,s.default)(0),x=null,d=a,h=i,v=r,g=null;return n.centroid=function(){var n=(+l.apply(this,arguments)+ +f.apply(this,arguments))/2,t=(+d.apply(this,arguments)+ +h.apply(this,arguments))/2-p.pi/2;return[(0,p.cos)(t)*n,(0,p.sin)(t)*n]},n.innerRadius=function(t){return arguments.length?(l="function"==typeof t?t:(0,s.default)(+t),n):l},n.outerRadius=function(t){return arguments.length?(f="function"==typeof t?t:(0,s.default)(+t),n):f},n.cornerRadius=function(t){return arguments.length?(y="function"==typeof t?t:(0,s.default)(+t),n):y},n.padRadius=function(t){return arguments.length?(x=null==t?null:"function"==typeof t?t:(0,s.default)(+t),n):x},n.startAngle=function(t){return arguments.length?(d="function"==typeof t?t:(0,s.default)(+t),n):d},n.endAngle=function(t){return arguments.length?(h="function"==typeof t?t:(0,s.default)(+t),n):h},n.padAngle=function(t){return arguments.length?(v="function"==typeof t?t:(0,s.default)(+t),n):v},n.context=function(t){return arguments.length?(g=null==t?null:t,n):g},n};var u=require("d3-path"),l=require("./constant"),s=n(l),p=require("./math");
},{"d3-path":75,"./constant":361,"./math":423}],335:[function(require,module,exports) {
"use strict";function t(t){this._context=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i){return new t(i)},t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};
},{}],420:[function(require,module,exports) {
"use strict";function e(e){return e[0]}function t(e){return e[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.x=e,exports.y=t;
},{}],296:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function n(n){var u,l,f,d=n.length,p=!1;for(null==o&&(a=c(f=(0,e.path)())),u=0;u<=d;++u)!(u<d&&i(l=n[u],u,n))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(l,u,n),+r(l,u,n));if(f)return a=null,f+""||null}var t=f.x,r=f.y,i=(0,u.default)(!0),o=null,c=l.default,a=null;return n.x=function(e){return arguments.length?(t="function"==typeof e?e:(0,u.default)(+e),n):t},n.y=function(e){return arguments.length?(r="function"==typeof e?e:(0,u.default)(+e),n):r},n.defined=function(e){return arguments.length?(i="function"==typeof e?e:(0,u.default)(!!e),n):i},n.curve=function(e){return arguments.length?(c=e,null!=o&&(a=c(o)),n):c},n.context=function(e){return arguments.length?(null==e?o=a=null:a=c(o=e),n):o},n};var e=require("d3-path"),t=require("./constant"),u=n(t),r=require("./curve/linear"),l=n(r),f=require("./point");
},{"d3-path":75,"./constant":361,"./curve/linear":335,"./point":420}],291:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function n(n){var t,u,r,i,o,x=n.length,g=!1,s=new Array(x),v=new Array(x);for(null==y&&(h=p(o=(0,e.path)())),t=0;t<=x;++t){if(!(t<x&&d(i=n[t],t,n))===g)if(g=!g)u=t,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),r=t-1;r>=u;--r)h.point(s[r],v[r]);h.lineEnd(),h.areaEnd()}g&&(s[t]=+l(i,t,n),v[t]=+c(i,t,n),h.point(f?+f(i,t,n):s[t],a?+a(i,t,n):v[t]))}if(o)return h=null,o+""||null}function t(){return(0,i.default)().defined(d).curve(p).context(y)}var l=o.x,f=null,c=(0,u.default)(0),a=o.y,d=(0,u.default)(!0),y=null,p=r.default,h=null;return n.x=function(e){return arguments.length?(l="function"==typeof e?e:(0,u.default)(+e),f=null,n):l},n.x0=function(e){return arguments.length?(l="function"==typeof e?e:(0,u.default)(+e),n):l},n.x1=function(e){return arguments.length?(f=null==e?null:"function"==typeof e?e:(0,u.default)(+e),n):f},n.y=function(e){return arguments.length?(c="function"==typeof e?e:(0,u.default)(+e),a=null,n):c},n.y0=function(e){return arguments.length?(c="function"==typeof e?e:(0,u.default)(+e),n):c},n.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:(0,u.default)(+e),n):a},n.lineX0=n.lineY0=function(){return t().x(l).y(c)},n.lineY1=function(){return t().x(l).y(a)},n.lineX1=function(){return t().x(f).y(c)},n.defined=function(e){return arguments.length?(d="function"==typeof e?e:(0,u.default)(!!e),n):d},n.curve=function(e){return arguments.length?(p=e,null!=y&&(h=p(y)),n):p},n.context=function(e){return arguments.length?(null==e?y=h=null:h=p(y=e),n):y},n};var e=require("d3-path"),t=require("./constant"),u=n(t),l=require("./curve/linear"),r=n(l),f=require("./line"),i=n(f),o=require("./point");
},{"d3-path":75,"./constant":361,"./curve/linear":335,"./line":296,"./point":420}],290:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function t(t){var e,r,a,c,s,h=t.length,p=0,g=new Array(h),y=new Array(h),A=+o.apply(this,arguments),v=Math.min(f.tau,Math.max(-f.tau,i.apply(this,arguments)-A)),M=Math.min(Math.abs(v)/h,d.apply(this,arguments)),m=M*(v<0?-1:1);for(e=0;e<h;++e)(s=y[g[e]=e]=+n(t[e],e,t))>0&&(p+=s);for(null!=u?g.sort(function(t,n){return u(y[t],y[n])}):null!=l&&g.sort(function(n,e){return l(t[n],t[e])}),e=0,a=p?(v-h*m)/p:0;e<h;++e,A=c)r=g[e],c=A+((s=y[r])>0?s*a:0)+m,y[r]={data:t[r],index:e,value:s,startAngle:A,endAngle:c,padAngle:M};return y}var n=a.default,u=r.default,l=null,o=(0,e.default)(0),i=(0,e.default)(f.tau),d=(0,e.default)(0);return t.value=function(u){return arguments.length?(n="function"==typeof u?u:(0,e.default)(+u),t):n},t.sortValues=function(n){return arguments.length?(u=n,l=null,t):u},t.sort=function(n){return arguments.length?(l=n,u=null,t):l},t.startAngle=function(n){return arguments.length?(o="function"==typeof n?n:(0,e.default)(+n),t):o},t.endAngle=function(n){return arguments.length?(i="function"==typeof n?n:(0,e.default)(+n),t):i},t.padAngle=function(n){return arguments.length?(d="function"==typeof n?n:(0,e.default)(+n),t):d},t};var n=require("./constant"),e=t(n),u=require("./descending"),r=t(u),l=require("./identity"),a=t(l),f=require("./math");
},{"./constant":361,"./descending":101,"./identity":363,"./math":423}],431:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){this._curve=e}function n(e){function n(n){return new t(e(n))}return n._curve=e,n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.curveRadialLinear=void 0,exports.default=n;var r=require("./linear"),i=e(r),u=exports.curveRadialLinear=n(i.default);t.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};
},{"./linear":335}],294:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e){var r=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?r((0,t.default)(e)):r()._curve},e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineRadial=r,exports.default=function(){return r((0,a.default)().curve(u.curveRadialLinear))};var u=require("./curve/radial"),t=e(u),n=require("./line"),a=e(n);
},{"./curve/radial":431,"./line":296}],295:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=(0,r.default)().curve(n.curveRadialLinear),i=e.curve,u=e.lineX0,a=e.lineX1,d=e.lineY0,c=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return(0,t.lineRadial)(u())},delete e.lineX0,e.lineEndAngle=function(){return(0,t.lineRadial)(a())},delete e.lineX1,e.lineInnerRadius=function(){return(0,t.lineRadial)(d())},delete e.lineY0,e.lineOuterRadius=function(){return(0,t.lineRadial)(c())},delete e.lineY1,e.curve=function(e){return arguments.length?i((0,l.default)(e)):i()._curve},e};var n=require("./curve/radial"),l=e(n),i=require("./area"),r=e(i),t=require("./lineRadial");
},{"./curve/radial":431,"./area":291,"./lineRadial":294}],299:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]};
},{}],318:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){return e.source}function n(e){return e.target}function r(e){function r(){var t,n=p.slice.call(arguments),r=u.apply(this,n),f=i.apply(this,n);if(a||(a=t=(0,c.path)()),e(a,+l.apply(this,(n[0]=r,n)),+o.apply(this,n),+l.apply(this,(n[0]=f,n)),+o.apply(this,n)),t)return a=null,t+""||null}var u=t,i=n,l=y.x,o=y.y,a=null;return r.source=function(e){return arguments.length?(u=e,r):u},r.target=function(e){return arguments.length?(i=e,r):i},r.x=function(e){return arguments.length?(l="function"==typeof e?e:(0,d.default)(+e),r):l},r.y=function(e){return arguments.length?(o="function"==typeof e?e:(0,d.default)(+e),r):o},r.context=function(e){return arguments.length?(a=null==e?null:e,r):a},r}function u(e,t,n,r,u){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,u,r,u)}function i(e,t,n,r,u){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+u)/2,r,n,r,u)}function l(e,t,n,r,u){var i=(0,v.default)(t,n),l=(0,v.default)(t,n=(n+u)/2),o=(0,v.default)(r,n),a=(0,v.default)(r,u);e.moveTo(i[0],i[1]),e.bezierCurveTo(l[0],l[1],o[0],o[1],a[0],a[1])}function o(){return r(u)}function a(){return r(i)}function f(){var e=r(l);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linkHorizontal=o,exports.linkVertical=a,exports.linkRadial=f;var c=require("d3-path"),p=require("../array"),s=require("../constant"),d=e(s),y=require("../point"),h=require("../pointRadial"),v=e(h);
},{"d3-path":75,"../array":360,"../constant":361,"../point":420,"../pointRadial":299}],320:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../math");exports.default={draw:function(r,t){var a=Math.sqrt(t/e.pi);r.moveTo(a,0),r.arc(0,0,a,0,e.tau)}};
},{"../math":423}],317:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={draw:function(e,o){var l=Math.sqrt(o/5)/2;e.moveTo(-3*l,-l),e.lineTo(-l,-l),e.lineTo(-l,-3*l),e.lineTo(l,-3*l),e.lineTo(l,-l),e.lineTo(3*l,-l),e.lineTo(3*l,l),e.lineTo(l,l),e.lineTo(l,3*l),e.lineTo(-l,3*l),e.lineTo(-l,l),e.lineTo(-3*l,l),e.closePath()}};
},{}],319:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Math.sqrt(1/3),t=2*e;exports.default={draw:function(o,r){var a=Math.sqrt(r/t),s=a*e;o.moveTo(0,-a),o.lineTo(s,0),o.lineTo(0,a),o.lineTo(-s,0),o.closePath()}};
},{}],324:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../math"),a=.8908130915292852,e=Math.sin(t.pi/10)/Math.sin(7*t.pi/10),o=Math.sin(t.tau/10)*e,r=-Math.cos(t.tau/10)*e;exports.default={draw:function(e,i){var s=Math.sqrt(i*a),n=o*s,h=r*s;e.moveTo(0,-s),e.lineTo(n,h);for(var u=1;u<5;++u){var M=t.tau*u/5,l=Math.cos(M),c=Math.sin(M);e.lineTo(c*s,-l*s),e.lineTo(l*n-c*h,c*n+l*h)}e.closePath()}};
},{"../math":423}],321:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={draw:function(e,t){var r=Math.sqrt(t),s=-r/2;e.rect(s,s,r,r)}};
},{}],323:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Math.sqrt(3);exports.default={draw:function(t,o){var r=-Math.sqrt(o/(3*e));t.moveTo(0,2*r),t.lineTo(-e*r,-r),t.lineTo(e*r,-r),t.closePath()}};
},{}],322:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=-.5,o=Math.sqrt(3)/2,t=1/Math.sqrt(12),l=3*(t/2+1);exports.default={draw:function(i,n){var r=Math.sqrt(n/l),a=r/2,s=r*t,T=a,u=r*t+r,c=-T,d=u;i.moveTo(a,s),i.lineTo(T,u),i.lineTo(c,d),i.lineTo(e*a-o*s,o*a+e*s),i.lineTo(e*T-o*u,o*T+e*u),i.lineTo(e*c-o*d,o*c+e*d),i.lineTo(e*a+o*s,e*s-o*a),i.lineTo(e*T+o*u,e*u-o*T),i.lineTo(e*c+o*d,e*d-o*c),i.closePath()}};
},{}],297:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.symbols=void 0,exports.default=function(){function e(){var e;if(n||(n=e=(0,t.path)()),u.apply(this,arguments).draw(n,+l.apply(this,arguments)),e)return n=null,e+""||null}var u=(0,q.default)(r.default),l=(0,q.default)(64),n=null;return e.type=function(t){return arguments.length?(u="function"==typeof t?t:(0,q.default)(t),e):u},e.size=function(t){return arguments.length?(l="function"==typeof t?t:(0,q.default)(+t),e):l},e.context=function(t){return arguments.length?(n=null==t?null:t,e):n},e};var t=require("d3-path"),u=require("./symbol/circle"),r=e(u),l=require("./symbol/cross"),n=e(l),o=require("./symbol/diamond"),a=e(o),i=require("./symbol/star"),s=e(i),f=require("./symbol/square"),d=e(f),y=require("./symbol/triangle"),c=e(y),p=require("./symbol/wye"),b=e(p),m=require("./constant"),q=e(m),h=exports.symbols=[r.default,n.default,a.default,d.default,s.default,c.default,b.default];
},{"d3-path":75,"./symbol/circle":320,"./symbol/cross":317,"./symbol/diamond":319,"./symbol/star":324,"./symbol/square":321,"./symbol/triangle":323,"./symbol/wye":322,"./constant":361}],459:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){};
},{}],327:[function(require,module,exports) {
"use strict";function t(t,i,s){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+s)/6)}function i(t){this._context=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=t,exports.Basis=i,exports.default=function(t){return new i(t)},i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t(this,i,s)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s}};
},{}],326:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function i(t){this._context=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return new i(t)};var s=require("../noop"),h=t(s),_=require("./basis");i.prototype={areaStart:h.default,areaEnd:h.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:(0,_.point)(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};
},{"../noop":459,"./basis":327}],325:[function(require,module,exports) {
"use strict";function t(t){this._context=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i){return new t(i)};var i=require("./basis");t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 3:this._point=4;default:(0,i.point)(this,t,s)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};
},{"./basis":327}],331:[function(require,module,exports) {
"use strict";function t(t,s){this._basis=new i.Basis(t),this._beta=s}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./basis");t.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,s=t.length-1;if(s>0)for(var e,n=t[0],a=i[0],h=t[s]-n,r=i[s]-a,_=-1;++_<=s;)e=_/s,this._basis.point(this._beta*t[_]+(1-this._beta)*(n+e*h),this._beta*i[_]+(1-this._beta)*(a+e*r));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}},exports.default=function s(e){function n(s){return 1===e?new i.Basis(s):new t(s,e)}return n.beta=function(t){return s(+t)},n}(.85);
},{"./basis":327}],329:[function(require,module,exports) {
"use strict";function t(t,i,_){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-_),t._x2,t._y2)}function i(t,i){this._context=t,this._k=(1-i)/6}Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=t,exports.Cardinal=i,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:t(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,_){switch(i=+i,_=+_,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,_):this._context.moveTo(i,_);break;case 1:this._point=2,this._x1=i,this._y1=_;break;case 2:this._point=3;default:t(this,i,_)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=_}},exports.default=function t(_){function s(t){return new i(t,_)}return s.tension=function(i){return t(+i)},s}(0);
},{}],330:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function i(t,i){this._context=t,this._k=(1-i)/6}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardinalClosed=i;var s=require("../noop"),h=t(s),e=require("./cardinal");i.prototype={areaStart:h.default,areaEnd:h.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:(0,e.point)(this,t,i)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}},exports.default=function t(s){function h(t){return new i(t,s)}return h.tension=function(i){return t(+i)},h}(0);
},{"../noop":459,"./cardinal":329}],328:[function(require,module,exports) {
"use strict";function t(t,i){this._context=t,this._k=(1-i)/6}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardinalOpen=t;var i=require("./cardinal");t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,i.point)(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},exports.default=function i(n){function s(i){return new t(i,n)}return s.tension=function(t){return i(+t)},s}(0);
},{"./cardinal":329}],337:[function(require,module,exports) {
"use strict";function _(_,t,s){var a=_._x1,h=_._y1,l=_._x2,n=_._y2;if(_._l01_a>i.epsilon){var e=2*_._l01_2a+3*_._l01_a*_._l12_a+_._l12_2a,o=3*_._l01_a*(_._l01_a+_._l12_a);a=(a*e-_._x0*_._l12_2a+_._x2*_._l01_2a)/o,h=(h*e-_._y0*_._l12_2a+_._y2*_._l01_2a)/o}if(_._l23_a>i.epsilon){var r=2*_._l23_2a+3*_._l23_a*_._l12_a+_._l12_2a,c=3*_._l23_a*(_._l23_a+_._l12_a);l=(l*r+_._x1*_._l23_2a-t*_._l12_2a)/c,n=(n*r+_._y1*_._l23_2a-s*_._l12_2a)/c}_._context.bezierCurveTo(a,h,l,n,_._x2,_._y2)}function t(_,t){this._context=_,this._alpha=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=_;var i=require("../math"),s=require("./cardinal");t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var s=this._x2-t,a=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:_(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}},exports.default=function _(i){function a(_){return i?new t(_,i):new s.Cardinal(_,0)}return a.alpha=function(t){return _(+t)},a}(.5);
},{"../math":423,"./cardinal":329}],332:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function i(t,i){this._context=t,this._alpha=i}Object.defineProperty(exports,"__esModule",{value:!0});var s=require("./cardinalClosed"),_=require("../noop"),h=t(_),e=require("./catmullRom");i.prototype={areaStart:h.default,areaEnd:h.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){if(t=+t,i=+i,this._point){var s=this._x2-t,_=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+_*_,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:(0,e.point)(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}},exports.default=function t(_){function h(t){return _?new i(t,_):new s.CardinalClosed(t,0)}return h.alpha=function(i){return t(+i)},h}(.5);
},{"./cardinalClosed":330,"../noop":459,"./catmullRom":337}],333:[function(require,module,exports) {
"use strict";function t(t,i){this._context=t,this._alpha=i}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./cardinalOpen"),_=require("./catmullRom");t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var s=this._x2-t,h=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+h*h,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,_.point)(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}},exports.default=function _(s){function h(_){return s?new t(_,s):new i.CardinalOpen(_,0)}return h.alpha=function(t){return _(+t)},h}(.5);
},{"./cardinalOpen":328,"./catmullRom":337}],336:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){this._context=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return new e(t)};var n=require("../noop"),o=t(n);e.prototype={areaStart:o.default,areaEnd:o.default,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};
},{"../noop":459}],340:[function(require,module,exports) {
"use strict";function t(t){return t<0?-1:1}function i(i,n,e){var o=i._x1-i._x0,s=n-i._x1,h=(i._y1-i._y0)/(o||s<0&&-0),_=(e-i._y1)/(s||o<0&&-0),c=(h*s+_*o)/(o+s);return(t(h)+t(_))*Math.min(Math.abs(h),Math.abs(_),.5*Math.abs(c))||0}function n(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function e(t,i,n){var e=t._x0,o=t._y0,s=t._x1,h=t._y1,_=(s-e)/3;t._context.bezierCurveTo(e+_,o+_*i,s-_,h-_*n,s,h)}function o(t){this._context=t}function s(t){this._context=new h(t)}function h(t){this._context=t}function _(t){return new o(t)}function c(t){return new s(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.monotoneX=_,exports.monotoneY=c,o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:e(this,this._t0,n(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,o){var s=NaN;if(t=+t,o=+o,t!==this._x1||o!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,o):this._context.moveTo(t,o);break;case 1:this._point=2;break;case 2:this._point=3,e(this,n(this,s=i(this,t,o)),s);break;default:e(this,this._t0,s=i(this,t,o))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=o,this._t0=s}}},(s.prototype=Object.create(o.prototype)).point=function(t,i){o.prototype.point.call(this,i,t)},h.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,e,o,s){this._context.bezierCurveTo(i,t,e,n,s,o)}};
},{}],334:[function(require,module,exports) {
"use strict";function t(t){this._context=t}function e(t){var e,i,n=t.length-1,o=new Array(n),r=new Array(n),s=new Array(n);for(o[0]=0,r[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,r[e]=4,s[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,r[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=o[e]/r[e-1],r[e]-=i,s[e]-=i*s[e-1];for(o[n-1]=s[n-1]/r[n-1],e=n-2;e>=0;--e)o[e]=(s[e]-o[e+1])/r[e];for(r[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)r[e]=2*t[e+1]-o[e+1];return[o,r]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return new t(e)},t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),2===n)this._context.lineTo(t[1],i[1]);else for(var o=e(t),r=e(i),s=0,h=1;h<n;++s,++h)this._context.bezierCurveTo(o[0][s],r[0][s],o[1][s],r[1][s],t[h],i[h]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};
},{}],339:[function(require,module,exports) {
"use strict";function t(t,i){this._context=t,this._t=i}function i(i){return new t(i,0)}function e(i){return new t(i,1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i){return new t(i,.5)},exports.stepBefore=i,exports.stepAfter=e,t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,i)}}this._x=t,this._y=i}};
},{}],342:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((f=e.length)>1)for(var r,o,f,s=1,i=e[t[0]],l=i.length;s<f;++s)for(o=i,i=e[t[s]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]};
},{}],351:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var r=e.length,t=new Array(r);--r>=0;)t[r]=r;return t};
},{}],298:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){return e[t]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function e(e){var t,n,u=r.apply(this,arguments),l=e.length,a=u.length,c=new Array(a);for(t=0;t<a;++t){for(var d,s=u[t],y=c[t]=new Array(l),p=0;p<l;++p)y[p]=d=[0,+i(e[p],s,p,e)],d.data=e[p];y.key=s}for(t=0,n=f(c);t<a;++t)c[n[t]].index=t;return o(c,n),c}var r=(0,u.default)([]),f=a.default,o=l.default,i=t;return e.keys=function(t){return arguments.length?(r="function"==typeof t?t:(0,u.default)(n.slice.call(t)),e):r},e.value=function(t){return arguments.length?(i="function"==typeof t?t:(0,u.default)(+t),e):i},e.order=function(t){return arguments.length?(f=null==t?a.default:"function"==typeof t?t:(0,u.default)(n.slice.call(t)),e):f},e.offset=function(t){return arguments.length?(o=null==t?l.default:t,e):o},e};var n=require("./array"),r=require("./constant"),u=e(r),f=require("./offset/none"),l=e(f),o=require("./order/none"),a=e(o);
},{"./array":360,"./constant":361,"./offset/none":342,"./order/none":351}],338:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){if((o=e.length)>0){for(var f,o,u,n=0,l=e[0].length;n<l;++n){for(u=f=0;f<o;++f)u+=e[f][n][1]||0;if(u)for(f=0;f<o;++f)e[f][n][1]/=u}(0,t.default)(e,r)}};var r=require("./none"),t=e(r);
},{"./none":342}],341:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((s=e.length)>1)for(var r,o,f,l,n,s,u=0,i=e[t[0]].length;u<i;++u)for(l=n=0,r=0;r<s;++r)(f=(o=e[t[r]][u])[1]-o[0])>=0?(o[0]=l,o[1]=l+=f):f<0?(o[1]=n,o[0]=n+=f):o[0]=l};
},{}],344:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){if((u=e.length)>0){for(var u,n=0,o=e[r[0]],f=o.length;n<f;++n){for(var l=0,a=0;l<u;++l)a+=e[l][n][1]||0;o[n][1]+=o[n][0]=-a/2}(0,t.default)(e,r)}};var r=require("./none"),t=e(r);
},{"./none":342}],345:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){if((f=e.length)>0&&(u=(o=e[r[0]]).length)>0){for(var o,u,f,n=0,a=1;a<u;++a){for(var l=0,d=0,i=0;l<f;++l){for(var s=e[r[l]],v=s[a][1]||0,c=(v-(s[a-1][1]||0))/2,_=0;_<l;++_){var p=e[r[_]];c+=(p[a][1]||0)-(p[a-1][1]||0)}d+=v,i+=c*v}o[a-1][1]+=o[a-1][0]=n,d&&(n-=i/d)}o[a-1][1]+=o[a-1][0]=n,(0,t.default)(e,r)}};var r=require("./none"),t=e(r);
},{"./none":342}],343:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var r,t=0,u=-1,n=e.length;++u<n;)(r=+e[u][1])&&(t+=r);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.map(r);return(0,u.default)(e).sort(function(e,r){return t[e]-t[r]})},exports.sum=r;var t=require("./none"),u=e(t);
},{"./none":351}],347:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return(0,t.default)(e).reverse()};var r=require("./ascending"),t=e(r);
},{"./ascending":343}],346:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r,n,o=e.length,s=e.map(u.sum),a=(0,t.default)(e).sort(function(e,r){return s[r]-s[e]}),c=0,f=0,i=[],d=[];for(r=0;r<o;++r)n=a[r],c<f?(c+=s[n],i.push(n)):(f+=s[n],d.push(n));return d.reverse().concat(i)};var r=require("./none"),t=e(r),u=require("./ascending");
},{"./none":351,"./ascending":343}],350:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return(0,t.default)(e).reverse()};var r=require("./none"),t=e(r);
},{"./none":351}],88:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/arc");Object.defineProperty(exports,"arc",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/area");Object.defineProperty(exports,"area",{enumerable:!0,get:function(){return e(t).default}});var n=require("./src/line");Object.defineProperty(exports,"line",{enumerable:!0,get:function(){return e(n).default}});var u=require("./src/pie");Object.defineProperty(exports,"pie",{enumerable:!0,get:function(){return e(u).default}});var o=require("./src/areaRadial");Object.defineProperty(exports,"areaRadial",{enumerable:!0,get:function(){return e(o).default}}),Object.defineProperty(exports,"radialArea",{enumerable:!0,get:function(){return e(o).default}});var a=require("./src/lineRadial");Object.defineProperty(exports,"lineRadial",{enumerable:!0,get:function(){return e(a).default}}),Object.defineProperty(exports,"radialLine",{enumerable:!0,get:function(){return e(a).default}});var i=require("./src/pointRadial");Object.defineProperty(exports,"pointRadial",{enumerable:!0,get:function(){return e(i).default}});var c=require("./src/link/index");Object.defineProperty(exports,"linkHorizontal",{enumerable:!0,get:function(){return c.linkHorizontal}}),Object.defineProperty(exports,"linkVertical",{enumerable:!0,get:function(){return c.linkVertical}}),Object.defineProperty(exports,"linkRadial",{enumerable:!0,get:function(){return c.linkRadial}});var l=require("./src/symbol");Object.defineProperty(exports,"symbol",{enumerable:!0,get:function(){return e(l).default}}),Object.defineProperty(exports,"symbols",{enumerable:!0,get:function(){return l.symbols}});var s=require("./src/symbol/circle");Object.defineProperty(exports,"symbolCircle",{enumerable:!0,get:function(){return e(s).default}});var f=require("./src/symbol/cross");Object.defineProperty(exports,"symbolCross",{enumerable:!0,get:function(){return e(f).default}});var d=require("./src/symbol/diamond");Object.defineProperty(exports,"symbolDiamond",{enumerable:!0,get:function(){return e(d).default}});var b=require("./src/symbol/square");Object.defineProperty(exports,"symbolSquare",{enumerable:!0,get:function(){return e(b).default}});var p=require("./src/symbol/star");Object.defineProperty(exports,"symbolStar",{enumerable:!0,get:function(){return e(p).default}});var m=require("./src/symbol/triangle");Object.defineProperty(exports,"symbolTriangle",{enumerable:!0,get:function(){return e(m).default}});var v=require("./src/symbol/wye");Object.defineProperty(exports,"symbolWye",{enumerable:!0,get:function(){return e(v).default}});var y=require("./src/curve/basisClosed");Object.defineProperty(exports,"curveBasisClosed",{enumerable:!0,get:function(){return e(y).default}});var O=require("./src/curve/basisOpen");Object.defineProperty(exports,"curveBasisOpen",{enumerable:!0,get:function(){return e(O).default}});var g=require("./src/curve/basis");Object.defineProperty(exports,"curveBasis",{enumerable:!0,get:function(){return e(g).default}});var x=require("./src/curve/bundle");Object.defineProperty(exports,"curveBundle",{enumerable:!0,get:function(){return e(x).default}});var j=require("./src/curve/cardinalClosed");Object.defineProperty(exports,"curveCardinalClosed",{enumerable:!0,get:function(){return e(j).default}});var P=require("./src/curve/cardinalOpen");Object.defineProperty(exports,"curveCardinalOpen",{enumerable:!0,get:function(){return e(P).default}});var q=require("./src/curve/cardinal");Object.defineProperty(exports,"curveCardinal",{enumerable:!0,get:function(){return e(q).default}});var k=require("./src/curve/catmullRomClosed");Object.defineProperty(exports,"curveCatmullRomClosed",{enumerable:!0,get:function(){return e(k).default}});var C=require("./src/curve/catmullRomOpen");Object.defineProperty(exports,"curveCatmullRomOpen",{enumerable:!0,get:function(){return e(C).default}});var R=require("./src/curve/catmullRom");Object.defineProperty(exports,"curveCatmullRom",{enumerable:!0,get:function(){return e(R).default}});var B=require("./src/curve/linearClosed");Object.defineProperty(exports,"curveLinearClosed",{enumerable:!0,get:function(){return e(B).default}});var S=require("./src/curve/linear");Object.defineProperty(exports,"curveLinear",{enumerable:!0,get:function(){return e(S).default}});var A=require("./src/curve/monotone");Object.defineProperty(exports,"curveMonotoneX",{enumerable:!0,get:function(){return A.monotoneX}}),Object.defineProperty(exports,"curveMonotoneY",{enumerable:!0,get:function(){return A.monotoneY}});var M=require("./src/curve/natural");Object.defineProperty(exports,"curveNatural",{enumerable:!0,get:function(){return e(M).default}});var _=require("./src/curve/step");Object.defineProperty(exports,"curveStep",{enumerable:!0,get:function(){return e(_).default}}),Object.defineProperty(exports,"curveStepAfter",{enumerable:!0,get:function(){return _.stepAfter}}),Object.defineProperty(exports,"curveStepBefore",{enumerable:!0,get:function(){return _.stepBefore}});var D=require("./src/stack");Object.defineProperty(exports,"stack",{enumerable:!0,get:function(){return e(D).default}});var L=require("./src/offset/expand");Object.defineProperty(exports,"stackOffsetExpand",{enumerable:!0,get:function(){return e(L).default}});var N=require("./src/offset/diverging");Object.defineProperty(exports,"stackOffsetDiverging",{enumerable:!0,get:function(){return e(N).default}});var h=require("./src/offset/none");Object.defineProperty(exports,"stackOffsetNone",{enumerable:!0,get:function(){return e(h).default}});var w=require("./src/offset/silhouette");Object.defineProperty(exports,"stackOffsetSilhouette",{enumerable:!0,get:function(){return e(w).default}});var z=require("./src/offset/wiggle");Object.defineProperty(exports,"stackOffsetWiggle",{enumerable:!0,get:function(){return e(z).default}});var H=require("./src/order/ascending");Object.defineProperty(exports,"stackOrderAscending",{enumerable:!0,get:function(){return e(H).default}});var V=require("./src/order/descending");Object.defineProperty(exports,"stackOrderDescending",{enumerable:!0,get:function(){return e(V).default}});var W=require("./src/order/insideOut");Object.defineProperty(exports,"stackOrderInsideOut",{enumerable:!0,get:function(){return e(W).default}});var X=require("./src/order/none");Object.defineProperty(exports,"stackOrderNone",{enumerable:!0,get:function(){return e(X).default}});var Y=require("./src/order/reverse");Object.defineProperty(exports,"stackOrderReverse",{enumerable:!0,get:function(){return e(Y).default}});
},{"./src/arc":293,"./src/area":291,"./src/line":296,"./src/pie":290,"./src/areaRadial":295,"./src/lineRadial":294,"./src/pointRadial":299,"./src/link/index":318,"./src/symbol":297,"./src/symbol/circle":320,"./src/symbol/cross":317,"./src/symbol/diamond":319,"./src/symbol/square":321,"./src/symbol/star":324,"./src/symbol/triangle":323,"./src/symbol/wye":322,"./src/curve/basisClosed":326,"./src/curve/basisOpen":325,"./src/curve/basis":327,"./src/curve/bundle":331,"./src/curve/cardinalClosed":330,"./src/curve/cardinalOpen":328,"./src/curve/cardinal":329,"./src/curve/catmullRomClosed":332,"./src/curve/catmullRomOpen":333,"./src/curve/catmullRom":337,"./src/curve/linearClosed":336,"./src/curve/linear":335,"./src/curve/monotone":340,"./src/curve/natural":334,"./src/curve/step":339,"./src/stack":298,"./src/offset/expand":338,"./src/offset/diverging":341,"./src/offset/none":342,"./src/offset/silhouette":344,"./src/offset/wiggle":345,"./src/order/ascending":343,"./src/order/descending":347,"./src/order/insideOut":346,"./src/order/none":351,"./src/order/reverse":350}],518:[function(require,module,exports) {
"use strict";function C(){this._=null}function t(C){C.U=C.C=C.L=C.R=C.P=C.N=null}function i(C,t){var i=t,L=t.R,R=i.U;R?R.L===i?R.L=L:R.R=L:C._=L,L.U=R,i.U=L,i.R=L.L,i.R&&(i.R.U=i),L.L=i}function L(C,t){var i=t,L=t.L,R=i.U;R?R.L===i?R.L=L:R.R=L:C._=L,L.U=R,i.U=L,i.L=L.R,i.L&&(i.L.U=i),L.R=i}function R(C){for(;C.L;)C=C.L;return C}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedBlackNode=t,C.prototype={constructor:C,insert:function(C,t){var e,s,n;if(C){if(t.P=C,t.N=C.N,C.N&&(C.N.P=t),C.N=t,C.R){for(C=C.R;C.L;)C=C.L;C.L=t}else C.R=t;e=C}else this._?(C=R(this._),t.P=null,t.N=C,C.P=C.L=t,e=C):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,C=t;e&&e.C;)e===(s=e.U).L?(n=s.R)&&n.C?(e.C=n.C=!1,s.C=!0,C=s):(C===e.R&&(i(this,e),e=(C=e).U),e.C=!1,s.C=!0,L(this,s)):(n=s.L)&&n.C?(e.C=n.C=!1,s.C=!0,C=s):(C===e.L&&(L(this,e),e=(C=e).U),e.C=!1,s.C=!0,i(this,s)),e=C.U;this._.C=!1},remove:function(C){C.N&&(C.N.P=C.P),C.P&&(C.P.N=C.N),C.N=C.P=null;var t,e,s,n=C.U,l=C.L,r=C.R;if(e=l?r?R(r):l:r,n?n.L===C?n.L=e:n.R=e:this._=e,l&&r?(s=e.C,e.C=C.C,e.L=l,l.U=e,e!==r?(n=e.U,e.U=C.U,C=e.R,n.L=C,e.R=r,r.U=e):(e.U=n,n=e,C=e.R)):(s=C.C,C=e),C&&(C.U=n),!s)if(C&&C.C)C.C=!1;else{do{if(C===this._)break;if(C===n.L){if((t=n.R).C&&(t.C=!1,n.C=!0,i(this,n),t=n.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,L(this,t),t=n.R),t.C=n.C,n.C=t.R.C=!1,i(this,n),C=this._;break}}else if((t=n.L).C&&(t.C=!1,n.C=!0,L(this,n),t=n.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,i(this,t),t=n.L),t.C=n.C,n.C=t.L.C=!1,L(this,n),C=this._;break}t.C=!0,C=n,n=n.U}while(!C.C);C&&(C.C=!1)}}},exports.default=C;
},{}],517:[function(require,module,exports) {
"use strict";function e(e,r,f,t){var n=[null,null],l=s.edges.push(n)-1;return n.left=e,n.right=r,f&&i(n,e,r,f),t&&i(n,r,e,t),s.cells[e.index].halfedges.push(l),s.cells[r.index].halfedges.push(l),n}function r(e,r,i){var f=[r,i];return f.left=e,f}function i(e,r,i,f){e[0]||e[1]?e.left===i?e[1]=f:e[0]=f:(e[0]=f,e.left=r,e.right=i)}function f(e,r,i,f,t){var n,s=e[0],l=e[1],u=s[0],a=s[1],d=0,o=1,g=l[0]-u,c=l[1]-a;if(n=r-u,g||!(n>0)){if(n/=g,g<0){if(n<d)return;n<o&&(o=n)}else if(g>0){if(n>o)return;n>d&&(d=n)}if(n=f-u,g||!(n<0)){if(n/=g,g<0){if(n>o)return;n>d&&(d=n)}else if(g>0){if(n<d)return;n<o&&(o=n)}if(n=i-a,c||!(n>0)){if(n/=c,c<0){if(n<d)return;n<o&&(o=n)}else if(c>0){if(n>o)return;n>d&&(d=n)}if(n=t-a,c||!(n<0)){if(n/=c,c<0){if(n>o)return;n>d&&(d=n)}else if(c>0){if(n<d)return;n<o&&(o=n)}return!(d>0||o<1)||(d>0&&(e[0]=[u+d*g,a+d*c]),o<1&&(e[1]=[u+o*g,a+o*c]),!0)}}}}}function t(e,r,i,f,t){var n=e[1];if(n)return!0;var s,l,u=e[0],a=e.left,d=e.right,o=a[0],g=a[1],c=d[0],p=d[1],h=(o+c)/2,v=(g+p)/2;if(p===g){if(h<r||h>=f)return;if(o>c){if(u){if(u[1]>=t)return}else u=[h,i];n=[h,t]}else{if(u){if(u[1]<i)return}else u=[h,t];n=[h,i]}}else if(s=(o-c)/(p-g),l=v-s*h,s<-1||s>1)if(o>c){if(u){if(u[1]>=t)return}else u=[(i-l)/s,i];n=[(t-l)/s,t]}else{if(u){if(u[1]<i)return}else u=[(t-l)/s,t];n=[(i-l)/s,i]}else if(g<p){if(u){if(u[0]>=f)return}else u=[r,s*r+l];n=[f,s*f+l]}else{if(u){if(u[0]<r)return}else u=[f,s*f+l];n=[r,s*r+l]}return e[0]=u,e[1]=n,!0}function n(e,r,i,n){for(var l,u=s.edges.length;u--;)t(l=s.edges[u],e,r,i,n)&&f(l,e,r,i,n)&&(Math.abs(l[0][0]-l[1][0])>s.epsilon||Math.abs(l[0][1]-l[1][1])>s.epsilon)||delete s.edges[u]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEdge=e,exports.createBorderEdge=r,exports.setEdgeEnd=i,exports.clipEdges=n;var s=require("./Diagram");
},{"./Diagram":414}],515:[function(require,module,exports) {
"use strict";function e(e){return o.cells[e.index]={site:e,halfedges:[]}}function s(e,s){var l=e.site,r=s.left,t=s.right;return l===t&&(t=r,r=l),t?Math.atan2(t[1]-r[1],t[0]-r[0]):(l===r?(r=s[1],t=s[0]):(r=s[0],t=s[1]),Math.atan2(r[0]-t[0],t[1]-r[1]))}function l(e,s){return s[+(s.left!==e.site)]}function r(e,s){return s[+(s.left===e.site)]}function t(){for(var e,l,r,t,a=0,n=o.cells.length;a<n;++a)if((e=o.cells[a])&&(t=(l=e.halfedges).length)){var i=new Array(t),d=new Array(t);for(r=0;r<t;++r)i[r]=r,d[r]=s(e,o.edges[l[r]]);for(i.sort(function(e,s){return d[s]-d[e]}),r=0;r<t;++r)d[r]=l[i[r]];for(r=0;r<t;++r)l[r]=d[r]}}function a(e,s,t,a){var i,d,f,g,h,p,c,u,M,b,v,x,E=o.cells.length,B=!0;for(i=0;i<E;++i)if(d=o.cells[i]){for(f=d.site,g=(h=d.halfedges).length;g--;)o.edges[h[g]]||h.splice(g,1);for(g=0,p=h.length;g<p;)v=(b=r(d,o.edges[h[g]]))[0],x=b[1],u=(c=l(d,o.edges[h[++g%p]]))[0],M=c[1],(Math.abs(v-u)>o.epsilon||Math.abs(x-M)>o.epsilon)&&(h.splice(g,0,o.edges.push((0,n.createBorderEdge)(f,b,Math.abs(v-e)<o.epsilon&&a-x>o.epsilon?[e,Math.abs(u-e)<o.epsilon?M:a]:Math.abs(x-a)<o.epsilon&&t-v>o.epsilon?[Math.abs(M-a)<o.epsilon?u:t,a]:Math.abs(v-t)<o.epsilon&&x-s>o.epsilon?[t,Math.abs(u-t)<o.epsilon?M:s]:Math.abs(x-s)<o.epsilon&&v-e>o.epsilon?[Math.abs(M-s)<o.epsilon?u:e,s]:null))-1),++p);p&&(B=!1)}if(B){var y,C,H,q=1/0;for(i=0,B=null;i<E;++i)(d=o.cells[i])&&(H=(y=(f=d.site)[0]-e)*y+(C=f[1]-s)*C)<q&&(q=H,B=d);if(B){var w=[e,s],A=[e,a],_=[t,a],j=[t,s];B.halfedges.push(o.edges.push((0,n.createBorderEdge)(f=B.site,w,A))-1,o.edges.push((0,n.createBorderEdge)(f,A,_))-1,o.edges.push((0,n.createBorderEdge)(f,_,j))-1,o.edges.push((0,n.createBorderEdge)(f,j,w))-1)}}for(i=0;i<E;++i)(d=o.cells[i])&&(d.halfedges.length||delete o.cells[i])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCell=e,exports.cellHalfedgeStart=l,exports.cellHalfedgeEnd=r,exports.sortCellHalfedges=t,exports.clipCells=a;var n=require("./Edge"),o=require("./Diagram");
},{"./Edge":517,"./Diagram":414}],514:[function(require,module,exports) {
"use strict";function e(){(0,t.RedBlackNode)(this),this.x=this.y=this.arc=this.site=this.cy=null}function r(r){var i=r.P,t=r.N;if(i&&t){var a=i.site,o=r.site,f=t.site;if(a!==f){var n=o[0],p=o[1],u=a[0]-n,v=a[1]-p,x=f[0]-n,d=f[1]-p,h=2*(u*d-v*x);if(!(h>=-s.epsilon2)){var y=u*u+v*v,C=x*x+d*d,k=(d*y-v*C)/h,R=(u*C-x*y)/h,N=c.pop()||new e;N.arc=r,N.site=o,N.x=k+n,N.y=(N.cy=R+p)+Math.sqrt(k*k+R*R),r.circle=N;for(var P=null,b=s.circles._;b;)if(N.y<b.y||N.y===b.y&&N.x<=b.x){if(!b.L){P=b.P;break}b=b.L}else{if(!b.R){P=b;break}b=b.R}s.circles.insert(P,N),P||(exports.firstCircle=l=N)}}}}function i(e){var r=e.circle;r&&(r.P||(exports.firstCircle=l=r.N),s.circles.remove(r),c.push(r),(0,t.RedBlackNode)(r),e.circle=null)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.firstCircle=void 0,exports.attachCircle=r,exports.detachCircle=i;var t=require("./RedBlackTree"),s=require("./Diagram"),c=[],l=exports.firstCircle=void 0;
},{"./RedBlackTree":518,"./Diagram":414}],516:[function(require,module,exports) {
"use strict";function e(){(0,l.RedBlackNode)(this),this.edge=this.site=this.circle=null}function r(r){var i=o.pop()||new e;return i.site=r,i}function i(e){(0,d.detachCircle)(e),u.beaches.remove(e),o.push(e),(0,l.RedBlackNode)(e)}function t(e){var r=e.circle,t=r.x,c=r.cy,a=[t,c],s=e.P,l=e.N,n=[e];i(e);for(var o=s;o.circle&&Math.abs(t-o.circle.x)<u.epsilon&&Math.abs(c-o.circle.cy)<u.epsilon;)s=o.P,n.unshift(o),i(o),o=s;n.unshift(o),(0,d.detachCircle)(o);for(var f=l;f.circle&&Math.abs(t-f.circle.x)<u.epsilon&&Math.abs(c-f.circle.cy)<u.epsilon;)l=f.N,n.push(f),i(f),f=l;n.push(f),(0,d.detachCircle)(f);var g,v=n.length;for(g=1;g<v;++g)f=n[g],o=n[g-1],(0,h.setEdgeEnd)(f.edge,o.site,f.site,a);o=n[0],(f=n[v-1]).edge=(0,h.createEdge)(o.site,f.site,null,a),(0,d.attachCircle)(o),(0,d.attachCircle)(f)}function c(e){for(var i,t,c,l,o=e[0],f=e[1],g=u.beaches._;g;)if((c=a(g,f)-o)>u.epsilon)g=g.L;else{if(!((l=o-s(g,f))>u.epsilon)){c>-u.epsilon?(i=g.P,t=g):l>-u.epsilon?(i=g,t=g.N):i=t=g;break}if(!g.R){i=g;break}g=g.R}(0,n.createCell)(e);var v=r(e);if(u.beaches.insert(i,v),i||t){if(i===t)return(0,d.detachCircle)(i),t=r(i.site),u.beaches.insert(v,t),v.edge=t.edge=(0,h.createEdge)(i.site,v.site),(0,d.attachCircle)(i),void(0,d.attachCircle)(t);if(t){(0,d.detachCircle)(i),(0,d.detachCircle)(t);var p=i.site,C=p[0],b=p[1],E=e[0]-C,q=e[1]-b,x=t.site,M=x[0]-C,N=x[1]-b,k=2*(E*N-q*M),B=E*E+q*q,P=M*M+N*N,R=[(N*B-q*P)/k+C,(E*P-M*B)/k+b];(0,h.setEdgeEnd)(t.edge,p,x,R),v.edge=(0,h.createEdge)(p,e,null,R),t.edge=(0,h.createEdge)(e,x,null,R),(0,d.attachCircle)(i),(0,d.attachCircle)(t)}else v.edge=(0,h.createEdge)(i.site,v.site)}}function a(e,r){var i=e.site,t=i[0],c=i[1],a=c-r;if(!a)return t;var s=e.P;if(!s)return-1/0;var l=(i=s.site)[0],n=i[1],d=n-r;if(!d)return l;var h=l-t,u=1/a-1/d,o=h/d;return u?(-o+Math.sqrt(o*o-2*u*(h*h/(-2*d)-n+d/2+c-a/2)))/u+t:(t+l)/2}function s(e,r){var i=e.N;if(i)return a(i,r);var t=e.site;return t[1]===r?t[0]:1/0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeBeach=t,exports.addBeach=c;var l=require("./RedBlackTree"),n=require("./Cell"),d=require("./Circle"),h=require("./Edge"),u=require("./Diagram"),o=[];
},{"./RedBlackTree":518,"./Cell":515,"./Circle":514,"./Edge":517,"./Diagram":414}],414:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,r){return(e[0]-r[0])*(t[1]-e[1])-(e[0]-t[0])*(r[1]-e[1])}function r(e,t){return t[1]-e[1]||t[0]-e[0]}function s(e,t){var s,a,u,f=e.sort(r).pop();for(exports.edges=g=[],exports.cells=p=new Array(e.length),exports.beaches=d=new c.default,exports.circles=h=new c.default;;)if(u=o.firstCircle,f&&(!u||f[1]<u.y||f[1]===u.y&&f[0]<u.x))f[0]===s&&f[1]===a||((0,l.addBeach)(f),s=f[0],a=f[1]),f=e.pop();else{if(!u)break;(0,l.removeBeach)(u.arc)}if((0,i.sortCellHalfedges)(),t){var x=+t[0][0],v=+t[0][1],b=+t[1][0],y=+t[1][1];(0,n.clipEdges)(x,v,b,y),(0,i.clipCells)(x,v,b,y)}this.edges=g,this.cells=p,exports.beaches=d=exports.circles=h=exports.edges=g=exports.cells=p=null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.edges=exports.circles=exports.cells=exports.beaches=exports.epsilon2=exports.epsilon=void 0,exports.default=s;var l=require("./Beach"),i=require("./Cell"),o=require("./Circle"),n=require("./Edge"),a=require("./RedBlackTree"),c=e(a),u=exports.epsilon=1e-6,f=exports.epsilon2=1e-12,d=exports.beaches=void 0,p=exports.cells=void 0,h=exports.circles=void 0,g=exports.edges=void 0;s.prototype={constructor:s,polygons:function(){var e=this.edges;return this.cells.map(function(t){var r=t.halfedges.map(function(r){return(0,i.cellHalfedgeStart)(t,e[r])});return r.data=t.site.data,r})},triangles:function(){var e=[],r=this.edges;return this.cells.forEach(function(s,l){if(o=(i=s.halfedges).length)for(var i,o,n,a=s.site,c=-1,u=r[i[o-1]],f=u.left===a?u.right:u.left;++c<o;)n=f,f=(u=r[i[c]]).left===a?u.right:u.left,n&&f&&l<n.index&&l<f.index&&t(a,n,f)<0&&e.push([a.data,n.data,f.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,r){for(var s,l,i=this,o=i._found||0,n=i.cells.length;!(l=i.cells[o]);)if(++o>=n)return null;var a=e-l.site[0],c=t-l.site[1],u=a*a+c*c;do{l=i.cells[s=o],o=null,l.halfedges.forEach(function(r){var s=i.edges[r],n=s.left;if(n!==l.site&&n||(n=s.right)){var a=e-n[0],c=t-n[1],f=a*a+c*c;f<u&&(u=f,o=n.index)}})}while(null!==o);return i._found=s,null==r||u<=r*r?l.site:null}};
},{"./Beach":516,"./Cell":515,"./Circle":514,"./Edge":517,"./RedBlackTree":518}],244:[function(require,module,exports) {
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function n(n){return new l.default(n.map(function(t,u){var l=[Math.round(e(t,u,n)/r.epsilon)*r.epsilon,Math.round(o(t,u,n)/r.epsilon)*r.epsilon];return l.index=u,l.data=t,l}),i)}var e=u.x,o=u.y,i=null;return n.polygons=function(e){return n(e).polygons()},n.links=function(e){return n(e).links()},n.triangles=function(e){return n(e).triangles()},n.x=function(u){return arguments.length?(e="function"==typeof u?u:(0,t.default)(+u),n):e},n.y=function(e){return arguments.length?(o="function"==typeof e?e:(0,t.default)(+e),n):o},n.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],n):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},n.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],n):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},n};var e=require("./constant"),t=n(e),u=require("./point"),r=require("./Diagram"),l=n(r);
},{"./constant":361,"./point":420,"./Diagram":414}],86:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/voronoi");Object.defineProperty(exports,"voronoi",{enumerable:!0,get:function(){return e(r).default}});
},{"./src/voronoi":244}],460:[function(require,module,exports) {
"use strict";function t(t,e,s){this.target=t,this.type=e,this.transform=s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],354:[function(require,module,exports) {
"use strict";function t(t,i,n){this.k=t,this.x=i,this.y=n}function i(t){return t.__zoom||n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transform=t,exports.default=i,t.prototype={constructor:t,scale:function(i){return 1===i?this:new t(this.k*i,this.x,this.y)},translate:function(i,n){return 0===i&0===n?this:new t(this.k,this.x+this.k*i,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var n=exports.identity=new t(1,0,0);i.prototype=t.prototype;
},{}],353:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(){return!a.event.button}function n(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function o(){return this.__zoom||v.identity}function i(){return-a.event.deltaY*(a.event.deltaMode?120:1)/500}function u(){return"ontouchstart"in this}function r(t,e,n){var o=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],u=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>u?(u+r)/2:Math.min(0,u)||Math.max(0,r))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function t(t){t.property("__zoom",o).on("wheel.zoom",T).on("mousedown.zoom",k).on("dblclick.zoom",M).filter(S).on("touchstart.zoom",b).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(t,e){return(e=Math.max(j[0],Math.min(j[1],e)))===t.k?t:new v.Transform(e,t.x,t.y)}function p(t,e,n){var o=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return o===t.x&&i===t.y?t:new v.Transform(t.k,o,i)}function _(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function g(t,e,n){t.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var t=arguments,o=w(this,t),i=D.apply(this,t),u=n||_(i),r=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),h=this.__zoom,s="function"==typeof e?e.apply(this,t):e,c=O(h.invert(u).concat(r/h.k),s.invert(u).concat(r/s.k));return function(t){if(1===t)t=s;else{var e=c(t),n=r/e[2];t=new v.Transform(n,u[0]-e[0]*n,u[1]-e[1]*n)}o.zoom(null,t)}})}function w(t,e){for(var n,o=0,i=P.length;o<i;++o)if((n=P[o]).that===t)return n;return new x(t,e)}function x(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=D.apply(t,e)}function T(){if(X.apply(this,arguments)){var t=w(this,arguments),e=this.__zoom,n=Math.max(j[0],Math.min(j[1],e.k*Math.pow(2,G.apply(this,arguments)))),o=(0,a.mouse)(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[o,e.invert(o)],(0,l.interrupt)(this),t.start()}(0,z.default)(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},A),t.zoom("mouse",B(p(f(e,n),t.mouse[0],t.mouse[1]),t.extent,H))}}function k(){if(!V&&X.apply(this,arguments)){var t=w(this,arguments),e=(0,a.select)(a.event.view).on("mousemove.zoom",function(){if((0,z.default)(),!t.moved){var e=a.event.clientX-o,n=a.event.clientY-i;t.moved=e*e+n*n>C}t.zoom("mouse",B(p(t.that.__zoom,t.mouse[0]=(0,a.mouse)(t.that),t.mouse[1]),t.extent,H))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),(0,s.dragEnable)(a.event.view,t.moved),(0,z.default)(),t.end()},!0),n=(0,a.mouse)(this),o=a.event.clientX,i=a.event.clientY;(0,s.dragDisable)(a.event.view),(0,y.nopropagation)(),t.mouse=[n,this.__zoom.invert(n)],(0,l.interrupt)(this),t.start()}}function M(){if(X.apply(this,arguments)){var e=this.__zoom,n=(0,a.mouse)(this),o=e.invert(n),i=e.k*(a.event.shiftKey?.5:2),u=B(p(f(e,i),n,o),D.apply(this,arguments),H);(0,z.default)(),K>0?(0,a.select)(this).transition().duration(K).call(g,u,n):(0,a.select)(this).call(t.transform,u)}}function b(){if(X.apply(this,arguments)){var t,e,n,o,i=w(this,arguments),u=a.event.changedTouches,r=u.length;for((0,y.nopropagation)(),e=0;e<r;++e)n=u[e],o=[o=(0,a.touch)(this,u,n.identifier),this.__zoom.invert(o),n.identifier],i.touch0?i.touch1||(i.touch1=o):(i.touch0=o,t=!0);if(Y&&(Y=clearTimeout(Y),!i.touch1))return i.end(),void((o=(0,a.select)(this).on("dblclick.zoom"))&&o.apply(this,arguments));t&&(Y=setTimeout(function(){Y=null},Z),(0,l.interrupt)(this),i.start())}}function q(){var t,e,n,o,i=w(this,arguments),u=a.event.changedTouches,r=u.length;for((0,z.default)(),Y&&(Y=clearTimeout(Y)),t=0;t<r;++t)e=u[t],n=(0,a.touch)(this,u,e.identifier),i.touch0&&i.touch0[2]===e.identifier?i.touch0[0]=n:i.touch1&&i.touch1[2]===e.identifier&&(i.touch1[0]=n);if(e=i.that.__zoom,i.touch1){var h=i.touch0[0],s=i.touch0[1],c=i.touch1[0],l=i.touch1[1],m=(m=c[0]-h[0])*m+(m=c[1]-h[1])*m,d=(d=l[0]-s[0])*d+(d=l[1]-s[1])*d;e=f(e,Math.sqrt(m/d)),n=[(h[0]+c[0])/2,(h[1]+c[1])/2],o=[(s[0]+l[0])/2,(s[1]+l[1])/2]}else{if(!i.touch0)return;n=i.touch0[0],o=i.touch0[1]}i.zoom("touch",B(p(e,n,o),i.extent,H))}function E(){var t,e,n=w(this,arguments),o=a.event.changedTouches,i=o.length;for((0,y.nopropagation)(),V&&clearTimeout(V),V=setTimeout(function(){V=null},Z),t=0;t<i;++t)e=o[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var Y,V,X=e,D=n,B=r,G=i,S=u,j=[0,1/0],H=[[-1/0,-1/0],[1/0,1/0]],K=250,O=c.interpolateZoom,P=[],W=(0,h.dispatch)("start","zoom","end"),Z=500,A=150,C=0;return t.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",o),t!==n?g(t,e):n.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},t.scaleBy=function(e,n){t.scaleTo(e,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},t.scaleTo=function(e,n){t.transform(e,function(){var t=D.apply(this,arguments),e=this.__zoom,o=_(t),i=e.invert(o),u="function"==typeof n?n.apply(this,arguments):n;return B(p(f(e,u),o,i),t,H)})},t.translateBy=function(e,n,o){t.transform(e,function(){return B(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof o?o.apply(this,arguments):o),D.apply(this,arguments),H)})},t.translateTo=function(e,n,o){t.transform(e,function(){var t=D.apply(this,arguments),e=this.__zoom,i=_(t);return B(v.identity.translate(i[0],i[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof o?-o.apply(this,arguments):-o),t,H)})},x.prototype={start:function(){return 1==++this.active&&(this.index=P.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(P.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){(0,a.customEvent)(new d.default(t,e,this.that.__zoom),W.apply,W,[e,this.that,this.args])}},t.wheelDelta=function(e){return arguments.length?(G="function"==typeof e?e:(0,m.default)(+e),t):G},t.filter=function(e){return arguments.length?(X="function"==typeof e?e:(0,m.default)(!!e),t):X},t.touchable=function(e){return arguments.length?(S="function"==typeof e?e:(0,m.default)(!!e),t):S},t.extent=function(e){return arguments.length?(D="function"==typeof e?e:(0,m.default)([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):D},t.scaleExtent=function(e){return arguments.length?(j[0]=+e[0],j[1]=+e[1],t):[j[0],j[1]]},t.translateExtent=function(e){return arguments.length?(H[0][0]=+e[0][0],H[1][0]=+e[1][0],H[0][1]=+e[0][1],H[1][1]=+e[1][1],t):[[H[0][0],H[0][1]],[H[1][0],H[1][1]]]},t.constrain=function(e){return arguments.length?(B=e,t):B},t.duration=function(e){return arguments.length?(K=+e,t):K},t.interpolate=function(e){return arguments.length?(O=e,t):O},t.on=function(){var e=W.on.apply(W,arguments);return e===W?t:e},t.clickDistance=function(e){return arguments.length?(C=(e=+e)*e,t):Math.sqrt(C)},t};var h=require("d3-dispatch"),s=require("d3-drag"),c=require("d3-interpolate"),a=require("d3-selection"),l=require("d3-transition"),f=require("./constant"),m=t(f),p=require("./event"),d=t(p),v=require("./transform"),y=require("./noevent"),z=t(y);
},{"d3-dispatch":65,"d3-drag":73,"d3-interpolate":79,"d3-selection":90,"d3-transition":87,"./constant":361,"./event":460,"./transform":354,"./noevent":382}],89:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/zoom");Object.defineProperty(exports,"zoom",{enumerable:!0,get:function(){return e(r).default}});var t=require("./src/transform");Object.defineProperty(exports,"zoomTransform",{enumerable:!0,get:function(){return e(t).default}}),Object.defineProperty(exports,"zoomIdentity",{enumerable:!0,get:function(){return t.identity}});
},{"./src/zoom":353,"./src/transform":354}],22:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./build/package");Object.defineProperty(exports,"version",{enumerable:!0,get:function(){return e.version}});var r=require("d3-array");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("d3-axis");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("d3-brush");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var u=require("d3-chord");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var o=require("d3-collection");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var c=require("d3-color");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var f=require("d3-dispatch");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var a=require("d3-drag");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var i=require("d3-dsv");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var d=require("d3-ease");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var s=require("d3-force");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var l=require("d3-format");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var b=require("d3-geo");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var p=require("d3-hierarchy");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});var y=require("d3-interpolate");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}})});var j=require("d3-path");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}})});var O=require("d3-polygon");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}})});var _=require("d3-quadtree");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}})});var m=require("d3-queue");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}})});var h=require("d3-random");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return h[e]}})});var v=require("d3-request");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}})});var g=require("d3-scale");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}})});var q=require("d3-selection");Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return q[e]}})});var x=require("d3-shape");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}})});var P=require("d3-time");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}})});var k=require("d3-time-format");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}})});var M=require("d3-timer");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}})});var E=require("d3-transition");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return E[e]}})});var z=require("d3-voronoi");Object.keys(z).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return z[e]}})});var w=require("d3-zoom");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return w[e]}})});
},{"./build/package":25,"d3-array":66,"d3-axis":61,"d3-brush":63,"d3-chord":62,"d3-collection":67,"d3-color":64,"d3-dispatch":65,"d3-drag":73,"d3-dsv":74,"d3-ease":69,"d3-force":70,"d3-format":68,"d3-geo":71,"d3-hierarchy":72,"d3-interpolate":79,"d3-path":75,"d3-polygon":76,"d3-quadtree":77,"d3-queue":78,"d3-random":82,"d3-request":80,"d3-scale":81,"d3-selection":90,"d3-shape":88,"d3-time":85,"d3-time-format":83,"d3-timer":84,"d3-transition":87,"d3-voronoi":86,"d3-zoom":89}],5:[function(require,module,exports) {
"use strict";function t(t){null==c&&console.warn("Warning replacing existing OutputHandler."),c=t}function e(){return c?c():null}function n(t,e,n,a,o,s){const r=l.axisBottom(n);r.tickSizeOuter(0),t.append("g").attr("transform",`translate(${e.left},${s+e.top})`).call(r);const i=l.axisLeft(a);i.tickSizeOuter(0),t.append("g").attr("transform",`translate(${e.left},${e.top})`).call(i);const c=l.axisRight(a);c.ticks(0),c.tickSizeOuter(0),t.append("g").attr("transform",`translate(${o+e.left},${e.top})`).call(c);const p=l.axisTop(n);p.ticks(0),p.tickSizeOuter(0),t.append("g").attr("transform",`translate(${e.left},${e.top})`).call(p)}function a(t){let e,n,a,o;for(const s of t)for(const t of s)(void 0===e||t.x<e)&&(e=t.x),(void 0===a||t.y<a)&&(a=t.y),(void 0===n||t.x>n)&&(n=t.x),(void 0===o||t.y>o)&&(o=t.y);return[e,n,a,o]}function o(t){const o=e();if(!o)return;const s="#"+o.id;let r=440,i=300;l.select(s).select("svg").remove();const c=l.select(s).append("svg").attr("viewBox",`0 0 ${r} ${i}`).attr("preserveAspectRatio","xMinYMin meet").attr("width",r).attr("height",i),u={top:30,right:30,bottom:30,left:30};r=+c.attr("width")-u.left-u.right,i=+c.attr("height")-u.top-u.bottom;const g=c.append("g").attr("transform",`translate(${u.left},${u.top})`),[h,f,d,x]=a(t),m=.02*(f-h),y=.02*(x-d),$=l.scaleLinear().domain([h-m,f+m]).range([0,r]),v=l.scaleLinear().domain([d-y,x+y]).range([i,0]);n(c,u,$,v,r,i);const k=l.line().x(t=>$(t.x)).y(t=>v(t.y));g.selectAll("path").data(t).enter().append("path").attr("d",k).style("fill","none").style("stroke-width","2px").style("stroke",(t,e)=>p(e))}function s(...t){const e=[],n=[];let a="x";for(let o=0;o<t.length;o++){const s=t[o];switch(a){case"x":e.push(s),a="y";break;case"y":n.push(s),a="x"}}i.assertEqual(e.length,n.length);const s=[];for(let t=0;t<e.length;++t){const a=e[t].getData(),o=n[t].getData();i.assertEqual(a.length,o.length);const r=[];for(let t=0;t<a.length;++t)r.push({x:a[t],y:o[t]});s.push(r)}o(s)}function r(t){const n=e();if(!n)return;const a=document.createElement("canvas");i.assertEqual(t.shape.length,2,"Assuming monochrome for now");const o=t.getData(),s=a.height=t.shape[0],r=a.width=t.shape[1],l=a.getContext("2d"),c=l.getImageData(0,0,r,s),p=c.data;for(let t=0;t<s;++t)for(let e=0;e<r;++e){let n=4*(t*r+e);const a=o[t*r+e];p[n]=a,p[++n]=a,p[++n]=a,p[++n]=255}l.putImageData(c,0,0),n.appendChild(a)}Object.defineProperty(exports,"__esModule",{value:!0});const l=require("d3"),i=require("./util");let c;exports.register=t,exports.outputEl=e;const p=l.scaleOrdinal(l.schemeCategory10);exports.plot=s,exports.imshow=r;
},{"d3":22,"./util":2}],1:[function(require,module,exports) {
"use strict";function e(e,r){return h.convert(e,r)}function r(){return c.bo.listDevices()}function s(e,r={dtype:"float32"}){const s=i([e,e],r),t=p([e],r);return s.setDiag(t)}function t(e,r,s=50){const t=c.bo.linspace(e,r,s);return new h.Tensor(t)}function a(...e){let r,s,t;switch(e.length){case 1:r=0,s=e[0],t=1;break;case 2:r=e[0],s=e[1],t=1;break;case 3:r=e[0],s=e[1],t=e[2];break;default:throw new Error("Bad number of arguments.")}const a=c.bo.range(r,s,t);return new h.Tensor(a)}function o(e){const r=c.bo.randn(e);return new h.Tensor(r)}function n(r,s){return l.fill(e(r),s)}function i(e,r={dtype:"float32"}){return l.zeros(e,r)}function p(e,r={dtype:"float32"}){return l.ones(e,r)}Object.defineProperty(exports,"__esModule",{value:!0});const c=require("./backend"),u=require("./backprop"),l=require("./ops"),h=require("./tensor");var d=require("./types");exports.DType=d.DType,exports.TensorLike=d.TensorLike;const g=require("./util");exports.T=e,exports.listDevices=r;var f=require("./tensor");exports.Tensor=f.Tensor;var x=require("./backprop");exports.grad=x.grad,exports.multigrad=x.multigrad,exports.multigradAndVal=x.multigradAndVal,exports.gradAndVal=x.gradAndVal,exports.gradParams=x.gradParams,exports.ParamsFn=x.ParamsFn,exports.eye=s,exports.linspace=t,exports.range=a,exports.randn=o,exports.fill=n,exports.zeros=i,exports.ones=p;class m{constructor(){this.store=new Map}has(e){return this.store.has(e)}get(e){return this.store.get(e)}set(e,r){return this.store.set(e,r),r}forEach(e){this.store.forEach(e)}randn(e,r,{device:s="CPU:0",scale:t=.1}={}){if(this.has(e))return this.get(e);let a=o(r).mul(t);return s&&"CPU:0"!==s&&(a=new h.Tensor(c.bo.copyToDevice(a.basic,s))),this.set(e,a),a}zeros(e,r,s="float32",t="CPU:0"){if(this.has(e))return this.get(e);let a=i(r);return t&&"CPU:0"!==t&&(a=new h.Tensor(c.bo.copyToDevice(a.basic,t))),this.set(e,a),a}}exports.Params=m;class b{constructor(){this.steps=0,this.params=new m,this.velocity=new m}step(e,r,s){const t=r;g.assert(0<=t&&t<=1);let a;return h.gc(r=>{const o=u.gradParams(s),[n,i]=o(this.params);g.assert(0===i.rank),g.assert(n instanceof m),n.forEach((s,a)=>{const o=this.params.get(a),n=this.velocity.zeros(a,o.shape);this.steps>0&&(g.assertShapesEqual(o.shape,s.shape),g.assertShapesEqual(o.shape,n.shape)),n.assign(s.mul(1-t).sub(n.mul(t)).neg()),r(n),g.assert(s.device===n.device),o.assign(o.add(n.mul(e))),r(o)}),this.steps++,a=i.cpu().getData()[0]}),a}}exports.OptimizerSGD=b;var v=require("./backend");exports.backend=v.backend;var T=require("./matplotlib");exports.plot=T.plot,exports.imshow=T.imshow;
},{"./backend":7,"./backprop":3,"./ops":4,"./tensor":6,"./types":8,"./util":2,"./matplotlib":5}]},{},[1])
      if (typeof window !== "undefined") {
        propel = require(1);
      } else {
        module.exports = require(1);
      }
    